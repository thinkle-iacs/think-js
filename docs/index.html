<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Matthew X. Curinga">
  <meta name="author" content="Peter Wentworth">
  <meta name="author" content="Jeffrey Elkner">
  <meta name="author" content="Allen B. Downey">
  <meta name="author" content="and Chris Meyers">
  <title>Think Javascript</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */
  </style>
  <!-- this css file gets inlined by the build script to make standalone html5 output
  that is why it has a style tag... -->

  <style type="text/css">

  blockquote {
    margin-top: 1em;
    max-width: 600px;
    border-left: 8px solid lightgray;
    padding-left: .5em;
  }


  h1.title
  {
    margin:0;
    margin-bottom: .5em;
    padding:0;
    padding-top: 80px;
    border-style: none;
    background-color: transparent;
    clear: both;
    color: #ab1c19;
    font-weight: bold;
    font-size: 400%;
  }


  h1
  {
    font-size: 350%;
    border-bottom: medium solid black;
    text-transform: uppercase;
    padding: 0;
    padding-top: 3em;
  }

  /* make all tables bootstrappy */
  table {
    width: 100%;
    margin-bottom: 1rem;
    background-color: transparent;
  }

  td, th {
    padding: .75rem;
    vertical-align: top;
    border-top: 1px solid #dee2e6;
  }

  thead th {
    vertical-align: bottom;
    border-bottom: 2px solid #dee2e6;
    font-weight: bold;
  }


  #TOC {
    margin-top: 2em;
  }

  #foreword, #the-way-of-the-program, #appendices {
    counter-reset: section;
  }

  section.level1 {
    counter-increment: section;
    counter-reset: subsection;
  }


  section.level2 {
    max-width: 680px;
  }


  h2:before {
    counter-increment: subsection;
    content: counter(section) "." counter(subsection) " ";
  }

  #forward h2:before, #preface h2:before {
    content: "";
  }


  #appendices h2:before {
    content: counter(subsection, upper-alpha ) ". ";
  }

  #appendices {
    counter-reset: section;
    counter-reset: subsection;
  }



  h1.title:before,
  h2.author:before,
  nav#TOC h2:before,
  #forward h2:before,
  #preface h2:before {
    content: "";
  }


  h2.author
  {
    font-size: 1rem;
    line-height: 1.15em;
    padding: 0;
    margin-bottom: 0;
  }


  nav#TOC
  {
    background: none repeat scroll 0 0 white;
    counter-reset: toccount;
  }

  nav#TOC li
  {
    list-style-type: none;
    font-weight: normal;
  }

  nav#TOC>ul>li
  {
    font-weight: bold;
    padding-top: 1em;
    margin-bottom: .5em;
  }



  nav#TOC>ul>li:nth-child(2)
  {
    counter-reset: toccount;
  }

  nav#TOC>ul>li:before
  {
    counter-reset: tocsub;
    counter-increment: toccount;
    content: counter(toccount) ". ";
  }

  nav#TOC>ul>li:first-child::before
  {
    content: counter(toccount, lower-roman) ". ";
  }

  nav#TOC>ul>li>ul>li:first-child
  {
    padding-top: .5em;
  }

  nav#TOC>ul>li>ul>li:before
  {
    counter-increment: tocsub;
    content: counter(toccount) "." counter(tocsub) " ";
  }


  aside
  {
    border: medium solid gray;
    border-radius: 8px;
    padding: .5em;
    margin: 3em .5em;
    background-color: #F6CCDA;
  }


  /** code highlighting stuff **/

  /*pre.numberSource {
    margin-left: 1em;
  }
  */
  aside code {
    font-size: 90%;
    color: #e83e8c !important;
    background-color: transparent !important;
    border-style: none !important;
  }

  a.sourceLine:before {
    text-decoration: none !important;
    border-style: none;
  }

  div.sourceCode {
    padding: 6px;
  }

  /* not sure why this is necessary -- need to look at the syntax highlighter */
  .sourceCode pre, pre.sourceCode
  {
    color: inherit;
    border-style: none;
    background-color: #303030;
  }


  /** code listings/case studies **/

  section.codeListing {
    width: 1200px;
    max-width: 100%;
  }

  section[id*="case-study"]
  {
    padding-left: 40%;
    position: relative;
    border-top: 1px solid gray;
  }

  section[id*="case-study"] h2, section[id*="case-study"] h3
  {
    text-align: right;
    margin: 2em 0;

  }

  section[id*="case-study"] aside
  {
    background: white;
    border-style: none;
    border-radius: 0px;
    position: absolute;
    left: 0;
    width: 39%;
    text-align: justify;
    padding: 0;
    margin: 0;
    font-size: 90%;
  }

  section[id*="case-study"] aside p
  {
    margin: 0;
    padding: 0;
    padding-right: .5em;
    line-height: 1.1em;
    margin-bottom: .5em;
  }

  .figure-caption {
    text-align: center;
  }
  dd {
    margin-left: 1em;
  }
  @media screen
  {
    body
    {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
    }

  }

  </style>
</head>
<body>
<header>
<h1 class="title">Think Javascript</h1>
<h2 class="author">Matthew X. Curinga</h2>
<h2 class="author">Peter Wentworth</h2>
<h2 class="author">Jeffrey Elkner</h2>
<h2 class="author">Allen B. Downey</h2>
<h2 class="author">and Chris Meyers</h2>
</header>
<nav id="TOC">
<h2>Contents</h2>
<ul>
<li><a href="#forward" id="toc-forward">Forward</a>
<ul>
<li><a href="#a-very-brief-forward-to-the-javascript-edition"
id="toc-a-very-brief-forward-to-the-javascript-edition">A very brief
forward to the Javascript edition</a></li>
<li><a href="#foreword-to-learning-with-python-3-rle"
id="toc-foreword-to-learning-with-python-3-rle">Foreword to Learning
with Python 3 (RLE)</a></li>
<li><a href="#contributor-list" id="toc-contributor-list">Contributor
List</a></li>
</ul></li>
<li><a href="#the-way-of-the-program"
id="toc-the-way-of-the-program">The way of the program</a>
<ul>
<li><a href="#the-javascript-programming-language"
id="toc-the-javascript-programming-language">The Javascript programming
language</a></li>
<li><a href="#what-is-a-program" id="toc-what-is-a-program">What is a
program?</a></li>
<li><a href="#what-is-debugging" id="toc-what-is-debugging">What is
debugging?</a></li>
<li><a href="#syntax-errors" id="toc-syntax-errors">Syntax
errors</a></li>
<li><a href="#runtime-errors" id="toc-runtime-errors">Runtime
errors</a></li>
<li><a href="#semantic-errors" id="toc-semantic-errors">Semantic
errors</a></li>
<li><a href="#experimental-debugging"
id="toc-experimental-debugging">Experimental debugging</a></li>
<li><a href="#formal-and-natural-languages"
id="toc-formal-and-natural-languages">Formal and natural
languages</a></li>
<li><a href="#glossary" id="toc-glossary">Glossary</a></li>
<li><a href="#the-first-program" id="toc-the-first-program">The first
program</a></li>
<li><a href="#comments" id="toc-comments">Comments</a></li>
<li><a href="#turtle-graphics" id="toc-turtle-graphics">Turtle
Graphics</a></li>
<li><a href="#turtle-documentation" id="toc-turtle-documentation">Turtle
documentation</a></li>
<li><a href="#turtle-exercises-1" id="toc-turtle-exercises-1">Turtle
Exercises 1</a></li>
<li><a href="#first-turtle-lab" id="toc-first-turtle-lab">First Turtle
Lab</a></li>
<li><a href="#glossary-1" id="toc-glossary-1">Glossary</a></li>
</ul></li>
<li><a href="#variables-expressions-and-statements"
id="toc-variables-expressions-and-statements">Variables, expressions and
statements</a>
<ul>
<li><a href="#values-and-data-types"
id="toc-values-and-data-types">Values and data types</a></li>
<li><a href="#variables" id="toc-variables">Variables</a></li>
<li><a href="#variable-names-and-keywords"
id="toc-variable-names-and-keywords">Variable names and
keywords</a></li>
<li><a href="#statements" id="toc-statements">Statements</a></li>
<li><a href="#evaluating-expressions"
id="toc-evaluating-expressions">Evaluating expressions</a></li>
<li><a href="#operators-and-operands"
id="toc-operators-and-operands">Operators and operands</a></li>
<li><a href="#type-conversion" id="toc-type-conversion">Type
conversion</a></li>
<li><a href="#order-of-operations" id="toc-order-of-operations">Order of
operations</a></li>
<li><a href="#operations-on-strings"
id="toc-operations-on-strings">Operations on strings</a></li>
<li><a href="#input" id="toc-input">Input</a></li>
<li><a href="#composition" id="toc-composition">Composition</a></li>
<li><a href="#the-modulus-operator" id="toc-the-modulus-operator">The
modulus operator</a></li>
<li><a href="#variable-exercises" id="toc-variable-exercises">Variable
Exercises</a></li>
<li><a href="#glossary-2" id="toc-glossary-2">Glossary</a></li>
</ul></li>
<li><a href="#functions" id="toc-functions">Functions</a>
<ul>
<li><a href="#functions-1" id="toc-functions-1">Functions</a></li>
<li><a href="#composition-functions-can-call-other-functions"
id="toc-composition-functions-can-call-other-functions">Composition:
Functions can call other functions</a></li>
<li><a href="#flow-of-execution" id="toc-flow-of-execution">Flow of
execution</a></li>
<li><a href="#functions-that-require-arguments"
id="toc-functions-that-require-arguments">Functions that require
arguments</a></li>
<li><a href="#functions-that-return-values"
id="toc-functions-that-return-values">Functions that return
values</a></li>
<li><a href="#glossary-3" id="toc-glossary-3">Glossary</a></li>
<li><a href="#function-exercises" id="toc-function-exercises">Function
Exercises</a></li>
<li><a href="#functions-lab" id="toc-functions-lab">Functions
Lab</a></li>
<li><a href="#unit-testing-exercises"
id="toc-unit-testing-exercises">Unit testing exercises</a></li>
<li><a href="#code-listing-1-the-tip-calculator"
id="toc-code-listing-1-the-tip-calculator">Code Listing 1: The Tip
Calculator</a></li>
</ul></li>
<li><a href="#conditionals" id="toc-conditionals">Conditionals</a>
<ul>
<li><a href="#boolean-values-and-expressions"
id="toc-boolean-values-and-expressions">Boolean values and
expressions</a></li>
<li><a href="#logical-operators" id="toc-logical-operators">Logical
operators</a></li>
<li><a href="#truth-tables" id="toc-truth-tables">Truth Tables</a></li>
<li><a href="#simplifying-boolean-expressions"
id="toc-simplifying-boolean-expressions">Simplifying Boolean
Expressions</a></li>
<li><a href="#conditional-execution"
id="toc-conditional-execution">Conditional execution</a></li>
<li><a href="#omitting-the-else-clause"
id="toc-omitting-the-else-clause">Omitting the <code>else</code>
clause</a></li>
<li><a href="#chained-conditionals"
id="toc-chained-conditionals">Chained conditionals</a></li>
<li><a href="#nested-conditionals" id="toc-nested-conditionals">Nested
conditionals</a></li>
<li><a href="#the-return-statement" id="toc-the-return-statement">The
<code>return</code> statement</a></li>
<li><a href="#truthy-evaluations" id="toc-truthy-evaluations">Truthy
evaluations</a></li>
<li><a href="#logical-opposites" id="toc-logical-opposites">Logical
opposites</a></li>
<li><a href="#glossary-4" id="toc-glossary-4">Glossary</a></li>
<li><a href="#conditional-exercises"
id="toc-conditional-exercises">Conditional Exercises</a></li>
<li><a href="#conditionals-lab" id="toc-conditionals-lab">Conditionals
Lab</a></li>
</ul></li>
<li><a href="#iteration-with-for-loops"
id="toc-iteration-with-for-loops">Iteration with <code>for</code>
loops</a>
<ul>
<li><a href="#running-loops" id="toc-running-loops">Running
loops</a></li>
<li><a href="#the-for-loop" id="toc-the-for-loop">The <code>for</code>
loop</a></li>
<li><a href="#assignment" id="toc-assignment">Assignment</a></li>
<li><a href="#updating-variables" id="toc-updating-variables">Updating
variables</a></li>
<li><a href="#abbreviated-assignment"
id="toc-abbreviated-assignment">Abbreviated assignment</a></li>
<li><a href="#tables" id="toc-tables">Tables</a></li>
<li><a href="#two-dimensional-tables"
id="toc-two-dimensional-tables">Two-dimensional tables</a></li>
<li><a href="#encapsulation-and-generalization"
id="toc-encapsulation-and-generalization">Encapsulation and
generalization</a></li>
<li><a href="#more-encapsulation-and-generalization"
id="toc-more-encapsulation-and-generalization">More encapsulation and
generalization</a></li>
<li><a href="#local-variables" id="toc-local-variables">Local
variables</a></li>
<li><a href="#more-generalization" id="toc-more-generalization">More
generalization</a></li>
<li><a href="#solving-problems-with-for-loops"
id="toc-solving-problems-with-for-loops">Solving problems with
<code>for</code> loops</a></li>
<li><a href="#functions-2" id="toc-functions-2">Functions</a></li>
<li><a href="#glossary-5" id="toc-glossary-5">Glossary</a></li>
<li><a href="#for-loop-exercises" id="toc-for-loop-exercises">For Loop
Exercises</a></li>
<li><a href="#for-loop-lab" id="toc-for-loop-lab">For Loop Lab</a></li>
</ul></li>
<li><a href="#while-loops" id="toc-while-loops">While loops</a>
<ul>
<li><a href="#the-while-statement" id="toc-the-while-statement">The
<code>while</code> statement</a></li>
<li><a href="#the-collatz-3n-1-sequence"
id="toc-the-collatz-3n-1-sequence">The Collatz 3n + 1 sequence</a></li>
<li><a href="#tracing-a-program" id="toc-tracing-a-program">Tracing a
program</a></li>
<li><a href="#counting-digits" id="toc-counting-digits">Counting
digits</a></li>
<li><a href="#newtons-method-for-finding-square-roots"
id="toc-newtons-method-for-finding-square-roots">Newton’s method for
finding square roots</a></li>
<li><a href="#algorithms" id="toc-algorithms">Algorithms</a></li>
<li><a href="#while-loop-exercises" id="toc-while-loop-exercises">While
Loop Exercises</a></li>
</ul></li>
<li><a href="#strings-1" id="toc-strings-1">Strings</a>
<ul>
<li><a href="#a-compound-data-type" id="toc-a-compound-data-type">A
compound data type</a></li>
<li><a href="#working-with-strings-as-single-things"
id="toc-working-with-strings-as-single-things">Working with strings as
single things</a></li>
<li><a href="#working-with-the-parts-of-a-string"
id="toc-working-with-the-parts-of-a-string">Working with the parts of a
string</a></li>
<li><a href="#length" id="toc-length">Length</a></li>
<li><a href="#traversal-and-the-for-loop"
id="toc-traversal-and-the-for-loop">Traversal and the <code>for</code>
loop</a></li>
<li><a href="#substrings" id="toc-substrings">Substrings</a></li>
<li><a href="#string-comparison" id="toc-string-comparison">String
comparison</a></li>
<li><a href="#strings-are-immutable"
id="toc-strings-are-immutable">Strings are immutable</a></li>
<li><a href="#testing-inclusion" id="toc-testing-inclusion">Testing
inclusion</a></li>
<li><a href="#a-find-function" id="toc-a-find-function">A
<code>find</code> function</a></li>
<li><a href="#looping-and-counting"
id="toc-looping-and-counting">Looping and counting</a></li>
<li><a href="#default-parameters" id="toc-default-parameters">Default
parameters</a></li>
<li><a href="#the-built-in-indexof-method"
id="toc-the-built-in-indexof-method">The built-in <code>indexOf</code>
method</a></li>
<li><a href="#the-split-method" id="toc-the-split-method">The
<code>split</code> method</a></li>
<li><a href="#cleaning-up-your-strings"
id="toc-cleaning-up-your-strings">Cleaning up your strings</a></li>
<li><a href="#template-strings" id="toc-template-strings">Template
strings</a></li>
<li><a href="#glossary-6" id="toc-glossary-6">Glossary</a></li>
<li><a href="#string-exercises" id="toc-string-exercises">String
Exercises</a></li>
</ul></li>
<li><a href="#array" id="toc-array">Array</a>
<ul>
<li><a href="#array-values" id="toc-array-values">Array values</a></li>
<li><a href="#accessing-elements" id="toc-accessing-elements">Accessing
elements</a></li>
<li><a href="#array-membership" id="toc-array-membership">Array
membership</a></li>
<li><a href="#array-methods" id="toc-array-methods">Array
methods</a></li>
<li><a href="#array-slices" id="toc-array-slices">Array slices</a></li>
<li><a href="#arrays-are-mutable" id="toc-arrays-are-mutable">Arrays are
mutable</a></li>
<li><a href="#objects-and-references"
id="toc-objects-and-references">Objects and references</a></li>
<li><a href="#aliasing" id="toc-aliasing">Aliasing</a></li>
<li><a href="#cloning-arrays" id="toc-cloning-arrays">Cloning
arrays</a></li>
<li><a href="#array-parameters" id="toc-array-parameters">Array
parameters</a></li>
<li><a href="#pure-functions-and-modifiers"
id="toc-pure-functions-and-modifiers">Pure functions and
modifiers</a></li>
<li><a href="#functions-that-produce-arrays"
id="toc-functions-that-produce-arrays">Functions that produce
arrays</a></li>
<li><a href="#strings-and-arrays" id="toc-strings-and-arrays">Strings
and arrays</a></li>
<li><a href="#counting-words" id="toc-counting-words">Counting
words</a></li>
<li><a href="#nested-arrays" id="toc-nested-arrays">Nested
arrays</a></li>
<li><a href="#matrices" id="toc-matrices">Matrices</a></li>
<li><a href="#glossary-7" id="toc-glossary-7">Glossary</a></li>
<li><a href="#array-examples" id="toc-array-examples">Array
Examples</a></li>
<li><a href="#array-exercises" id="toc-array-exercises">Array
Exercises</a></li>
<li><a href="#array-lab" id="toc-array-lab">Array Lab</a></li>
<li><a href="#code-listing-2-school-test-data-report"
id="toc-code-listing-2-school-test-data-report">Code Listing 2: School
Test Data Report</a></li>
<li><a href="#school-data-exercises"
id="toc-school-data-exercises">School Data Exercises</a></li>
</ul></li>
<li><a href="#objects-maps" id="toc-objects-maps">Objects &amp; Maps</a>
<ul>
<li><a href="#keyvalue-pairs" id="toc-keyvalue-pairs">Key:Value
Pairs</a></li>
<li><a href="#map-operations" id="toc-map-operations">Map
operations</a></li>
<li><a href="#object-utility-functions"
id="toc-object-utility-functions">Object utility functions</a></li>
<li><a href="#aliasing-and-copying"
id="toc-aliasing-and-copying">Aliasing and copying</a></li>
<li><a href="#counting-letters" id="toc-counting-letters">Counting
letters</a></li>
<li><a href="#glossary-8" id="toc-glossary-8">Glossary</a></li>
</ul></li>
<li><a href="#web-guis" id="toc-web-guis">Web GUIs</a>
<ul>
<li><a href="#gui-graphical-user-interface"
id="toc-gui-graphical-user-interface">GUI: Graphical User
Interface</a></li>
<li><a href="#how-the-web-works-the-super-brief-version"
id="toc-how-the-web-works-the-super-brief-version">How the web works
(the super brief version)</a></li>
<li><a href="#js-gui" id="toc-js-gui">JS GUI</a></li>
<li><a href="#basic-elements" id="toc-basic-elements">Basic
Elements</a></li>
<li><a href="#js-gui-arrays-and-objects"
id="toc-js-gui-arrays-and-objects">JS GUI, Arrays, and Objects</a></li>
<li><a href="#code-listing-js-gui-demo"
id="toc-code-listing-js-gui-demo">Code Listing: JS GUI Demo</a></li>
</ul></li>
<li><a href="#react-web-programming"
id="toc-react-web-programming">React Web Programming</a>
<ul>
<li><a href="#code-listing-spellcaster"
id="toc-code-listing-spellcaster">Code Listing: SpellCaster</a></li>
</ul></li>
<li><a href="#appendices" id="toc-appendices">Appendices</a>
<ul>
<li><a href="#code-templates-solutions-and-examples"
id="toc-code-templates-solutions-and-examples">Code templates,
solutions, and examples</a></li>
</ul></li>
<li><a href="#preface" id="toc-preface">Preface</a>
<ul>
<li><a href="#preface-to-previous-edition"
id="toc-preface-to-previous-edition">Preface to previous
edition</a></li>
<li><a href="#how-and-why-i-came-to-use-python"
id="toc-how-and-why-i-came-to-use-python">How and why I came to use
Python</a></li>
<li><a href="#finding-a-textbook" id="toc-finding-a-textbook">Finding a
textbook</a></li>
<li><a href="#introducing-programming-with-python"
id="toc-introducing-programming-with-python">Introducing programming
with Python</a></li>
<li><a href="#building-a-community"
id="toc-building-a-community">Building a community</a></li>
<li><a href="#the-rhodes-local-edition-rle-version-of-august-2012"
id="toc-the-rhodes-local-edition-rle-version-of-august-2012">The Rhodes
Local Edition (RLE) (Version of August, 2012)</a></li>
<li><a href="#gnu-free-documentation-license"
id="toc-gnu-free-documentation-license">GNU Free Documentation
License</a></li>
</ul></li>
</ul>
</nav>
<p>The Adelphi University Mod of <em>Think Python</em> ports to
Javascript the <a
href="http://openbookproject.net/thinkcs/python/english3e/"><em>Learning
with Python 3 (RLE)</em> edition by Peter Wentworth</a>.</p>
<p><strong>Copyright Notice</strong></p>
<p>Copyright (C) 2018. Matthew X. Curinga.</p>
<p>Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with
Invariant Sections being Foreword, Preface, and Contributor List, no
Front-Cover Texts, and no Back-Cover Texts. A copy of the license is
included in the section entitled “GNU Free Documentation License”.</p>
<section id="forward" class="level1">
<h1>Forward</h1>
<section id="a-very-brief-forward-to-the-javascript-edition"
class="level2">
<h2>A very brief forward to the Javascript edition</h2>
<p>In the Ed Tech department at Adelphi, we have switched our
introductory programming courses from Python to Javascript. Javascript
has many of the features we like about Python, but also offers easy
congiguration and a path to developing web and mobile apps without
introducing additional programming languages. Most of the text is a
straight port of the Python text, with some details to the specific
Javascript features. The chapters are augmented with video tutorials and
large code samples that focus on unstructured problem solving.</p>
</section>
<section id="foreword-to-learning-with-python-3-rle" class="level2">
<h2>Foreword to Learning with Python 3 (RLE)</h2>
<p>By David Beazley</p>
<p>As an educator, researcher, and book author, I am delighted to see
the completion of this book. Python is a fun and extremely easy-to-use
programming language that has steadily gained in popularity over the
last few years. Developed over ten years ago by Guido van Rossum,
Python’s simple syntax and overall feel is largely derived from ABC, a
teaching language that was developed in the 1980’s. However, Python was
also created to solve real problems and it borrows a wide variety of
features from programming languages such as C++, Java, Modula-3, and
Scheme. Because of this, one of Python’s most remarkable features is its
broad appeal to professional software developers, scientists,
researchers, artists, and educators.</p>
<p>Despite Python’s appeal to many different communities, you may still
wonder why Python? or why teach programming with Python? Answering these
questions is no simple task—especially when popular opinion is on the
side of more masochistic alternatives such as C++ and Java. However, I
think the most direct answer is that programming in Python is simply a
lot of fun and more productive.</p>
<p>When I teach computer science courses, I want to cover important
concepts in addition to making the material interesting and engaging to
students. Unfortunately, there is a tendency for introductory
programming courses to focus far too much attention on mathematical
abstraction and for students to become frustrated with annoying problems
related to low-level details of syntax, compilation, and the enforcement
of seemingly arcane rules. Although such abstraction and formalism is
important to professional software engineers and students who plan to
continue their study of computer science, taking such an approach in an
introductory course mostly succeeds in making computer science boring.
When I teach a course, I don’t want to have a room of uninspired
students. I would much rather see them trying to solve interesting
problems by exploring different ideas, taking unconventional approaches,
breaking the rules, and learning from their mistakes. In doing so, I
don’t want to waste half of the semester trying to sort out obscure
syntax problems, unintelligible compiler error messages, or the several
hundred ways that a program might generate a general protection
fault.</p>
<p>One of the reasons why I like Python is that it provides a really
nice balance between the practical and the conceptual. Since Python is
interpreted, beginners can pick up the language and start doing neat
things almost immediately without getting lost in the problems of
compilation and linking. Furthermore, Python comes with a large library
of modules that can be used to do all sorts of tasks ranging from
web-programming to graphics. Having such a practical focus is a great
way to engage students and it allows them to complete significant
projects. However, Python can also serve as an excellent foundation for
introducing important computer science concepts. Since Python fully
supports procedures and classes, students can be gradually introduced to
topics such as procedural abstraction, data structures, and
object-oriented programming — all of which are applicable to later
courses on Java or C++. Python even borrows a number of features from
functional programming languages and can be used to introduce concepts
that would be covered in more detail in courses on Scheme and Lisp.</p>
<p>In reading Jeffrey’s preface, I am struck by his comments that Python
allowed him to see a higher level of success and a lower level of
frustration and that he was able to move faster with better results.
Although these comments refer to his introductory course, I sometimes
use Python for these exact same reasons in advanced graduate level
computer science courses at the University of Chicago. In these courses,
I am constantly faced with the daunting task of covering a lot of
difficult course material in a blistering nine week quarter. Although it
is certainly possible for me to inflict a lot of pain and suffering by
using a language like C++, I have often found this approach to be
counterproductive—especially when the course is about a topic unrelated
to just programming. I find that using Python allows me to better focus
on the actual topic at hand while allowing students to complete
substantial class projects.</p>
<p>Although Python is still a young and evolving language, I believe
that it has a bright future in education. This book is an important step
in that direction. David Beazley University of Chicago Author of the
<em>Python Essential Reference</em></p>
</section>
<section id="contributor-list" class="level2">
<h2>Contributor List</h2>
<p>To paraphrase the philosophy of the Free Software Foundation, this
book is free like free speech, but not necessarily free like free pizza.
It came about because of a collaboration that would not have been
possible without the GNU Free Documentation License. So we would like to
thank the Free Software Foundation for developing this license and, of
course, making it available to us.</p>
<p>We would also like to thank the more than 100 sharp-eyed and
thoughtful readers who have sent us suggestions and corrections over the
past few years. In the spirit of free software, we decided to express
our gratitude in the form of a contributor list. Unfortunately, this
list is not complete, but we are doing our best to keep it up to date.
It was also getting too large to include everyone who sends in a typo or
two. You have our gratitude, and you have the personal satisfaction of
making a book you found useful better for you and everyone else who uses
it. New additions to the list for the 2nd edition will be those who have
made on-going contributions.</p>
<p>If you have a chance to look through the list, you should realize
that each person here has spared you and all subsequent readers from the
confusion of a technical error or a less-than-transparent explanation,
just by sending us a note.</p>
<p>Impossible as it may seem after so many corrections, there may still
be errors in this book. If you should stumble across one, we hope you
will take a minute to contact us. The email address (for the Python 3
version of the book) is <a href="mailto:p.wentworth@ru.ac.za"
class="email">p.wentworth@ru.ac.za</a>. Substantial changes made due to
your suggestions will add you to the next version of the contributor
list (unless you ask to be omitted). Thank you!</p>
<section id="second-edition" class="level3">
<h3>Second Edition</h3>
<ul>
<li>An email from Mike MacHenry set me straight on tail recursion. He
not only pointed out an error in the presentation, but suggested how to
correct it.</li>
<li>It wasn’t until 5th Grade student Owen Davies came to me in a
Saturday morning Python enrichment class and said he wanted to write the
card game, Gin Rummy, in Python that I finally knew what I wanted to use
as the case study for the object oriented programming chapters.</li>
<li>A <em>special</em> thanks to pioneering students in Jeff’s Python
Programming class at <a
href="http://www.arlington.k12.va.us/1540108115320583/blank/browse.asp?A=383&amp;BMDRN=2000&amp;BCOB=0&amp;C=59085%3E">GCTAA</a>
during the 2009-2010 school year: Safath Ahmed, Howard Batiste, Louis
Elkner-Alfaro, and Rachel Hancock. Your continual and thoughtfull
feedback led to changes in most of the chapters of the book. You set the
standard for the active and engaged learners that will help make the new
Governor’s Academy what it is to become. Thanks to you this is truly a
<em>student tested</em> text.</li>
<li>Thanks in a similar vein to the students in Jeff’s Computer Science
class at the HB-Woodlawn program during the 2007-2008 school year: James
Crowley, Joshua Eddy, Eric Larson, Brian McGrail, and Iliana
Vazuka.</li>
<li>Ammar Nabulsi sent in numerous corrections from Chapters 1 and
2.</li>
<li>Aldric Giacomoni pointed out an error in our definition of the
Fibonacci sequence in Chapter 5.</li>
<li>Roger Sperberg sent in several spelling corrections and pointed out
a twisted piece of logic in Chapter 3.</li>
<li>Adele Goldberg sat down with Jeff at PyCon 2007 and gave him a list
of suggestions and corrections from throughout the book.</li>
<li>Ben Bruno sent in corrections for chapters 4, 5, 6, and 7.</li>
<li>Carl LaCombe pointed out that we incorrectly used the term
commutative in chapter 6 where symmetric was the correct term.</li>
<li>Alessandro Montanile sent in corrections for errors in the code
examples and text in chapters 3, 12, 15, 17, 18, 19, and 20.</li>
<li>Emanuele Rusconi found errors in chapters 4, 8, and 15.</li>
<li>Michael Vogt reported an indentation error in an example in chapter
6, and sent in a suggestion for improving the clarity of the shell
vs. script section in chapter 1.</li>
</ul>
</section>
<section id="first-edition" class="level3">
<h3>First Edition</h3>
<ul>
<li>Lloyd Hugh Allen sent in a correction to Section 8.4.</li>
<li>Yvon Boulianne sent in a correction of a semantic error in Chapter
5.</li>
<li>Fred Bremmer submitted a correction in Section 2.1.</li>
<li>Jonah Cohen wrote the Perl scripts to convert the LaTeX source for
this book into beautiful HTML.</li>
<li>Michael Conlon sent in a grammar correction in Chapter 2 and an
improvement in style in Chapter 1, and he initiated discussion on the
technical aspects of interpreters.</li>
<li>Benoit Girard sent in a correction to a humorous mistake in Section
5.6.</li>
<li>Courtney Gleason and Katherine Smith wrote <code>horsebet.py</code>,
which was used as a case study in an earlier version of the book. Their
program can now be found on the website.</li>
<li>Lee Harr submitted more corrections than we have room to list here,
and indeed he should be listed as one of the principal editors of the
text.</li>
<li>James Kaylin is a student using the text. He has submitted numerous
corrections.</li>
<li>David Kershaw fixed the broken <code>catTwice</code> function in
Section 3.10.</li>
<li>Eddie Lam has sent in numerous corrections to Chapters 1, 2, and 3.
He also fixed the Makefile so that it creates an index the first time it
is run and helped us set up a versioning scheme.</li>
<li>Man-Yong Lee sent in a correction to the example code in Section
2.4.</li>
<li>David Mayo pointed out that the word unconsciously in Chapter 1
needed to be changed to subconsciously .</li>
<li>Chris McAloon sent in several corrections to Sections 3.9 and
3.10.</li>
<li>Matthew J. Moelter has been a long-time contributor who sent in
numerous corrections and suggestions to the book.</li>
<li>Simon Dicon Montford reported a missing function definition and
several typos in Chapter 3. He also found errors in the
<code>increment</code> function in Chapter 13.</li>
<li>John Ouzts corrected the definition of return value in Chapter
3.</li>
<li>Kevin Parks sent in valuable comments and suggestions as to how to
improve the distribution of the book.</li>
<li>David Pool sent in a typo in the glossary of Chapter 1, as well as
kind words of encouragement.</li>
<li>Michael Schmitt sent in a correction to the chapter on files and
exceptions.</li>
<li>Robin Shaw pointed out an error in Section 13.1, where the printTime
function was used in an example without being defined.</li>
<li>Paul Sleigh found an error in Chapter 7 and a bug in Jonah Cohen’s
Perl script that generates HTML from LaTeX.</li>
<li>Craig T. Snydal is testing the text in a course at Drew University.
He has contributed several valuable suggestions and corrections.</li>
<li>Ian Thomas and his students are using the text in a programming
course. They are the first ones to test the chapters in the latter half
of the book, and they have make numerous corrections and
suggestions.</li>
<li>Keith Verheyden sent in a correction in Chapter 3.</li>
<li>Peter Winstanley let us know about a longstanding error in our Latin
in Chapter 3.</li>
<li>Chris Wrobel made corrections to the code in the chapter on file I/O
and exceptions.</li>
<li>Moshe Zadka has made invaluable contributions to this project. In
addition to writing the first draft of the chapter on Dictionaries, he
provided continual guidance in the early stages of the book.</li>
<li>Christoph Zwerschke sent several corrections and pedagogic
suggestions, and explained the difference between <em>gleich</em> and
<em>selbe</em>.</li>
<li>James Mayer sent us a whole slew of spelling and typographical
errors, including two in the contributor list.</li>
<li>Hayden McAfee caught a potentially confusing inconsistency between
two examples.</li>
<li>Angel Arnal is part of an international team of translators working
on the Spanish version of the text. He has also found several errors in
the English version.</li>
<li>Tauhidul Hoque and Lex Berezhny created the illustrations in Chapter
1 and improved many of the other illustrations.</li>
<li>Dr. Michele Alzetta caught an error in Chapter 8 and sent some
interesting pedagogic comments and suggestions about Fibonacci and Old
Maid.</li>
<li>Andy Mitchell caught a typo in Chapter 1 and a broken example in
Chapter 2.</li>
<li>Kalin Harvey suggested a clarification in Chapter 7 and caught some
typos.</li>
<li>Christopher P. Smith caught several typos and is helping us prepare
to update the book for Python 2.2.</li>
<li>David Hutchins caught a typo in the Foreword.</li>
<li>Gregor Lingl is teaching Python at a high school in Vienna, Austria.
He is working on a German translation of the book, and he caught a
couple of bad errors in Chapter 5.</li>
<li>Julie Peters caught a typo in the Preface.</li>
</ul>
</section>
</section>
</section>
<section id="the-way-of-the-program" class="level1">
<h1>The way of the program</h1>
<p>The goal of this book is to teach you to think like a computer
scientist. This way of thinking combines some of the best features of
mathematics, engineering, and natural science. Like mathematicians,
computer scientists use formal languages to denote ideas (specifically
computations). Like engineers, they design things, assembling components
into systems and evaluating tradeoffs among alternatives. Like
scientists, they observe the behavior of complex systems, form
hypotheses, and test predictions.</p>
<p>The single most important skill for a computer scientist is
<strong>problem solving</strong>. Problem solving means the ability to
formulate problems, think creatively about solutions, and express a
solution clearly and accurately. As it turns out, the process of
learning to program is an excellent opportunity to practice
problem-solving skills. That’s why this chapter is called, The way of
the program.</p>
<p>On one level, you will be learning to program, a useful skill by
itself. On another level, you will use programming as a means to an end.
As we go along, that end will become clearer.</p>
<section id="the-javascript-programming-language" class="level2">
<h2>The Javascript programming language</h2>
<p>The programming language you will be learning is Javascript.
Javascript is an example of a <strong>high-level language</strong>;
other high-level languages you might have heard of are Python, C++, PHP,
Pascal, C#, and Java. It’s important to point out that Java and
Javascript are two different programming languages with different
syntax, styles, purposes, and histories. They unfortunately, share a
very close name!</p>
<p>As you might infer from the name high-level language, there are also
<strong>low-level languages</strong>, sometimes referred to as machine
languages or assembly languages. Loosely speaking, computers can only
execute programs written in low-level languages. Thus, programs written
in a high-level language have to be translated into something more
suitable before they can run.</p>
<p>Almost all programs are written in high-level languages because of
their advantages. It is much easier to program in a high-level language
so programs take less time to write, they are shorter and easier to
read, and they are more likely to be correct. Second, high-level
languages are <strong>portable</strong>, meaning that they can run on
different kinds of computers with few or no modifications.</p>
<p>The engine that translates and runs Javascript is called the
<strong>Javascript Interpreter</strong>. All modern web browser
(Firefox, Chrome, Safari, MS Edge/IE, etc) ship with a Javascript
interpreter. You can also install a stand-alone interpreter on your
computer.</p>
<p>The longer code examples in this book will use <a
href="https://repl.it">Repl.it</a>, an online programming platform and
community. Code listings include links to the “repl” that you can copy
(“fork”) and experiment with.</p>
<p>There are two ways to use the interpreter: <em>interactive or
immediate mode</em> and <em>script mode</em>. In immediate mode, you
type Javascript expressions into the interpreter’s console, and the
interpreter immediately shows the result. This is the an example of the
repl.it interpreter’s console:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Babel</span> Compiler v6.4.4</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Copyright</span> <span class="er">(</span><span class="ex">c</span><span class="kw">)</span> <span class="ex">2014-2015</span> Sebastian McKenzie</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="ex">⠕</span> 2+2</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="ex">=</span><span class="op">&gt;</span> 4</span></code></pre></div>
<p>The <code>2+2</code> is entered at the <strong>Javascript
prompt</strong>. The <code>⠕</code> token indicates a statement entered
at the prompt. The interpreter uses the prompt to indicate that it is
ready for instructions. We typed <code>2 + 2</code> and hit
<code>enter</code> the interpreter evaluated our expression, and replied
<code>4</code>, and on the next line it gave a new prompt. In this case,
<code>4</code> is the <strong>output</strong> and it is indicated as
output in our console by the <code>=&gt;</code> token.</p>
<p>Alternatively, you can write a program in a file and use the
interpreter to execute the contents of the file. Such a file is called a
<strong>script</strong>. Scripts have the advantage that they can be
saved to disk, printed, shared, and so on.</p>
<p>For example, we created a file named <code>main.js</code> using our
text editor. By convention, files that contain Javascript programs have
names that end with <code>.js</code>, but they are just plain-text
files.</p>
<p>To execute the program in repl.it, we simply click the “run” button.
The output is shown in the console.</p>
<p>Working directly in the interpreter is convenient for testing short
bits of code because you get immediate feedback. Think of it as scratch
paper used to help you work out problems. Anything longer than a few
lines should be put into a script.</p>
</section>
<section id="what-is-a-program" class="level2">
<h2>What is a program?</h2>
<p>A <strong>program</strong> is a sequence of instructions that
specifies how to perform a computation. The computation might be
something mathematical, such as solving a system of equations or finding
the roots of a polynomial, but it can also be a symbolic computation,
such as searching and replacing text in a document or (strangely enough)
compiling a program.</p>
<p>The details look different in different languages, but a few basic
instructions appear in just about every language:</p>
<dl>
<dt>input</dt>
<dd>
<p>Get data from the keyboard, a file, or some other device.</p>
</dd>
<dt>output</dt>
<dd>
<p>Display data on the screen or send data to a file or other
device.</p>
</dd>
<dt>math</dt>
<dd>
<p>Perform basic mathematical operations like addition and
multiplication.</p>
</dd>
<dt>conditional execution</dt>
<dd>
<p>Check for certain conditions and execute the appropriate sequence of
statements.</p>
</dd>
<dt>repetition</dt>
<dd>
<p>Perform some action repeatedly, usually with some variation.</p>
</dd>
</dl>
<p>Believe it or not, that’s pretty much all there is to it. Every
program you’ve ever used, no matter how complicated, is made up of
instructions that look more or less like these. Thus, we can describe
programming as the process of breaking a large, complex task into
smaller and smaller subtasks until the subtasks are simple enough to be
performed with sequences of these basic instructions.</p>
<p>That may be a little vague, but we will come back to this topic later
when we talk about <strong>algorithms</strong>.</p>
</section>
<section id="what-is-debugging" class="level2">
<h2>What is debugging?</h2>
<p>Programming is a complex process, and because it is done by human
beings, it often leads to errors. Programming errors are called
<strong>bugs</strong> and the process of tracking them down and
correcting them is called <strong>debugging</strong>. Use of the term
<em>bug</em> to describe small engineering difficulties dates back to at
least 1889, when Thomas Edison had a bug with his phonograph.</p>
<p>Three kinds of errors can occur in a program: <a
href="http://en.wikipedia.org/wiki/Syntax_error">syntax errors</a>, <a
href="http://en.wikipedia.org/wiki/Runtime_error">runtime errors</a>,
and <a href="http://en.wikipedia.org/wiki/Logic_error">semantic
errors</a>. It is useful to distinguish between them in order to track
them down more quickly.</p>
</section>
<section id="syntax-errors" class="level2">
<h2>Syntax errors</h2>
<p>Javascript can only execute a program if the program is syntactically
correct; otherwise, the process fails and returns an error message.
<strong>Syntax</strong> refers to the structure of a program and the
rules about that structure. For example, in English, a sentence must
begin with a capital letter and end with a period. this sentence
contains a <strong>syntax error</strong>. So does this one</p>
<p>For most readers, a few syntax errors are not a significant problem,
which is why we can read the poetry of E. E. Cummings without (too many)
problems. Javascript is not so forgiving. If there is a single syntax
error anywhere in your program, Javascript will display an error message
and quit, and you will not be able to run your program. During the first
few weeks of your programming career, you will probably spend a lot of
time tracking down syntax errors. As you gain experience, though, you
will make fewer errors and find them faster.</p>
</section>
<section id="runtime-errors" class="level2">
<h2>Runtime errors</h2>
<p>The second type of error is a runtime error, so called because the
error does not appear until you run the program. These errors are also
called <strong>exceptions</strong> because they usually indicate that
something exceptional (and bad) has happened.</p>
<p>Runtime errors are rare in the simple programs you will see in the
first few chapters, so it might be a while before you encounter one.</p>
</section>
<section id="semantic-errors" class="level2">
<h2>Semantic errors</h2>
<p>The third type of error is the <strong>semantic error</strong>. If
there is a semantic error in your program, it will run successfully, in
the sense that the computer will not generate any error messages, but it
will not do the right thing. It will do something else. Specifically, it
will do what you told it to do.</p>
<p>The problem is that the program you wrote is not the program you
wanted to write. The meaning of the program (its semantics) is wrong.
Identifying semantic errors can be tricky because it requires you to
work backward by looking at the output of the program and trying to
figure out what it is doing.</p>
</section>
<section id="experimental-debugging" class="level2">
<h2>Experimental debugging</h2>
<p>One of the most important skills you will acquire is debugging.
Although it can be frustrating, debugging is one of the most
intellectually rich, challenging, and interesting parts of
programming.</p>
<p>In some ways, debugging is like detective work. You are confronted
with clues, and you have to infer the processes and events that led to
the results you see.</p>
<p>Debugging is also like an experimental science. Once you have an idea
what is going wrong, you modify your program and try again. If your
hypothesis was correct, then you can predict the result of the
modification, and you take a step closer to a working program. If your
hypothesis was wrong, you have to come up with a new one. As Sherlock
Holmes pointed out, When you have eliminated the impossible, whatever
remains, however improbable, must be the truth. (A. Conan Doyle, <em>The
Sign of Four</em>)</p>
<p>For some people, programming and debugging are the same thing. That
is, programming is the process of gradually debugging a program until it
does what you want. The idea is that you should start with a program
that does <em>something</em> and make small modifications, debugging
them as you go, so that you always have a working program.</p>
<p>For example, Linux is an operating system kernel that contains
millions of lines of code, but it started out as a simple program Linus
Torvalds used to explore the Intel 80386 chip. According to Larry
Greenfield, one of Linus’s earlier projects was a program that would
switch between displaying AAAA and BBBB. This later evolved to Linux
(<em>The Linux Users’ Guide</em> Beta Version 1).</p>
<p>Later chapters will make more suggestions about debugging and other
programming practices.</p>
</section>
<section id="formal-and-natural-languages" class="level2">
<h2>Formal and natural languages</h2>
<p><strong>Natural languages</strong> are the languages that people
speak, such as English, Spanish, and French. They were not designed by
people (although people try to impose some order on them); they evolved
naturally.</p>
<p><strong>Formal languages</strong> are languages that are designed by
people for specific applications. For example, the notation that
mathematicians use is a formal language that is particularly good at
denoting relationships among numbers and symbols. Chemists use a formal
language to represent the chemical structure of molecules. And most
importantly:</p>
<blockquote>
<p><em>Programming languages are formal languages that have been
designed to express computations.</em></p>
</blockquote>
<p>Formal languages tend to have strict rules about syntax. For example,
<code>3+3=6</code> is a syntactically correct mathematical statement,
but <code>3=+6$</code> is not. H<sub>2</sub>O is a syntactically correct
chemical name, but <sub>2</sub>Zz is not.</p>
<p>Syntax rules come in two flavors, pertaining to
<strong>tokens</strong> and structure. Tokens are the basic elements of
the language, such as words, numbers, parentheses, commas, and so on. In
Javascript, a statement like
<code>console.log("Happy New Year for ", 2013)</code> has 6 tokens: a
function name, an open parenthesis (round bracket), a string, a comma, a
number, and a close parenthesis.</p>
<p>It is possible to make errors in the way one constructs tokens.<br />
One of the problems with <code>3=+6$</code> is that <code>$</code> is
not a legal token in mathematics (at least as far as we know).
Similarly, <sub>2</sub>Zz is not a legal token in chemistry notation
because there is no element with the abbreviation <code>Zz</code>.</p>
<p>The second type of syntax rule pertains to the
<strong>structure</strong> of a statement—that is, the way the tokens
are arranged. The statement <code>3=+6$</code> is structurally illegal
because you can’t place a plus sign immediately after an equal sign.
Similarly, molecular formulas have to have subscripts <em>after</em> the
element name, not before. And in our Javascript example, if we omitted
the comma, or if we changed the two parentheses around to say
<code>console.log)"Happy New Year for ",2013(</code> our statement would
still have six legal and valid tokens, but the structure is illegal.</p>
<p>When you read a sentence in English or a statement in a formal
language, you have to figure out what the structure of the sentence is
(although in a natural language you do this subconsciously). This
process is called <strong>parsing</strong>.</p>
<p>For example, when you hear the sentence, “The other shoe fell”, you
understand that the other shoe is the subject and fell is the verb. Once
you have parsed a sentence, you can figure out what it means, or the
<strong>semantics</strong> of the sentence. Assuming that you know what
a shoe is and what it means to fall, you will understand the general
implication of this sentence.</p>
<p>Although formal and natural languages have many features in
common—tokens, structure, syntax, and semantics—there are many
differences:</p>
</section>
<section id="glossary" class="level2">
<h2>Glossary</h2>
<dl>
<dt>ambiguity</dt>
<dd>
<p>Natural languages are full of ambiguity, which people deal with by
using contextual clues and other information. Formal languages are
designed to be nearly or completely unambiguous, which means that any
statement has exactly one meaning, regardless of context.</p>
</dd>
<dt>redundancy</dt>
<dd>
<p>In order to make up for ambiguity and reduce misunderstandings,
natural languages employ lots of redundancy. As a result, they are often
verbose. Formal languages are less redundant and more concise.</p>
</dd>
<dt>literalness</dt>
<dd>
<p>Formal languages mean exactly what they say. On the other hand,
natural languages are full of idiom and metaphor. If someone says, “The
other shoe fell”, there is probably no shoe and nothing falling.<br />
You’ll need to find the original joke to understand the idiomatic
meaning of the other shoe falling. <em>Yahoo! Answers</em> thinks it
knows!</p>
</dd>
</dl>
<p>People who grow up speaking a natural language—everyone—often have a
hard time adjusting to formal languages. In some ways, the difference
between formal and natural language is like the difference between
poetry and prose, but more so:</p>
<dl>
<dt>poetry</dt>
<dd>
<p>Words are used for their sounds as well as for their meaning, and the
whole poem together creates an effect or emotional response. Ambiguity
is not only common but often deliberate.</p>
</dd>
<dt>prose</dt>
<dd>
<p>The literal meaning of words is more important, and the structure
contributes more meaning. Prose is more amenable to analysis than poetry
but still often ambiguous.</p>
</dd>
<dt>program</dt>
<dd>
<p>The meaning of a computer program is unambiguous and literal, and can
be understood entirely by analysis of the tokens and structure.</p>
</dd>
</dl>
<p>Here are some suggestions for reading programs (and other formal
languages). First, remember that formal languages are much more dense
than natural languages, so it takes longer to read them. Also, the
structure is very important, so it is usually not a good idea to read
from top to bottom, left to right. Instead, learn to parse the program
in your head, identifying the tokens and interpreting the structure.
Finally, the details matter. Little things like spelling errors and bad
punctuation, which you can get away with in natural languages, can make
a big difference in a formal language.</p>
</section>
<section id="the-first-program" class="level2">
<h2>The first program</h2>
<p>Traditionally, the first program written in a new language is called
<em>Hello, World!</em> because all it does is display the words, Hello,
World! In Javascript, the script looks like this: (For scripts, we’ll
show line numbers to the left of the Javascript statements.)</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Hello, World!&quot;</span>)<span class="op">;</span></span></code></pre></div>
<p>This is an example of using <code>console.log</code>, Javascript’s
<strong>print function</strong>, which doesn’t actually print anything
on paper. It displays a value on the screen’s console. In this case, the
result shown is</p>
<p>Here is an example from Mr. Hinkle’s class:
~~~~~~~~~~~~~~~~~~~~~~~~~~~<del>{.javascript .numberLines} import
{TextInterface} from ‘./textInterface’; let ti = new TextInterface();
ti.output(“Hello, World!”);</del>~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p>
<p>This example is slightly more complicated, but for now let’s just
focus on the last line, which enables us to say “Hello, World” onto a
webpage instead of just into the JavaScript console. We do so by using
other code written for this class.</p>
<p>Here is a model repl.it with the TextInterface code ready to roll:
[FIXME]</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Hello,</span> World!</span></code></pre></div>
<p>The quotation marks in the program mark the beginning and end of the
value; they don’t appear in the result.</p>
<p>Some people judge the quality of a programming language by the
simplicity of the Hello, World! program. By this standard, Javascript
does about as well as possible.</p>
</section>
<section id="comments" class="level2">
<h2>Comments</h2>
<p>As programs get bigger and more complicated, they get more difficult
to read. Formal languages are dense, and it is often difficult to look
at a piece of code and figure out what it is doing, or why.</p>
<p>For this reason, it is a good idea to add notes to your programs to
explain in natural language what the program is doing.</p>
<p>A <strong>comment</strong> in a computer program is text that is
intended only for the human reader — it is completely ignored by the
interpreter.</p>
<p>In Javascript, the <code>\\</code> token starts a comment. The rest
of the line is ignored. Here is a new version of <em>Hello,
World!</em>.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1"></a><span class="co">//---------------------------------------------------</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="co">// This demo program shows off how elegant Javascript is!</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co">// Based on the Python program by Joe Soap, December 2010.</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co">// Anyone may freely copy or modify this program.</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co">//---------------------------------------------------</span></span>
<span id="cb4-6"><a href="#cb4-6"></a></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Hello, World!&quot;</span>)<span class="op">;</span>     <span class="co">// Isn&#39;t this easy!</span></span></code></pre></div>
<p>You’ll also notice that we’ve left a blank line in the program. Blank
lines are also ignored by the interpreter, but comments and blank lines
can make your programs much easier for humans to parse. Use them
liberally!</p>
<p>Javascript also supports multiline comments with the
<code>/* */</code> style.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1"></a><span class="co">/*</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co">---------------------------------------------------</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">  This demo program shows off how elegant Javascript is!</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">  Based on the Python program by Joe Soap, December 2010.</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">  Anyone may freely copy or modify this program.</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">---------------------------------------------------</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">*/</span></span>
<span id="cb5-8"><a href="#cb5-8"></a></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Hello, World!&quot;</span>)<span class="op">;</span>     <span class="co">// Isn&#39;t this easy!</span></span></code></pre></div>
<p>In addition to adding hints and suggestions for human readers,
comments play an important role in debugging. Because the Javascript
interpreter doesn’t try to run commented lines, you can “comment out”
sections of your code to isolate errors.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Hello, World!&quot;</span>)<span class="op">;</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">// console.log(&quot;I am trying to find&quot;);</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">// console.log(&quot;out which line&quot;);</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">// console.log(&quot;of my code isn&#39;t&quot;);</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">// console.log(&quot;working the way I expect it to.);</span></span></code></pre></div>
<p>In the above code, only line 1 is interpreted and run as Javascript.
The other lines are ignored. To debug this program, we can uncomment one
line at a time until we find out which line has the buggy code.</p>
<p>It is so common for programmers to comment out large blocks of code
when they are testing their programs, that programmer’s text editors
support quickly commenting out sections of code. In repl.it, our online
editor for this book, you can simply highlight the lines you want to
comment or uncomment and use the <kbd>Ctrl</kbd> + <kbd>/</kbd> keyboard
shortcut. You will see us using this technique in our example
videos.</p>
</section>
<section id="turtle-graphics" class="level2">
<h2>Turtle Graphics</h2>
<p>In the late 1960s, Seymor Papert’s group at MIT introduced <a
href="https://en.wikipedia.org/wiki/Turtle_graphics">LOGO Turtle</a> as
a way to teach computer programming to kids. After learning the basic
turtle commands (also called an API), you can make surprising computer
graphics programs with only a little bit of code.</p>
<p>We’re using a version of Turtle that has been written for Javascript.
<a href="https://casual-effects.com/codeheart/turtle/index.html">Thanks
to Morgan McGuire at Casual Effects for the code.</a>.</p>
<p>As we’ve seen, a program and algorithms consist of a number of
commands or statements that execute in an order described by the
program. There are many libraries or APIs (application programming
interface) that help you useful do things in Javascript. Some APIsread
files over a network, others choose random numbers, while others might
encrypt data to make it more secure. The <code>turtle</code> API has a
number of commands that you can use to move a turtle around a screen and
to draw shapes and patterns.</p>
<p>Here’s a short turtle graphics program.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1"></a><span class="co">// set up the &quot;pen&quot; color and width</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="fu">setWidth</span>(<span class="dv">30</span>)<span class="op">;</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="fu">setColor</span>(<span class="st">&quot;red&quot;</span>)<span class="op">;</span></span>
<span id="cb7-4"><a href="#cb7-4"></a></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co">// move forward 100px to draw a red line</span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="fu">fd</span>(<span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb7-7"><a href="#cb7-7"></a></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="fu">wait</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb7-9"><a href="#cb7-9"></a></span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="co">// raise the pen &quot;pen up -- pu()&quot;, then return the turtle</span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="co">// to Y coordinate 0 and move it to X coordinate 100</span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="fu">pu</span>()<span class="op">;</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="fu">setY</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="fu">setX</span>(<span class="dv">100</span>)</span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="fu">pd</span>()<span class="op">;</span></span>
<span id="cb7-16"><a href="#cb7-16"></a></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="fu">wait</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb7-18"><a href="#cb7-18"></a></span>
<span id="cb7-19"><a href="#cb7-19"></a><span class="co">// draw a blue line</span></span>
<span id="cb7-20"><a href="#cb7-20"></a><span class="fu">setColor</span>(<span class="st">&quot;blue&quot;</span>)<span class="op">;</span></span>
<span id="cb7-21"><a href="#cb7-21"></a><span class="fu">fd</span>(<span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb7-22"><a href="#cb7-22"></a></span>
<span id="cb7-23"><a href="#cb7-23"></a><span class="fu">wait</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb7-24"><a href="#cb7-24"></a></span>
<span id="cb7-25"><a href="#cb7-25"></a><span class="co">// move turtle to the top left quadrant</span></span>
<span id="cb7-26"><a href="#cb7-26"></a><span class="fu">pu</span>()<span class="op">;</span></span>
<span id="cb7-27"><a href="#cb7-27"></a><span class="fu">setY</span>(<span class="dv">300</span>)<span class="op">;</span></span>
<span id="cb7-28"><a href="#cb7-28"></a><span class="fu">setX</span>(<span class="op">-</span><span class="dv">300</span>)</span>
<span id="cb7-29"><a href="#cb7-29"></a><span class="fu">pd</span>()<span class="op">;</span></span>
<span id="cb7-30"><a href="#cb7-30"></a></span>
<span id="cb7-31"><a href="#cb7-31"></a><span class="co">// draw a &quot;DeepPink&quot; circle</span></span>
<span id="cb7-32"><a href="#cb7-32"></a><span class="fu">setColor</span>(<span class="st">&quot;DeepPink&quot;</span>)<span class="op">;</span></span>
<span id="cb7-33"><a href="#cb7-33"></a><span class="fu">startFill</span>(<span class="st">&quot;DeepPink&quot;</span>)<span class="op">;</span></span>
<span id="cb7-34"><a href="#cb7-34"></a><span class="fu">arc</span>(<span class="dv">360</span><span class="op">,</span> <span class="dv">80</span>)<span class="op">;</span></span>
<span id="cb7-35"><a href="#cb7-35"></a><span class="fu">endFill</span>()<span class="op">;</span></span>
<span id="cb7-36"><a href="#cb7-36"></a></span>
<span id="cb7-37"><a href="#cb7-37"></a><span class="co">// hide the turtle</span></span>
<span id="cb7-38"><a href="#cb7-38"></a><span class="fu">ht</span>()<span class="op">;</span></span></code></pre></div>
When we run this program, we draw this image:
<figure class="border">
<img src="figs/turtle-first.png" class="figure-img img-fluid" alt="2 colored lines and a circle drawn with turtle graphics">
<figcaption class="figure-caption border-top">
The picture drawn by this program.<br> <strong><a
href="https://repl.it/@mcuringa/turtle">Run and remix this code on
repl.it</a></strong>
</figcaption>
</figure>
<p>Turtle programs use the metaphor of a turtle moving around drawing
with a pen. To move the turtle without drawing, you call the “pen up”
method, or <code>pu()</code>, as we do on lines 12 and 26. The turtle is
plotted on an x,y plane (also called a <a
href="https://en.wikipedia.org/wiki/Cartesian_coordinate_system">Cartesian
Plane</a>). The <code>x</code> coordinate specifies the horizontal
position of the turtle and the <code>y</code> coordinate specifies the
vertical position of the turtle. In this plane, (0, 0) is in the middle
of the window. Negative <code>x</code> coordinates are to the left of
the center, and negative <code>y</code> coordinates are below the
center. We call the <code>setX()</code> and <code>setY()</code> methods
to move the turtle’s position. If the pen is down, it draws while we
move. If it’s up, turtle moves without a trace. Notice how we draw a
“DeepPink” circle, starting on line 32? Because our Javascript program
executes in a web browser, we can use any of the “named colors” that are
part of the web development standard. <a
href="https://www.w3schools.com/colors/colors_names.asp">You can find
all of the name colors here.</a></p>
</section>
<section id="turtle-documentation" class="level2">
<h2>Turtle documentation</h2>
<p>To fully use the turtle API, you will need to read and understand the
documentation. Part of becoming a programmer and thinking like a
computer scientist includes the ability to read (and write!) technical
documentation. No programmer remembers every possible language feature
or available commands. Before you begin the exercises and lab for this
chapter, review the full</p>
<dl>
<dt><code>fd(distance)</code></dt>
<dd>
<p>Move forward the given distance.</p>
</dd>
<dt><code>bk(distance)</code></dt>
<dd>
<p>Move backward the given distance.</p>
</dd>
<dt><code>rt(angle)</code></dt>
<dd>
<p>Turn right (clockwise) in place.</p>
</dd>
<dt><code>rt(angle, radius)</code></dt>
<dd>
<p>Turn right (clockwise) in an arc of the given radius.</p>
</dd>
<dt><code>lt(angle)</code></dt>
<dd>
<p>Turn left (counterclockwise) in place.</p>
</dd>
<dt><code>lt(angle, radius)</code></dt>
<dd>
<p>Turn left (counterclockwise) in an arc of the given radius.</p>
</dd>
<dt><code>arc(angle, radius)</code></dt>
<dd>
<p>Draw an arc around the turtle, without moving the turtle. The angle
is relative to the current heading.</p>
</dd>
<dt><code>pu()</code></dt>
<dd>
<p>Pick the pen up to temporarily move without drawing.</p>
</dd>
<dt><code>pd()</code></dt>
<dd>
<p>Put the pen down to resume drawing.</p>
</dd>
<dt><code>ht()</code></dt>
<dd>
<p>Hide the turtle.</p>
</dd>
<dt><code>setColor(color)</code></dt>
<dd>
<p>Set the pen color by name such as RED or CSS color string such as
“#FF0041”.</p>
</dd>
<dt><code>setColor(r, g, b)</code></dt>
<dd>
<p>Set the pen color based on three RGB values each between zero and
one.</p>
</dd>
<dt><code>setColor(r, g, b, a)</code></dt>
<dd>
<p>Set the pen color based on three RGB values and an opacity value,
each between zero and one.</p>
</dd>
<dt><code>startFill(color)</code></dt>
<dd>
<p>Start drawing a filled region of the given color. Must end with
<code>endFill()</code></p>
</dd>
<dt><code>startFill(r, g, b)</code></dt>
<dd>
<p>Start drawing a filled region with color given by three RGB values,
each between zero and one.</p>
</dd>
<dt><code>setColor(r, g, b, a)</code></dt>
<dd>
<p>Start drawing a region filled by three RGB values and an opacity
value, each between zero and one.</p>
</dd>
<dt><code>endFill()</code></dt>
<dd>
<p>End drawing a filled region and actually fill it. If the pen is down,
then the outline will also be stroked.</p>
</dd>
<dt><code>setPosition(x, y)</code></dt>
<dd>
<p>Sets the absolute position. If the pen is down, draws a line to that
position.</p>
</dd>
<dt><code>setX(x)</code></dt>
<dd>
<p>Sets the absolute x-axis position. If the pen is down, draws a line
to that position.</p>
</dd>
<dt><code>getX()</code></dt>
<dd>
<p>Returns the absolute x-axis position.</p>
</dd>
<dt><code>setY(x)</code></dt>
<dd>
<p>Sets the absolute y-axis position. If the pen is down, draws a line
to that position.</p>
</dd>
<dt><code>getY()</code></dt>
<dd>
<p>Returns the absolute y-axis position.</p>
</dd>
<dt><code>setWidth(width)</code></dt>
<dd>
<p>Sets the pen width.</p>
</dd>
<dt><code>setHeading(degrees)</code></dt>
<dd>
<p>Sets the current heading in degrees measured clockwise from the
upwards vertical axis. North = 0, East = 90, South = 180, West =
270.</p>
</dd>
<dt><code>getHeading()</code></dt>
<dd>
<p>Returns the current heading in degrees measured clockwise from the
upwards vertical axis. North = 0, East = 90, South = 180, West =
270.</p>
</dd>
<dt><code>setScale(s)</code></dt>
<dd>
<p>Scales all distances (but not x and y coordinates or pen width) by
this factor. Useful for reusing drawing commands for different size
objects. 1.0 is the default scale.</p>
</dd>
<dt><code>getScale()</code></dt>
<dd>
<p>Returns the current drawing scale.</p>
</dd>
<dt><code>setSpeed(speed)</code></dt>
<dd>
<p>Sets the number of commands executed before showing the next frame of
animation. Defaults to 1. Can be set to Infinity to draw the entire
image at once. Does not affect wait times.</p>
</dd>
<dt><code>clear(color)</code></dt>
<dd>
<p>Clears the screen to the specified color</p>
</dd>
<dt><code>clear(r, g, b)</code></dt>
<dd>
<p>Clears the screen to the specified color</p>
</dd>
<dt><code>wait(seconds)</code></dt>
<dd>
<p>Pauses drawing for approximately this many seconds. Useful for
creating animations. Not affected by setSpeed.</p>
</dd>
</dl>
</section>
<section id="turtle-exercises-1" class="level2">
<h2>Turtle Exercises 1</h2>
<p><a href="https://repl.it/@mcuringa/turtle-exercises">Turtle Exercises
1 Repl</a></p>
<ol type="1">
<li>Use <code>turtle</code> to draw a red square with a pink border</li>
<li>Draw three circles, side-by-side. The first one should be blue, the
second green, the third red.</li>
<li>Draw a triangle.</li>
<li>(bonus) Draw a 5-pointed star. <em>Hint:</em> draw this on a piece
of paper first</li>
</ol>
</section>
<section id="first-turtle-lab" class="level2">
<h2>First Turtle Lab</h2>
<p><a href="https://repl.it/@mcuringa/csc-602-lab1">First Turtle Lab
Repl</a></p>
<p>Our first lab presents an open-ended exercise, just to get you
started. Use turtle graphics to draw a picture. We suggest you spend
about one hour working on this lab. Make sure that you includes some
commands from the documentation that are not in the example program.
Other than that, the content of your drawing is up to you.</p>
</section>
<section id="glossary-1" class="level2">
<h2>Glossary</h2>
<dl>
<dt>algorithm</dt>
<dd>
<p>A set of specific steps for solving a category of problems.</p>
</dd>
<dt>bug</dt>
<dd>
<p>An error in a program.</p>
</dd>
<dt>comment</dt>
<dd>
<p>Information in a program that is meant for other programmers (or
anyone reading the source code) and has no effect on the execution of
the program.</p>
</dd>
<dt>debugging</dt>
<dd>
<p>The process of finding and removing any of the three kinds of
programming errors.</p>
</dd>
<dt>exception</dt>
<dd>
<p>Another name for a runtime error.</p>
</dd>
<dt>formal language</dt>
<dd>
<p>Any one of the languages that people have designed for specific
purposes, such as representing mathematical ideas or computer programs;
all programming languages are formal languages.</p>
</dd>
<dt>high-level language</dt>
<dd>
<p>A programming language like Javascript that is designed to be easy
for humans to read and write.</p>
</dd>
<dt>immediate mode</dt>
<dd>
<p>A style of using Javascript where we type expressions at the command
prompt, and the results are shown immediately. Contrast with
<strong>script</strong>, and see the entry under <strong>Javascript
shell</strong>.</p>
</dd>
<dt>interpreter</dt>
<dd>
<p>The engine that executes your Javascript scripts or expressions.</p>
</dd>
<dt>low-level language</dt>
<dd>
<p>A programming language that is designed to be easy for a computer to
execute; also called machine language or assembly language.</p>
</dd>
<dt>natural language</dt>
<dd>
<p>Any one of the languages that people speak that evolved
naturally.</p>
</dd>
<dt>object code</dt>
<dd>
<p>The output of the compiler after it translates the program.</p>
</dd>
<dt>parse</dt>
<dd>
<p>To examine a program and analyze the syntactic structure.</p>
</dd>
<dt>portability</dt>
<dd>
<p>A property of a program that can run on more than one kind of
computer.</p>
</dd>
<dt>print function</dt>
<dd>
<p>A function used in a program or script that causes the Javascript
interpreter to display a value on its output device.</p>
</dd>
<dt>problem solving</dt>
<dd>
<p>The process of formulating a problem, finding a solution, and
expressing the solution.</p>
</dd>
<dt>program</dt>
<dd>
<p>a sequence of instructions that specifies to a computer actions and
computations to be performed.</p>
</dd>
<dt>Javascript console</dt>
<dd>
<p>An interactive user interface to the Javascript interpreter. The user
of a Javascript shell types commands at the prompt, and presses the
return key to send these commands immediately to the interpreter for
processing.</p>
</dd>
<dt>runtime error</dt>
<dd>
<p>An error that does not occur until the program has started to execute
but that prevents the program from continuing.</p>
</dd>
<dt>script</dt>
<dd>
<p>A program stored in a file (usually one that will be
interpreted).</p>
</dd>
<dt>semantic error</dt>
<dd>
<p>An error in a program that makes it do something other than what the
programmer intended.</p>
</dd>
<dt>semantics</dt>
<dd>
<p>The meaning of a program.</p>
</dd>
<dt>source code</dt>
<dd>
<p>A program in a high-level language before being compiled.</p>
</dd>
<dt>syntax</dt>
<dd>
<p>The structure of a program.</p>
</dd>
<dt>syntax error</dt>
<dd>
<p>An error in a program that makes it impossible to parse — and
therefore impossible to interpret.</p>
</dd>
<dt>token</dt>
<dd>
<p>One of the basic elements of the syntactic structure of a program,
analogous to a word in a natural language.</p>
</dd>
</dl>
</section>
</section>
<section id="variables-expressions-and-statements" class="level1">
<h1>Variables, expressions and statements</h1>
<section id="values-and-data-types" class="level2">
<h2>Values and data types</h2>
<p>A <strong>value</strong> is one of the fundamental things — like a
letter or a number — that a program manipulates. Programming
<code>turtle</code> we have been using values like <code>100</code> when
we write <code>fd(100)</code> and <code>"blue"</code> in statements like
<code>setColor("blue")</code>.</p>
<p>These values are classified into different <strong>classes</strong>,
or <strong>data types</strong>: <code>100</code> is an <em>number</em>,
and <code>"blue"</code> is a <em>string</em>, so-called because it
contains a string of letters. You (and the interpreter) can identify
strings because they are enclosed in quotation marks.</p>
<p>If you are not sure what class a value falls into, the Javascript
<strong>typeof</strong> operator can tell you.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">typeof</span> <span class="st">&quot;blue&quot;</span><span class="op">;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;string&#39;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">typeof</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;number&#39;</span></span></code></pre></div>
<p>Not surprisingly, strings are of type <code>string</code> and
integers are of type <code>number</code>. In Javascript, both whole
numbers and fractions (numbers with decimal points) are of type
<code>number</code>. At this stage, you can treat the words
<em>class</em> and <em>type</em> interchangeably. We’ll come back to a
deeper understanding of what a class is in later chapters.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">typeof</span> <span class="fl">3.2</span><span class="op">;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;number&#39;</span></span></code></pre></div>
<p>What about values like <code>"17"</code> and <code>"3.2"</code>? They
look like numbers, but they are in quotation marks like strings.</p>
<section id="strings" class="level3">
<h3>Strings</h3>
<div class="sourceCode" id="cb10"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">typeof</span> <span class="st">&quot;17&quot;</span><span class="op">;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;string&#39;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">typeof</span> <span class="st">&quot;3.2&quot;</span><span class="op">;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;string&#39;</span></span></code></pre></div>
<p>They’re strings!</p>
<p>Strings in Javascript can be enclosed in either single quotes
(<code>'</code>) or double quotes (<code>"</code>), or “backticks”
(<code></code> `).</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">typeof</span> <span class="st">&#39;This is a string.&#39;</span><span class="op">;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;string&#39;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">typeof</span> <span class="st">&quot;And so is this.&quot;</span><span class="op">;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;string&#39;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">typeof</span> <span class="vs">`and this is a special type of string...`</span><span class="op">;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;string&#39;</span></span></code></pre></div>
<p>Double quoted strings can contain single quotes inside them, as in
<code>"Bruce's beard"</code>, and single quoted strings can have double
quotes inside them, as in <code>'The knights who say "Ni!"'</code>.</p>
<p>Strings enclosed with the backtick symbol are called <strong>template
literals</strong>. Template literals can contain either single or double
quotes:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`&quot;Oh no&quot;, she exclaimed, &quot;Ben&#39;s bike is broken!&quot;`</span>)<span class="op">;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Oh no&quot;</span><span class="op">,</span> she exclaimed<span class="op">,</span> <span class="st">&quot;Ben&#39;s bike is broken!&quot;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>⠕</span></code></pre></div>
<p>Template literal strings can even span multiple lines:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1"></a>⠕ <span class="kw">let</span> message <span class="op">=</span> <span class="vs">`This message will</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="vs">... span several</span></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="vs">... lines`</span><span class="op">;</span></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(message)<span class="op">;</span></span>
<span id="cb13-5"><a href="#cb13-5"></a></span>
<span id="cb13-6"><a href="#cb13-6"></a>This message will</span>
<span id="cb13-7"><a href="#cb13-7"></a>span several</span>
<span id="cb13-8"><a href="#cb13-8"></a>lines<span class="op">.</span></span></code></pre></div>
<p>Strings can also be joined use the <code>+</code> token which adds
strings together (also called concatenation).</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> message <span class="op">=</span> <span class="st">&quot;This long message will&quot;</span> <span class="op">+</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="st">&quot;... will appear on one line&quot;</span> <span class="op">+</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="st">&quot;... when it&#39;s logged to the console.&quot;</span><span class="op">;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(message)<span class="op">;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>This long message will<span class="op">...</span> will appear on one line<span class="op">...</span> when it<span class="st">&#39;s logged to the console.</span></span></code></pre></div>
<p>Javascript doesn’t care whether you use single or double quotes to
surround your strings: once it has parsed the text of your program or
command, the way it stores the value is identical in all cases, and the
surrounding quotes are not part of the value. But when the interpreter
wants to display a string, it has to decide which quotes to use to make
it look like a string. It usually choose a single quote.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="st">&#39;This is a string.&#39;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;This is a string.&#39;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>⠕ <span class="st">&quot;And so is this.&quot;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;And so is this.&#39;</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="fu">⠕</span> <span class="vs">`This is a string too!`</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;This is a string too!&#39;</span></span></code></pre></div>
<p>The code examples in this book will use double quotes as the default,
and use single quotes and template literals when they make more sense
(such as in strings containing double quotes or spanning multiple
lines). We will learn more about template strings in the chapter on
strings.</p>
<p>When you type a large number, you might be tempted to use commas
between groups of three digits, as in <code>42,000</code>. This is not a
legal number in Javascript, and different Javascript interpreters handle
it differently. Formal languages are strict, the notation is concise,
and even the smallest change might mean something quite different from
what you intended.</p>
</section>
</section>
<section id="variables" class="level2">
<h2>Variables</h2>
<p>One of the most powerful features of a programming language is the
ability to manipulate <strong>variables</strong>. A variable is a name
that refers to a value.</p>
<p>The <strong>let</strong> keyword declares a new variable and the
<strong>assignment token</strong>, gives a value to a variable:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> message <span class="op">=</span> <span class="st">&quot;What&#39;s up, Doc?&quot;</span><span class="op">;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> n <span class="op">=</span> <span class="dv">17</span><span class="op">;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> pi <span class="op">=</span> <span class="fl">3.14159</span><span class="op">;</span></span></code></pre></div>
<p>This example declares three variables and assigns them values. The
first assigns the string value <code>"What's up, Doc?"</code> to a
variable named <code>message</code>. The second gives the number
<code>17</code> to <code>n</code>, and the third assigns the number
<code>3.14159</code> to a variable called <code>pi</code>.</p>
<p>The <strong>assignment token</strong>, <code>=</code>, should not be
confused with <em>equals</em>, which uses the token <code>===</code>.
The assignment statement binds a <em>name</em>, on the left-hand side of
the operator, to a <em>value</em>, on the right-hand side. This is why
you will get an error if you enter:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> <span class="dv">17</span> <span class="op">=</span> n<span class="op">;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="bu">SyntaxError</span><span class="op">:</span> unexpected token<span class="op">:</span> numeric literal</span></code></pre></div>
<p><em><strong>Tip:</strong> When reading or writing code, say to
yourself “n is assigned 17” or “n gets the value 17”. Don’t say “n
equals 17”.</em></p>
<p>A common way to represent variables on paper is to write the name
with an arrow pointing to the variable’s value. This kind of figure is
called a <strong>state snapshot</strong> because it shows what state
each of the variables is in at a particular instant in time. (Think of
it as the variable’s state of mind). This diagram shows the result of
executing the assignment statements:</p>
<figure>
<img src="figs/state.png" alt="State snapshot" />
<figcaption aria-hidden="true">State snapshot</figcaption>
</figure>
<p>If you ask the interpreter to evaluate a variable, it will produce
the value that is currently linked to the variable:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>⠕ message</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;What&#39;</span>s up<span class="op">,</span> Doc<span class="op">?</span><span class="st">&#39;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>⠕ n</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">17</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>⠕ pi</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="fl">3.14159</span></span></code></pre></div>
<p>We use variables in a program to “remember” things, perhaps the
current score in the video game. But variables are <em>variable</em>.
This means they can change over time, just like the score in a video
game. You can assign a value to a variable, and later assign a different
value to the same variable.<br />
(<em>This is different from maths. In maths, if you give <code>x</code>
the value 3, it cannot change to link to a different value half-way
through your calculations!</em>)</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> day <span class="op">=</span> <span class="st">&quot;Thursday&quot;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>⠕ day</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;Thursday&#39;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>⠕ day <span class="op">=</span> <span class="st">&quot;Friday&quot;</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>⠕ day</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;Friday&#39;</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>⠕ day <span class="op">=</span> <span class="dv">21</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>⠕ day</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">21</span></span></code></pre></div>
<p>You’ll notice we changed the value of <code>day</code> three times,
and on the third assignment we even made it refer to a value that was of
a different type.</p>
<p>A great deal of programming is about having the computer remember
things, e.g. <em>The number of missed calls on your phone</em>, and then
arranging to update or change the variable when you miss another
call.</p>
</section>
<section id="variable-names-and-keywords" class="level2">
<h2>Variable names and keywords</h2>
<p><strong>Variable names</strong> and other
<strong>identifiers</strong> can be arbitrarily long. They can contain
both letters and digits, but they have to begin with a letter, the
dollar sign <code>$</code>, or an underscore <code>_</code>. Remember
that case matters. <code>Bruce</code> and <code>bruce</code> are
different variables.</p>
<p>In Javascript, capital letters are often used in variables that
contain multiple words, such as <code>myName</code> or
<code>thePriceOfTeaInChina</code>. The underscore character
(<code>_</code>) can appear in a name, too. You may see underscores used
to separate multiple words, such as <code>my_name</code> or
<code>price_of_tea_in_china</code>, but this style is less common in
Javascript.</p>
<p>Sometimes programmers start variables with underscores or dollar
signs to give them special meanings. In this book, all variable names
will start with letters.</p>
<p>If you give a variable an illegal name, you get a syntax error:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> <span class="dv">76</span><span class="er">trombones</span> <span class="op">=</span> <span class="st">&quot;big parade&quot;</span><span class="op">;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>unknown<span class="op">:</span> Identifier directly after number</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> <span class="kw">typeof</span> <span class="op">=</span> <span class="st">&quot;Computer Science 101&quot;</span><span class="op">;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>unknown<span class="op">:</span> Unexpected token</span></code></pre></div>
<p><code>76trombones</code> is illegal because it does not begin with a
letter, but what’s wrong with <code>typeof</code>?</p>
<p>It turns out that <code>typeof</code> is reserved as one of
Javascript’s <strong>keywords</strong>. Keywords define the language’s
syntax rules and structure, and they cannot be used as variable
names.</p>
<p><a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#Keywords">Javascript
has almost forty keywords</a> (different versions of Javascript have
slightly different keywords):</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span>       <span class="cf">finally</span>       <span class="kw">protected</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="cf">break</span>       <span class="cf">for</span>           <span class="cf">return</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span>        <span class="kw">function</span>      <span class="kw">super</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="cf">catch</span>       <span class="cf">if</span>            <span class="cf">switch</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span>       <span class="kw">implements</span>    <span class="kw">this</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span>       <span class="im">import</span>        <span class="cf">throw</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="cf">continue</span>    <span class="kw">in</span>            <span class="cf">try</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="cf">debugger</span>    <span class="kw">instanceof</span>    <span class="kw">typeof</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="im">default</span>     <span class="kw">interface</span>     <span class="kw">var</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="kw">delete</span>      <span class="kw">let</span>           <span class="kw">void</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>        <span class="kw">new</span>           <span class="cf">while</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="im">export</span>      <span class="im">package</span>       <span class="cf">with</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="kw">extends</span>     <span class="kw">private</span>       <span class="kw">yield</span></span></code></pre></div>
<p>You might want to keep this list handy. If the interpreter complains
about one of your variable names and you don’t know why, see if it is on
this list.</p>
<p>Programmers generally choose names for their variables that are
meaningful to the human readers of the program—they help the programmer
document, or remember, what the variable is used for.</p>
<aside id="meaningful-names">
<p>Beginners sometimes confuse “meaningful to the human readers” with
“meaningful to the computer”. So they’ll wrongly think that because
they’ve called some variable <code>average</code> or <code>pi</code>, it
will somehow magically calculate an average, or magically know that the
variable <code>pi</code> should have a value like 3.14159. No! The
computer doesn’t understand what you intend the variable to mean.</p>
So you’ll find some instructors who deliberately don’t choose meaningful
names when they teach beginners — not because we don’t think it is a
good habit, but because we’re trying to reinforce the message that you —
the programmer — must write the program code to calculate the average,
and you must write an assignment statement to give the variable
<code>pi</code> the value you want it to have.
</aside>
</section>
<section id="statements" class="level2">
<h2>Statements</h2>
<p>A <strong>statement</strong> is an instruction that the Javascript
interpreter can execute. We have mostly seen the assignment statement so
far. Some other kinds of statements that we’ll see shortly are
<code>while</code> statements, <code>for</code> statements, and
<code>if</code> statements. (There are other kinds too!)</p>
<p>When you type a statement in the console and hit enter, Javascript
executes it. Statements don’t produce any result.</p>
</section>
<section id="evaluating-expressions" class="level2">
<h2>Evaluating expressions</h2>
<p>An <strong>expression</strong> is a combination of values, variables,
operators, and calls to functions. If you type an expression at the
Javascript prompt, the interpreter <strong>evaluates</strong> it and
displays the result:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="dv">1</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">2</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">typeof</span> <span class="st">&quot;hello&quot;</span><span class="op">;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;string&#39;</span></span></code></pre></div>
<p>In this example <code>typeof</code> is a Javascript operator that
returns the type of a variable or literal data operand.</p>
<p>The <em>evaluation of an expression</em> produces a value, which is
why expressions can appear on the right hand side of assignment
statements. A value all by itself is a simple expression, and so is a
variable.</p>
<p>These examples show the expression and the value they return
indicated by <code>=&gt;</code>.</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="dv">17</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">17</span><span class="op">;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> y <span class="op">=</span> <span class="fl">3.14</span><span class="op">;</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> x <span class="op">=</span> <span class="kw">typeof</span> <span class="st">&quot;hello&quot;</span><span class="op">;</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>⠕ x</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;string&#39;</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>⠕ y</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="fl">3.14</span></span></code></pre></div>
</section>
<section id="operators-and-operands" class="level2">
<h2>Operators and operands</h2>
<p><strong>Operators</strong> are special tokens that represent
computations like addition, multiplication and division. The values the
operator uses are called <strong>operands</strong>.</p>
<p>The following are all legal Javascript expressions whose meaning is
more or less clear:</p>
<pre><code>20+32   hour-1   hour*60+minute   minute/60   5**2   (5+9) * (15-7)</code></pre>
<p>The tokens <code>+</code>, <code>-</code>, and <code>*</code>, and
the use of parenthesis for grouping, mean in Javascript what they mean
in mathematics. The asterisk (<code>*</code>) is the token for
multiplication, and <code>**</code> is the token for exponentiation.</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="dv">2</span> <span class="op">**</span> <span class="dv">3</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">8</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="dv">3</span> <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">9</span></span></code></pre></div>
<p>When a variable name appears in the place of an operand, it is
replaced with its value before the operation is performed.</p>
<p>Addition, subtraction, multiplication, and exponentiation all do what
you expect.</p>
<p>Example: so let us convert 645 minutes into hours:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> minutes <span class="op">=</span> <span class="dv">645</span><span class="op">;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> hours <span class="op">=</span> minutes <span class="op">/</span> <span class="dv">60</span><span class="op">;</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>⠕ hours<span class="op">;</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="fl">10.75</span></span></code></pre></div>
<p>Oops! In Javascript, the division operator <code>/</code> always
yields a floating point (decimal) result. What we might have wanted to
know was how many <em>whole</em> hours there are, and how many minutes
remain. Javascript provides helpful <strong>Math</strong> functions to
allow us to do this. <code>Math.floor()</code> rounds a number down to
the nearest whole number. Its result is always a whole number — and if
it has to adjust the number it always moves it to the left on the number
line. So <code>Math.floor(6 / 4)</code> yields <code>1</code>, but
<code>Math.floor(-6 / 4)</code> might surprise you!</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="dv">7</span> <span class="op">/</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="fl">1.75</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="dv">7</span> <span class="op">/</span> <span class="dv">4</span>)<span class="op">;</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">1</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> minutes <span class="op">=</span> <span class="dv">645</span><span class="op">;</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> hours <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">flor</span>(minutes <span class="op">/</span> <span class="dv">60</span>)<span class="op">;</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>⠕ hours<span class="op">;</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">10</span></span></code></pre></div>
</section>
<section id="type-conversion" class="level2">
<h2>Type conversion</h2>
<p>Here we’ll look at some ways to convert data. We call these
<strong>type converters</strong>.</p>
<p>The <code>Number.parseInt(arg)</code> function can take a floating
point number or a string, and turn it into an whole number. For floating
point numbers, it <em>discards</em> the decimal portion of the number —
a process we call <em>truncation towards zero</em> on the number line.
Let us see this in action:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Number</span><span class="op">.</span><span class="fu">parseInt</span>(<span class="fl">3.14</span>)<span class="op">;</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">3</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Number</span><span class="op">.</span><span class="fu">parseInt</span>(<span class="fl">3.9999</span>)<span class="op">;</span>     <span class="co">// This doesn&#39;t round to the closest int!</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">3</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Number</span><span class="op">.</span><span class="fu">parseInt</span>(<span class="fl">3.0</span>)<span class="op">;</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">3</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Number</span><span class="op">.</span><span class="fu">parseInt</span>(<span class="op">-</span><span class="fl">3.999</span>)<span class="op">;</span>     <span class="co">// Note that the result is closer to zero</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="op">-</span><span class="dv">3</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Number</span><span class="op">.</span><span class="fu">parseInt</span>(minutes <span class="op">/</span> <span class="dv">60</span>)<span class="op">;</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">10</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Number</span><span class="op">.</span><span class="fu">parseInt</span>(<span class="st">&quot;2345&quot;</span>)<span class="op">;</span>     <span class="co">// Parse a string to produce an int</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">2345</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Number</span><span class="op">.</span><span class="fu">parseInt</span>(<span class="dv">17</span>)<span class="op">;</span> <span class="co">// It even works if arg is already an int</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">17</span></span></code></pre></div>
<p>The type converter <code>Number.parseFloat(arg)</code> can a
syntactically legal string into a decimal:</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Number</span><span class="op">.</span><span class="fu">parseFloat</span>(<span class="st">&quot;123.45&quot;</span>)<span class="op">;</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="fl">123.45</span></span></code></pre></div>
<p>The type converter <code>String(arg)</code> turns its argument into a
string:</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">String</span>(<span class="dv">17</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;17&#39;</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">String</span>(<span class="fl">123.45</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;123.45&#39;</span></span></code></pre></div>
</section>
<section id="order-of-operations" class="level2">
<h2>Order of operations</h2>
<p>When more than one operator appears in an expression, the order of
evaluation depends on the <strong>rules of precedence</strong>.
Javascript follows the same precedence rules for its mathematical
operators that mathematics does. The acronym PEMDAS is a useful way to
remember the order of operations:</p>
<ol>
<li><p><strong>P</strong> arentheses have the highest precedence and can
be used to force an expression to evaluate in the order you want. Since
expressions in parentheses are evaluated first, <code>2 * (3-1)</code>
is 4, and <code>(1+1)**(5-2)</code> is</p>
<ol start="8" type="1">
<li>You can also use parentheses to make an expression easier to read,
as in <code>(minute * 100) / 60</code>, even though it doesn’t change
the result.</li>
</ol></li>
<li><p><strong>E</strong> xponentiation has the next highest precedence,
so <code>2**1+1</code> is 3 and not 4, and <code>3*1**3</code> is 3 and
not 27.</p></li>
<li><p><strong>M</strong> ultiplication and both
<strong>D</strong> ivision operators have the same precedence, which is
higher than <strong>A</strong> ddition and
<strong>S</strong> ubtraction, which also have the same precedence. So
<code>2*3-1</code> yields 5 rather than 4, and <code>5-2*2</code> is 1,
not 6.</p></li>
<li><p>Operators with the <em>same</em> precedence are evaluated from
left-to-right. In algebra we say they are <em>left-associative</em>. So
in the expression <code>6-3+2</code>, the subtraction happens first,
yielding 3. We then add 2 to get the result 5. If the operations had
been evaluated from right to left, the result would have been
<code>6-(3+2)</code>, which is 1. (The acronym PEDMAS could mislead you
to thinking that division has higher precedence than multiplication, and
addition is done ahead of subtraction - don’t be misled.<br />
Subtraction and addition are at the same precedence, and the
left-to-right rule applies.)</p>
<ul>
<li>An exception to the left-to-right left-associative rule is the
exponentiation operator <code>**</code>, so a useful hint is to always
use parentheses to force exactly the order you want when exponentiation
is involved:</li>
</ul></li>
</ol>
<div class="sourceCode" id="cb31"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="dv">2</span> <span class="op">**</span> <span class="dv">3</span> <span class="op">**</span> <span class="dv">2</span>     <span class="co">// The right-most ** operator gets done first!</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">512</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">⠕</span> (<span class="dv">2</span> <span class="op">**</span> <span class="dv">3</span>) <span class="op">**</span> <span class="dv">2</span>   <span class="co">// Use parentheses to force the order you want!</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">64</span></span></code></pre></div>
<p>The Javascript console in repl.it is great for exploring and
experimenting with expressions like this. You can fork this repl to try
it: <a href="https://repl.it/@mcuringa/ES6-shell"
class="uri">https://repl.it/@mcuringa/ES6-shell</a></p>
</section>
<section id="operations-on-strings" class="level2">
<h2>Operations on strings</h2>
<p>If a string looks like a number, Javascript while try to
automatically convert it to an number in order to execute a mathematical
operation.</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> message <span class="op">=</span> <span class="st">&quot;4&quot;</span><span class="op">;</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>⠕ message <span class="op">*</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">8</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>⠕ message <span class="op">**</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">16</span><span class="op">;</span></span></code></pre></div>
<p>If the automatic type conversion fails in a mathematical operation,
Javascript returns the special <em>Not a Number</em> value,
<code>NaN</code>.</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> message <span class="op">=</span> <span class="st">&quot;Hello, world.&quot;</span><span class="op">;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>⠕ message <span class="op">*</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">NaN</span></span></code></pre></div>
<p>Interestingly, the <code>+</code> operator work with strings, but for
strings, the <code>+</code> operator represents
<strong>concatenation</strong>, not addition.<br />
As we’ve seen, concatenation means joining the two operands by linking
them end-to-end. For example:</p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb34-1"><a href="#cb34-1"></a>⠕ <span class="kw">let</span> fruit <span class="op">=</span> <span class="st">&quot;banana&quot;</span><span class="op">;</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>⠕ <span class="kw">let</span> bakedGood <span class="op">=</span> <span class="st">&quot; nut bread&quot;</span><span class="op">;</span></span>
<span id="cb34-3"><a href="#cb34-3"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(fruit <span class="op">+</span> bakedGood)<span class="op">;</span></span></code></pre></div>
<p>The output of this program is <code>banana nut bread</code>. The
space before the word <code>nut</code> is part of the string, and is
necessary to produce the space between the concatenated strings.</p>
<p>Automatic conversion can be tricky and sometimes lead to unexpected
results. Consider:</p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> age <span class="op">=</span> <span class="st">&quot;24&quot;</span><span class="op">;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>⠕ age <span class="op">-</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">14</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>⠕ age <span class="op">+</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;2410&#39;</span></span></code></pre></div>
</section>
<section id="input" class="level2">
<h2>Input</h2>
<p>There is a built-in function in Javascript for getting input from the
user:</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb36-1"><a href="#cb36-1"></a>⠕ <span class="kw">let</span> n <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="at">prompt</span>(<span class="st">&quot;Please enter your name: &quot;</span>)<span class="op">;</span></span></code></pre></div>
<p>If you run this sample in a repl.it prompt, it will open a dialog
window with the message:</p>
<pre><code>Please enter your name:</code></pre>
<p>The user of the program can type the name and hit <code>enter</code>.
When this happens the text that has been entered is returned from the
<code>prompt</code> function, and in this case assigned to the variable
<code>n</code>.</p>
<p>Even if you asked the user to enter their age, you would get back a
string like <code>"17"</code>. It would be your job, as the programmer,
to convert that string into a integer or float before using it, if that
was required.</p>
</section>
<section id="composition" class="level2">
<h2>Composition</h2>
<p>So far, we have looked at the elements of a program — variables,
expressions, statements, and function calls — in isolation, without
talking about how to combine them.</p>
<p>One of the most useful features of programming languages is their
ability to take small building blocks and <strong>compose</strong> them
into larger chunks.</p>
<p>For example, we know how to get the user to enter some input, we know
how to convert the string we get into a number, we know how to write a
complex expression, and we know how to print values. Let’s put these
together in a small four-step program that asks the user to input a
value for the radius of a circle, and then computes the area of the
circle from the formula</p>
<p><img src="figs/circle_area.png" /></p>
<p>Firstly, we’ll do the four steps one at a time:</p>
<div class="sourceCode" id="cb38"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb38-1"><a href="#cb38-1"></a><span class="kw">let</span> response <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="at">prompt</span>(<span class="st">&quot;What is your radius? &quot;</span>)<span class="op">;</span></span>
<span id="cb38-2"><a href="#cb38-2"></a><span class="kw">let</span> r <span class="op">=</span> <span class="bu">Number</span><span class="op">.</span><span class="fu">parseFloat</span>(response)<span class="op">;</span></span>
<span id="cb38-3"><a href="#cb38-3"></a><span class="kw">let</span> area <span class="op">=</span> <span class="fl">3.14159</span> <span class="op">*</span> r<span class="op">**</span><span class="dv">2</span><span class="op">;</span></span>
<span id="cb38-4"><a href="#cb38-4"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;The area is &quot;</span><span class="op">,</span> area)<span class="op">;</span></span></code></pre></div>
<p>Now let’s compose the first two lines into a single line of code, and
compose the second two lines into another line of code.</p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb39-1"><a href="#cb39-1"></a><span class="kw">let</span> r <span class="op">=</span> <span class="bu">Number</span><span class="op">.</span><span class="fu">parseFloat</span>(<span class="bu">window</span><span class="op">.</span><span class="at">prompt</span>(<span class="st">&quot;What is your radius? &quot;</span>))<span class="op">;</span></span>
<span id="cb39-2"><a href="#cb39-2"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;The area is &quot;</span><span class="op">,</span> <span class="fl">3.14159</span> <span class="op">*</span> r<span class="op">**</span><span class="dv">2</span>)<span class="op">;</span></span></code></pre></div>
<p>If we really wanted to be tricky, we could write it all in one
statement:</p>
<div class="sourceCode" id="cb40"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb40-1"><a href="#cb40-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;The area is &quot;</span><span class="op">,</span> <span class="fl">3.14159</span> <span class="op">*</span> <span class="bu">Number</span><span class="op">.</span><span class="fu">parseFloat</span>(<span class="bu">window</span><span class="op">.</span><span class="at">prompt</span>(<span class="st">&quot;What is your radius? &quot;</span>))<span class="op">**</span><span class="dv">2</span>)<span class="op">;</span></span></code></pre></div>
<p>Such compact code may not be the most understandable for humans, but
it does illustrate how we can compose bigger chunks from our building
blocks.</p>
<p>If you’re ever in doubt about whether to compose code or fragment it
into smaller steps, try to make it as simple as you can for the human to
follow. My choice would be the first case above, with four separate
steps.</p>
</section>
<section id="the-modulus-operator" class="level2">
<h2>The modulus operator</h2>
<p>The <strong>modulus operator</strong> works on integers (and integer
expressions) and gives the <em>remainder</em> when the first number is
divided by the second. In Javascript, the modulus operator is a percent
sign (<code>%</code>). The syntax is the same as for other operators. It
has the same precedence as the multiplication operator.</p>
<div class="sourceCode" id="cb41"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> q <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="dv">7</span> <span class="op">/</span> <span class="dv">3</span>)<span class="op">;</span>     <span class="co">// This is integer division</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>⠕ q<span class="op">;</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">2</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> r  <span class="op">=</span> <span class="dv">7</span> <span class="op">%</span> <span class="dv">3</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>⠕ r<span class="op">;</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">1</span></span></code></pre></div>
<p>So 7 divided by 3 is 2 with a remainder of 1.</p>
<p>The modulus operator turns out to be surprisingly useful. For
example, you can check whether one number is divisible by another—if
<code>x % y</code> is zero, then <code>x</code> is evenly divisible by
<code>y</code>.</p>
<p>Also, you can extract the right-most digit or digits from a number.
For example, <code>x % 10</code> yields the right-most digit of
<code>x</code> (in base 10). Similarly <code>x % 100</code> yields the
last two digits.</p>
<p>It is also extremely useful for doing conversions, say from seconds,
to hours, minutes and seconds. So let’s write a program to ask the user
to enter some seconds, and we’ll convert them into hours, minutes, and
remaining seconds.</p>
<div class="sourceCode" id="cb42"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb42-1"><a href="#cb42-1"></a>⠕ <span class="kw">let</span> totalSecs <span class="op">=</span> <span class="bu">Number</span><span class="op">.</span><span class="fu">parseInt</span>(<span class="bu">window</span><span class="op">.</span><span class="at">prompt</span>(<span class="st">&quot;How many seconds, in total?&quot;</span>))<span class="op">;</span></span>
<span id="cb42-2"><a href="#cb42-2"></a>⠕ <span class="kw">let</span> hours <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(totalSecs <span class="op">/</span> <span class="dv">3600</span>)<span class="op">;</span></span>
<span id="cb42-3"><a href="#cb42-3"></a>⠕ <span class="kw">let</span> secsStillRemaining  <span class="op">=</span> totalSecs <span class="op">%</span> <span class="dv">3600</span><span class="op">;</span></span>
<span id="cb42-4"><a href="#cb42-4"></a>⠕ <span class="kw">let</span> minutes <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(secsStillRemaining <span class="op">/</span> <span class="dv">60</span>)<span class="op">;</span></span>
<span id="cb42-5"><a href="#cb42-5"></a>⠕ <span class="kw">let</span> secsFinallyRemaining <span class="op">=</span> secsStillRemaining  <span class="op">%</span> <span class="dv">60</span><span class="op">;</span></span>
<span id="cb42-6"><a href="#cb42-6"></a>⠕</span>
<span id="cb42-7"><a href="#cb42-7"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Hrs=&quot;</span><span class="op">,</span> hours<span class="op">,</span> <span class="st">&quot;  mins=&quot;</span><span class="op">,</span> minutes<span class="op">,</span> <span class="st">&quot;secs=&quot;</span><span class="op">,</span> secsFinallyRemaining)<span class="op">;</span></span></code></pre></div>
</section>
<section id="variable-exercises" class="level2">
<h2>Variable Exercises</h2>
<p>To complete these exercises, open up a Javascript interpreter in
repl.it. You can test things out in the right-side interactive window,
and write your solutions in the Javascript source file on the left side.
You might want to comment out the code you’re not working on, so that
the output is less confusing.</p>
<p><a href="https://repl.it/@mcuringa/ES6-shell">Fork the standard ES6
Shell with <code>window.prompt()</code></a> or <a
href="https://repl.it/@mcuringa/prompt">the node.js shell with the
terminal-only <code>prompt()</code> function</a></p>
<ol>
<li><p>Take the sentence: <em>All work and no play makes Jack a dull
boy.</em> Store each word in a separate variable, then print out the
sentence on one line using <code>console.log()</code>.</p></li>
<li><p>Add parenthesis to the expression <code>6 * 1 - 2</code> to
change its value from 4 to -6.</p></li>
<li><p>Start the Javascript interpreter and enter <code>bruce + 4</code>
at the prompt. This will give you an error:
<code>ReferenceError: bruce is not defined</code></p>
<p>Assign a value to <code>bruce</code> so that <code>bruce + 4</code>
evaluates to <code>10</code>.</p></li>
<li><p>The formula for computing the final amount if one is earning
compound interest is given on Wikipedia as
<img class="d-block img-fluid" src="figs/compoundInterest.png" alt="formula for compound interest"></p>
<p>Write a Javascript program that assigns the principal amount of
$10000 to variable <code>P</code>, assign to <code>n</code> the value
12, and assign to <code>r</code> the interest rate of 8%. Set variable
<code>t</code> to be the number of years the money will be compounded
for. Calculate and print the final amount after <code>t</code>
years.</p></li>
<li><p>Evaluate the following numerical expressions in your head, then
use the Javascript interpreter to check your results:</p>
<ol>
<li><code>⠕ 5 % 2</code></li>
<li><code>⠕ 9 % 5</code></li>
<li><code>⠕ 15 % 12</code></li>
<li><code>⠕ 12 % 15</code></li>
<li><code>⠕ 6 % 6</code></li>
<li><code>⠕ 0 % 7</code></li>
<li><code>⠕ 7 % 0</code></li>
</ol>
<p>What happened with the last example? Why? If you were able to
correctly anticipate the computer’s response in all but the last one, it
is time to move on. If not, take time now to make up examples of your
own. Explore the modulus operator until you are confident you understand
how it works.</p></li>
<li><p>You look at the clock and it is exactly 2pm. You set an alarm to
go off in 51 hours. At what time does the alarm go off? (Hint: you could
count on your fingers, but this is not what we’re after. If you are
tempted to count on your fingers, change the 51 to 5100.)</p></li>
<li><p>Write a Javascript program to solve the general version of the
above problem. Create a variable <code>hrs</code> to represent the
number of hours to wait.<br />
Your program should output what the time will be on the clock when the
alarm goes off, regardless of the value that <code>hrs</code>
holds.</p></li>
</ol>
</section>
<section id="glossary-2" class="level2">
<h2>Glossary</h2>
<dl>
<dt>assignment statement</dt>
<dd>
<p>A statement that assigns a value to a name (variable). To the left of
the assignment operator, <code>=</code>, is a name. To the right of the
assignment token is an expression which is evaluated by the Javascript
interpreter and then assigned to the name. The difference between the
left and right hand sides of the assignment statement is often confusing
to new programmers. In the following assignment:<br />
<code>n = n + 1</code><br />
<code>n</code> plays a very different role on each side of the
<code>=</code>. On the right it is a <em>value</em> and makes up part of
the <em>expression</em> which will be evaluated by the Javascript
interpreter before assigning it to the name on the left.</p>
</dd>
<dt>assignment token</dt>
<dd>
<p><code>=</code> is Javascript’s assignment token. Do not confuse it
with <em>equals</em>, which is an operator for comparing values.</p>
</dd>
<dt>composition</dt>
<dd>
<p>The ability to combine simple expressions and statements into
compound statements and expressions in order to represent complex
computations concisely.</p>
</dd>
<dt>concatenate</dt>
<dd>
<p>To join two strings end-to-end.</p>
</dd>
<dt>data type</dt>
<dd>
<p>A set of values. The type of a value determines how it can be used in
expressions. So far, the types you have seen are <code>number</code> and
<code>string</code>.</p>
</dd>
<dt>evaluate</dt>
<dd>
<p>To simplify an expression by performing the operations in order to
yield a single value.</p>
</dd>
<dt>expression</dt>
<dd>
<p>A combination of variables, operators, and values that represents a
single result value.</p>
</dd>
<dt>float</dt>
<dd>
<p>Javascript data type which stores <em>floating-point</em> numbers.
Although integers and floats are are all of type <code>number</code>,
floating-point numbers are stored internally in two parts: a
<em>base</em> and an <em>exponent</em>. When printed in the standard
format, they look like decimal numbers. Beware of rounding errors when
you use <code>float</code> s, and remember that they are only
approximate values.</p>
</dd>
<dt>int</dt>
<dd>
<p>An integer or whole number. In Javascript, its type is
<code>number</code>.</p>
</dd>
<dt>keyword</dt>
<dd>
<p>A reserved word that is used by the compiler to parse program; you
cannot use keywords like <code>if</code>, <code>function</code>, and
<code>while</code> as variable names.</p>
</dd>
<dt>modulus operator</dt>
<dd>
<p>An operator, denoted with a percent sign ( <code>%</code>), that
works on integers and yields the remainder when one number is divided by
another.</p>
</dd>
<dt>operand</dt>
<dd>
<p>One of the values on which an operator operates.</p>
</dd>
<dt>operator</dt>
<dd>
<p>A special symbol that represents a simple computation like addition,
multiplication, or string concatenation.</p>
</dd>
<dt>rules of precedence</dt>
<dd>
<p>The set of rules governing the order in which expressions involving
multiple operators and operands are evaluated.</p>
</dd>
<dt>state snapshot</dt>
<dd>
<p>A graphical representation of a set of variables and the values to
which they refer, taken at a particular instant during the program’s
execution.</p>
</dd>
<dt>statement</dt>
<dd>
<p>An instruction that the Javascript interpreter can execute. So far we
have mostly seen the assignment statement.</p>
</dd>
<dt>string</dt>
<dd>
<p>A Javascript data type that holds a string of characters
(e.g. textual data).</p>
</dd>
<dt>value</dt>
<dd>
<p>A number or string (or other things to be named later) that can be
stored in a variable or computed in an expression.</p>
</dd>
<dt>variable</dt>
<dd>
<p>A name that refers to a value.</p>
</dd>
<dt>variable name</dt>
<dd>
<p>A name given to a variable. Variable names in Javascript consist of a
sequence of letters (a..z, A..Z, $, and _) and digits (0..9) that begins
with a letter. In best programming practice, variable names should be
chosen so that they describe their use in the program, making the
program <em>self documenting</em>.</p>
</dd>
</dl>
</section>
</section>
<section id="functions" class="level1">
<h1>Functions</h1>
<section id="functions-1" class="level2">
<h2>Functions</h2>
<p>In Javascript, a <strong>function</strong> is a named sequence of
statements that belong together. Their primary purpose is to help us
organize programs into chunks that match how we think about the
problem.</p>
<p>The syntax for a <strong>function definition</strong> is:</p>
<div class="sourceCode" id="cb43"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">NAME</span>( PARAMETERS ) {</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  STATEMENTS</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We can make up any names we want for the functions we create, except
that we can’t use a name that is a Javascript keyword, and the names
must follow the rules for legal identifiers (the same rules that apply
to variable names).</p>
<p>There can be any number of statements inside the function, but they
have to be between the curly braces (<code>{}</code>). These statements
make up the <strong>function body</strong>. In the examples in this
book, we will use the standard indentation of two spaces. Function
definitions are the second of several <strong>compound
statements</strong> we will see, all of which have the same pattern:</p>
<ol type="1">
<li>A header line which begins with a keyword and ends with an opening
(left) curly brace.</li>
<li>A <strong>body</strong> consisting of one or more Javascript
statements, each indented the same amount — <em>we will use 2
spaces</em> — from the header line.</li>
<li>A closing (right) curly brace.</li>
</ol>
<p>We’ve already seen the <code>for</code> loop which follows this
pattern.</p>
<p>So looking again at the function definition, the keyword in the
header is <code>function</code>, which is followed by the name of the
function and some <em>parameters</em> enclosed in parentheses. The
parameter list may be empty, or it may contain any number of parameters
separated from one another by commas. In either case, the parentheses
are required. The parameters specifies what information, if any, we have
to provide in order to use the new function.</p>
<p>Suppose we are writing a program to calculate the amount of tip due
on a bill. We might write a function to “calculate tip”. “calculate tip”
is an <em>abstraction</em>, or a mental chunk, of a number of smaller
steps. So let’s write a function to capture the pattern of this
“building block”:</p>
<div class="sourceCode" id="cb44"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb44-1"><a href="#cb44-1"></a><span class="co">/*</span></span>
<span id="cb44-2"><a href="#cb44-2"></a><span class="co">  Calculate the tip on a bill, given the pct of the tip.</span></span>
<span id="cb44-3"><a href="#cb44-3"></a><span class="co">*/</span></span>
<span id="cb44-4"><a href="#cb44-4"></a><span class="kw">function</span> <span class="fu">calculateTip</span> (bill<span class="op">,</span> pct) {</span>
<span id="cb44-5"><a href="#cb44-5"></a>  <span class="kw">let</span> tip <span class="op">=</span> bill <span class="op">*</span> (pct <span class="op">*</span> <span class="op">.</span><span class="bn">01</span>)<span class="op">;</span> <span class="co">// convert pct to a decimal and calculate</span></span>
<span id="cb44-6"><a href="#cb44-6"></a>  tip <span class="op">=</span> tip<span class="op">.</span><span class="fu">toFixed</span>(tip<span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span> <span class="co">// convert tip to a number with 2 decimal places</span></span>
<span id="cb44-7"><a href="#cb44-7"></a>  total <span class="op">=</span> tip <span class="op">+</span> bill<span class="op">;</span></span>
<span id="cb44-8"><a href="#cb44-8"></a>  total <span class="op">=</span> <span class="bu">Number</span><span class="op">.</span><span class="fu">parseFloat</span>(total)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb44-9"><a href="#cb44-9"></a></span>
<span id="cb44-10"><a href="#cb44-10"></a>  <span class="co">// now show the results to the user</span></span>
<span id="cb44-11"><a href="#cb44-11"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Bill amount: $&quot;</span> <span class="op">+</span> bill)<span class="op">;</span></span>
<span id="cb44-12"><a href="#cb44-12"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Tip percentage: &quot;</span> <span class="op">+</span> pct <span class="op">+</span> <span class="st">&quot;%&quot;</span>)<span class="op">;</span></span>
<span id="cb44-13"><a href="#cb44-13"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Total amount due: $&quot;</span> <span class="op">+</span> total)<span class="op">;</span></span>
<span id="cb44-14"><a href="#cb44-14"></a>}</span>
<span id="cb44-15"><a href="#cb44-15"></a></span>
<span id="cb44-16"><a href="#cb44-16"></a><span class="co">// find the amount of an 18% tip on a $100 bill</span></span>
<span id="cb44-17"><a href="#cb44-17"></a><span class="fu">calculateTip</span>(<span class="dv">100</span><span class="op">,</span><span class="dv">18</span>)<span class="op">;</span></span></code></pre></div>
<p>This function is named <code>calculateTip</code>. It has two
parameters: one to tell the function the amount of the bill, and the
other to tell it the percent tip to calculate.</p>
<p>Defining a new function does not make the function run. To do that we
need a <strong>function call</strong>. We’ve already seen how to call
some built-in functions like <strong>console.log</strong>,
<strong>window.input</strong>, and <strong>Number.parseInt</strong>.
Function calls contain the name of the function being executed followed
by a list of values, called <em>arguments</em>, which are assigned to
the parameters in the function definition. So in the last line of the
example program above, we call the function, and pass <code>100</code>
as the amount of the bill and <code>18</code> as the percentage of the
tip. While the function is executing, then, the variable
<code>bill</code> refers to the value 100, and the variable
<code>pct</code> refers to 18. We can pass either variables (like
<code>myBill</code>) or literal values (like <code>100</code>) as
arguments.</p>
<p>Once we’ve defined a function, we can call it as often as we like,
and its statements will be executed each time we call it. In the next
example, we calculate 3 different tip amounts for the same bill, using
<code>calculateTip</code> defined above.</p>
<div class="sourceCode" id="cb45"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb45-1"><a href="#cb45-1"></a><span class="kw">let</span> myBill <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb45-2"><a href="#cb45-2"></a><span class="fu">calculateTip</span>(myBill<span class="op">,</span> <span class="dv">15</span>)<span class="op">;</span></span>
<span id="cb45-3"><a href="#cb45-3"></a><span class="fu">calculateTip</span>(myBill<span class="op">,</span> <span class="dv">18</span>)<span class="op">;</span></span>
<span id="cb45-4"><a href="#cb45-4"></a><span class="fu">calculateTip</span>(myBill<span class="op">,</span> <span class="dv">20</span>)<span class="op">;</span></span></code></pre></div>
<aside id="coding-style">
<p><strong>Coding Style</strong></p>
<p>Now that you are about to write longer, more complex pieces of
Javascript, it is a good time to talk about coding style. Most languages
can be written (or more concise, formatted) in different styles; some
are more readable than others. Making it easy for others to read your
code is always a good idea, and adopting a nice coding style helps
tremendously for that.</p>
<p>For our Javascript, we will follow the coding style described in the
<a
href="https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Coding_Style">Mozilla
project developer’s guide</a>. Here are the most important points
extracted for you:</p>
<ul>
<li>Use 2-space indentation, and no tabs.</li>
<li>Wrap lines so that they don’t exceed 80 characters.
<ul>
<li>This helps users with small displays and makes it possible to have
several code files side-by-side on larger displays.</li>
</ul></li>
<li>Use double quotes <code>"</code> for string literals, except when
avoiding inline double quotes</li>
<li>Use blank lines to separate functions and classes, and larger blocks
of code inside functions.</li>
<li>When possible, put comments on a line of their own.</li>
<li>Use spaces around operators and after commas, but not directly
inside bracketing constructs: a = f(1, 2) + g(3, 4).</li>
<li>Name your variables, classes, and functions consistently; the
convention is to use CamelCase for identifier names.</li>
<li>Don’t use fancy encodings if your code is meant to be used in
international environments. Use UTF-8 or plain ASCII.
<ul>
<li>Likewise, don’t use non-ASCII characters in identifiers.</li>
</ul></li>
</ul>
</aside>
</section>
<section id="composition-functions-can-call-other-functions"
class="level2">
<h2>Composition: Functions can call other functions</h2>
<p>So far, we have looked at the elements of a
program—<code>variables</code>, <code>expressions</code>, and
<code>statements</code>—in isolation, without talking about how to
combine them.</p>
<p>One of the most useful features of programming languages is their
ability to take small building blocks and <strong>compose</strong> them.
In our <code>calculateTip</code> example, we call several Javascript
built-in functions: <code>toFixed</code> to keep our amounts to 2
decimal places and <code>Number.parseFloat</code> to convert the data to
a float so that we can use <code>toFixed</code>. We use
<code>console.log</code> to print our output on the Javascript console.
As we will see, we can compose our programs of many functions that we
define ourselves.</p>
<p>There are some points worth noting here:</p>
<ul>
<li>Functions can call other functions.</li>
<li>A caller of this function might say
<code>calculateTip(myBill, 15)</code>. The parameters of this function,
<code>bill</code> and <code>tip</code>, are assigned the values of the
myBill variable, and the number literal 15, respectively.</li>
<li>In the body of the function they are just like any other
variable.</li>
</ul>
<p>So far, it may not be clear why it is worth the trouble to create all
of these new functions. Actually, there are a lot of reasons, but this
example demonstrates two:</p>
<ol type="1">
<li>Creating a new function gives us an opportunity to name a group of
statements. Functions can simplify a program by hiding a complex
computation behind a single command. The function (including its name)
can capture our mental chunking, or <em>abstraction</em>, of the
problem.<br />
</li>
<li>Creating a new function can make a program smaller by eliminating
repetitive code.</li>
</ol>
<p>As we might expect, we have to create a function before we can
execute it. In other words, the function definition has to be executed
before the function is called.</p>
</section>
<section id="flow-of-execution" class="level2">
<h2>Flow of execution</h2>
<p>In order to ensure that a function is defined before its first use,
we have to know the order in which statements are executed, which is
called the <strong>flow of execution</strong>.</p>
<p>Execution always begins at the first statement of the program.
Statements are executed one at a time, in order from top to bottom.</p>
<p>Function definitions do not alter the flow of execution of the
program, but remember that statements inside the function are not
executed until the function is called. In Javascript we can define one
function inside another. In this case, the inner definition isn’t
executed until the outer function is called.</p>
<p>Function calls are like a detour in the flow of execution. Instead of
going to the next statement, the flow jumps to the first line of the
called function, executes all the statements there, and then comes back
to pick up where it left off.</p>
<p>That sounds simple enough, until we remember that one function can
call another. While in the middle of one function, the program might
have to execute the statements in another function. But while executing
that new function, the program might have to execute yet another
function!</p>
<p>Fortunately, Javascript is adept at keeping track of where it is, so
each time a function completes, the program picks up where it left off
in the function that called it. When it gets to the end of the program,
it terminates.</p>
<p>What’s the moral of this sordid tale? When we read a program, don’t
read from top to bottom. Instead, follow the flow of execution.</p>
</section>
<section id="functions-that-require-arguments" class="level2">
<h2>Functions that require arguments</h2>
<p>Most functions require arguments: the arguments provide for
generalization, allowing the same function to work with different data
inputs. For example, if we want to find the absolute value of a number,
we have to indicate what the number is. The Javascript <code>Math</code>
class has a built-in function for computing the absolute value:</p>
<div class="sourceCode" id="cb46"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(<span class="dv">5</span>)<span class="op">;</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">5</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(<span class="op">-</span><span class="dv">5</span>)<span class="op">;</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">5</span></span></code></pre></div>
<p>In this example, the arguments to the <code>abs</code> function are 5
and -5.</p>
<p>Some functions take more than one argument. For example the function
<code>calculateTip</code> function we wrote in the example above takes
two arguments: the amount of the bill and the percent tip to calculate.
Inside the function, the values that are passed get assigned to
variables called <strong>parameters</strong>.</p>
<div class="sourceCode" id="cb47"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="fu">calculateTip</span>(<span class="dv">87</span><span class="op">,</span> <span class="dv">10</span>)<span class="op">;</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>Bill amount<span class="op">:</span> $87</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>Tip percentage<span class="op">:</span> <span class="dv">10</span><span class="op">%</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>Total amount due<span class="op">:</span> $8<span class="op">.</span><span class="dv">70</span></span></code></pre></div>
<p>Another built-in function that takes more than one argument is
<code>Math.max</code>.</p>
<div class="sourceCode" id="cb48"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">7</span><span class="op">,</span> <span class="dv">11</span>)<span class="op">;</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">11</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">4</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">17</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">12</span>)<span class="op">;</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">17</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">3</span> <span class="op">*</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">5</span><span class="op">**</span><span class="dv">3</span><span class="op">,</span> <span class="dv">512</span> <span class="op">-</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">1024</span><span class="op">**</span><span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">503</span></span></code></pre></div>
<p><code>Math.max</code> can be passed any number of arguments,
separated by commas, and will return the largest value passed. The
arguments can be either simple values or expressions. In the last
example, 503 is returned, since it is larger than 33, 125, and 1. All of
the expressions are resolved — in this case the mathematical operations
are calculated — before their values are assigned to the function
parameters.</p>
</section>
<section id="functions-that-return-values" class="level2">
<h2>Functions that return values</h2>
<p>Some functions return values. In the previous section we saw that
<code>Math.abs</code> and <code>Math.max</code> return values.
<code>calculateTip</code> does not return a value; it uses
<code>console.log</code> to produce output on the screen for the user.
We can use the return values from functions to compose more complex
functions.</p>
<p>A function that returns a value is called a <strong>fruitful
function</strong> in this book. The opposite of a fruitful function is
<strong>void function</strong> — one that is not executed for its
resulting value, but is executed because it does something useful.
(Languages like Java, C#, C and C++ use the term “void function”, other
languages like Pascal call it a <strong>procedure</strong>.) Even though
void functions are not executed for their resulting value, Javascript
always wants to return something. So if the programmer doesn’t arrange
to return a value, Javascript will automatically return the value
<code>undefined</code>.</p>
<p>How do we write our own fruitful function? Let’s look at the standard
formula for compound interest as an example of a fruitful function:</p>
<p><img src="figs/compoundInterest.png" /></p>
<div class="sourceCode" id="cb49"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb49-1"><a href="#cb49-1"></a><span class="co">/*</span></span>
<span id="cb49-2"><a href="#cb49-2"></a><span class="co">Apply the compound interest formula to p</span></span>
<span id="cb49-3"><a href="#cb49-3"></a><span class="co">to produce the final amount.</span></span>
<span id="cb49-4"><a href="#cb49-4"></a><span class="co">*/</span></span>
<span id="cb49-5"><a href="#cb49-5"></a><span class="kw">function</span> <span class="fu">finalAmt</span> (p<span class="op">,</span> r<span class="op">,</span> n<span class="op">,</span> t) {</span>
<span id="cb49-6"><a href="#cb49-6"></a>  <span class="kw">let</span> a <span class="op">=</span> p <span class="op">*</span> (<span class="dv">1</span> <span class="op">+</span> r<span class="op">/</span>n) <span class="op">**</span> (n <span class="op">*</span> t)<span class="op">;</span></span>
<span id="cb49-7"><a href="#cb49-7"></a>  <span class="co">// This is new, and makes the function fruitful</span></span>
<span id="cb49-8"><a href="#cb49-8"></a>  <span class="cf">return</span> a<span class="op">;</span></span>
<span id="cb49-9"><a href="#cb49-9"></a>}</span>
<span id="cb49-10"><a href="#cb49-10"></a></span>
<span id="cb49-11"><a href="#cb49-11"></a></span>
<span id="cb49-12"><a href="#cb49-12"></a><span class="co">//now that we have the function above, let&#39;s call it</span></span>
<span id="cb49-13"><a href="#cb49-13"></a><span class="kw">let</span> toInvest <span class="op">=</span> <span class="bu">Number</span><span class="op">.</span><span class="fu">parseFloat</span>( <span class="bu">window</span><span class="op">.</span><span class="at">prompt</span>(<span class="st">&quot;How much do you want to invest?&quot;</span>) )<span class="op">;</span></span>
<span id="cb49-14"><a href="#cb49-14"></a><span class="kw">let</span> fnl <span class="op">=</span> <span class="fu">finalAmt</span>(toInvest<span class="op">,</span> <span class="fl">0.08</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">5</span>)<span class="op">;</span></span>
<span id="cb49-15"><a href="#cb49-15"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;At the end of the period you&#39;ll have&quot;</span><span class="op">,</span> fnl)<span class="op">;</span></span></code></pre></div>
<ul>
<li>The <strong>return</strong> statement is followed an expression
(<code>a</code> in this case). This expression will be evaluated and
returned to the caller as the “fruit” of calling this function.</li>
<li>We prompted the user for the principal amount. The type of
<code>toInvest</code> is a string, but we need a number before we can
work with it. Javascript can automatically convert it to a number for us
when we use it in the calculation. Because it is money, and could have
decimal places, we’ve used the <code>Number.parseFloat</code> type
converter function to parse the string and return a float.</li>
<li>Notice how we entered the arguments for 8% interest, compounded 12
times per year, for 5 years.</li>
<li>When we run this, if we enter <code>100</code> when prompted for the
amount to invest, we get the output<br> <em>At the end of the period
you’ll have 148.9845708301606</em><br> This is a bit messy with all
these decimal places, but remember that Javascript doesn’t understand
that we’re working with money: it just does the calculation to the best
of its ability, without rounding. Later we’ll see how to format the
string that is printed in such a way that it does get nicely rounded to
two decimal places before printing.</li>
<li>The line
<code>let toInvest = Number.parseFloat( window.prompt("How much do you want to invest?") );</code>
also shows yet another example of <em>composition</em> — we can call a
function like <code>Number.parseFloat</code>, and its arguments can be
the results of other function calls (like <code>window.prompt</code>)
that we’ve called along the way.</li>
</ul>
<p>Notice something else very important here. The name of the variable
we pass as an argument — <code>toInvest</code> — has nothing to do with
the name of the parameter — <code>p</code>. It is as if
<code>p = toInvest</code> is executed when <code>finalAmt</code> is
called. It doesn’t matter what the value was named in the caller, in
<code>finalAmt</code> its name is <code>p</code>.</p>
<p>These short variable names are getting quite tricky, so perhaps we’d
prefer one of these versions instead:</p>
<div class="sourceCode" id="cb50"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb50-1"><a href="#cb50-1"></a><span class="kw">function</span> <span class="fu">finalAmtV2</span>(principalAmount<span class="op">,</span> nominalPercentageRate<span class="op">,</span> numTimesPerYear<span class="op">,</span> years) {</span>
<span id="cb50-2"><a href="#cb50-2"></a>  <span class="kw">let</span> a <span class="op">=</span> principalAmount <span class="op">*</span> (<span class="dv">1</span> <span class="op">+</span> nominalPercentageRate <span class="op">/</span> numTimesPerYear) <span class="op">**</span> (numTimesPerYear <span class="op">*</span> years)<span class="op">;</span></span>
<span id="cb50-3"><a href="#cb50-3"></a>  <span class="cf">return</span> a<span class="op">;</span></span>
<span id="cb50-4"><a href="#cb50-4"></a>}</span>
<span id="cb50-5"><a href="#cb50-5"></a></span>
<span id="cb50-6"><a href="#cb50-6"></a><span class="kw">function</span> <span class="fu">finalAmtV3</span>(amt<span class="op">,</span> rate<span class="op">,</span> compounded<span class="op">,</span> years) {</span>
<span id="cb50-7"><a href="#cb50-7"></a>  <span class="kw">let</span> a <span class="op">=</span> amt <span class="op">*</span> (<span class="dv">1</span> <span class="op">+</span> rate <span class="op">/</span> compounded) <span class="op">**</span> (compounded <span class="op">*</span> years)<span class="op">;</span></span>
<span id="cb50-8"><a href="#cb50-8"></a>  <span class="cf">return</span> a<span class="op">;</span></span>
<span id="cb50-9"><a href="#cb50-9"></a>}</span></code></pre></div>
<p>They all do the same thing. Use your judgment to write code that can
be best understood by other humans!<br />
Short variable names are more economical and sometimes make code easier
to read: <var>E = mc<sup>2</sup></var> would not be nearly so memorable
if Einstein had used longer variable names! If you do prefer short
names, make sure you also have some comments to enlighten the reader
about what the variables are used for.</p>
<hr />
<p>When we declare a new <strong>local variable</strong> inside a
function, it only exists inside the function, and we cannot use it
outside. For example, consider again this function:</p>
<div class="sourceCode" id="cb51"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb51-1"><a href="#cb51-1"></a></span>
<span id="cb51-2"><a href="#cb51-2"></a><span class="kw">function</span> <span class="fu">finalAmt</span> (p<span class="op">,</span> r<span class="op">,</span> n<span class="op">,</span> t) {</span>
<span id="cb51-3"><a href="#cb51-3"></a>  <span class="kw">let</span> a <span class="op">=</span> p <span class="op">*</span> (<span class="dv">1</span> <span class="op">+</span> r<span class="op">/</span>n) <span class="op">**</span> (n <span class="op">*</span> t)<span class="op">;</span></span>
<span id="cb51-4"><a href="#cb51-4"></a>  <span class="cf">return</span> a<span class="op">;</span></span>
<span id="cb51-5"><a href="#cb51-5"></a>}</span></code></pre></div>
<p>If we try to use <code>a</code>, outside the function, we’ll get an
error like this:</p>
<div class="sourceCode" id="cb52"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>⠕ a</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="bu">ReferenceError</span><span class="op">:</span> a is not defined</span></code></pre></div>
<p>The variable <code>a</code> is local to <code>finalAmt</code>, and is
not visible outside the function.</p>
<p>Additionally, <code>a</code> only exists while the function is being
executed — we call this its <strong>lifetime</strong>. When the
execution of the function terminates, the local variables are
destroyed.</p>
<p>Parameters are also local, and act like local variables. For example,
the lifetimes of <code>p</code>, <code>r</code>, <code>n</code>,
<code>t</code> begin when <code>finalAmt</code> is called, and the
lifetime ends when the function completes its execution.</p>
<p>So it is not possible for a function to set some local variable to a
value, complete its execution, and then when it is called again next
time, recover the local variable. Each call of the function creates new
local variables, and their lifetimes expire when the function returns to
the caller.</p>
</section>
<section id="glossary-3" class="level2">
<h2>Glossary</h2>
<dl>
<dt>argument</dt>
<dd>
<p>A value provided to a function when the function is called. This
value is assigned to the corresponding parameter in the function. The
argument can be the result of an expression which may involve operators,
operands and calls to other fruitful functions.</p>
</dd>
<dt>body</dt>
<dd>
<p>The second part of a compound statement. The body consists of a
sequence of statements all indented the same amount from the beginning
of the header. The standard amount of indentation used within the Python
community is 4 spaces.</p>
</dd>
<dt>compound statement</dt>
<dd>
<p>A statement that consists of two parts:</p>
<ol type="1">
<li>header - which begins with a keyword determining the statement type,
and ends with a colon.</li>
<li>body - containing one or more statements indented the same amount
from the header.</li>
</ol>
<p>The syntax of a compound statement looks like this:</p>
<div class="sourceCode" id="cb53"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>keyword <span class="op">...</span> <span class="op">:</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    statement</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    statement <span class="op">...</span></span></code></pre></div>
</dd>
<dt>flow of execution</dt>
<dd>
<p>The order in which statements are executed during a program run.</p>
</dd>
<dt>frame</dt>
<dd>
<p>A box in a stack diagram that represents a function call. It contains
the local variables and parameters of the function.</p>
</dd>
<dt>function</dt>
<dd>
<p>A named sequence of statements that performs some useful operation.
Functions may or may not take parameters and may or may not produce a
result.</p>
</dd>
<dt>function call</dt>
<dd>
<p>A statement that executes a function. It consists of the name of the
function followed by a list of arguments enclosed in parentheses.</p>
</dd>
<dt>function composition</dt>
<dd>
<p>Using the output from one function call as the input to another.</p>
</dd>
<dt>function definition</dt>
<dd>
<p>A statement that creates a new function, specifying its name,
parameters, and the statements it executes.</p>
</dd>
<dt>fruitful function</dt>
<dd>
<p>A function that returns a value when it is called.</p>
</dd>
<dt>header line</dt>
<dd>
<p>The first part of a compound statement. A header line begins with a
keyword and ends with a colon (:)</p>
</dd>
<dt>import statement</dt>
<dd>
<p>A statement which permits functions and variables defined in another
Python module to be brought into the environment of another script. To
use the features of the turtle, we need to first import the turtle
module.</p>
</dd>
<dt>lifetime</dt>
<dd>
<p>Variables and objects have lifetimes — they are created at some point
during program execution, and will be destroyed at some time.</p>
</dd>
<dt>local variable</dt>
<dd>
<p>A variable defined inside a function. A local variable can only be
used inside its function. Parameters of a function are also a special
kind of local variable.</p>
</dd>
<dt>parameter</dt>
<dd>
<p>A name used inside a function to refer to the value which was passed
to it as an argument.</p>
</dd>
<dt>refactor</dt>
<dd>
<p>A fancy word to describe reorganizing our program code, usually to
make it more understandable. Typically, we have a program that is
already working, then we go back to “tidy it up”. It often involves
choosing better variable names, or spotting repeated patterns and moving
that code into a function.</p>
</dd>
<dt>stack diagram</dt>
<dd>
<p>A graphical representation of a stack of functions, their variables,
and the values to which they refer.</p>
</dd>
<dt>traceback</dt>
<dd>
<p>A list of the functions that are executing, printed when a runtime
error occurs. A traceback is also commonly referred to as a <em>stack
trace</em>, since it lists the functions in the order in which they are
stored in the <a
href="http://en.wikipedia.org/wiki/Runtime_stack">runtime stack</a>.</p>
</dd>
<dt>void function</dt>
<dd>
<p>The opposite of a fruitful function: one that does not return a
value. It is executed for the work it does, rather than for the value it
returns.</p>
</dd>
</dl>
</section>
<section id="function-exercises" class="level2">
<h2>Function Exercises</h2>
<ol type="1">
<li><p>Write a void (non-fruitful) function to that prints out a “hello”
message. Your function should declare 3 parameters:
<code>firstName</code>, <code>lastName</code>, and <code>title</code>.
<code>title</code> will be Mr., Ms., Dr., etc. The function should print
a message like this one:
<code>Hello Dr. Matthew Curinga.</code></p></li>
<li><p>Write a function <code>half(num)</code> which returns the value
of <code>num</code> divided by 2.</p></li>
<li><p>Write a function <code>triple(num)</code> which return
<code>num</code> * 3.</p></li>
<li><p>Write a function <code>areaOfACircle(r)</code> which returns the
area of a circle of radius <code>r</code>. For the value of PI, use the
constant <code>Math.PI</code><br> (Hint: if you can’t remember how to
find the area of a circle, look it up or ask a friend.)</p></li>
<li><p>Write a function <code>hypotenuse(a, b)</code> which calculates
the hypotenuse of a right triangle when given the length of sides
<code>a</code> and <code>b</code>. Use the <a
href="https://en.wikipedia.org/wiki/Pythagorean_theorem">Pythagorean
theorem</a> <code>a^2 + b^2 = c^2</code>.<br> Note, you will need to be
able to calculate square roots to solve this problem. You can use the
build in math function <code>Math.sqrt</code>.</p></li>
<li><p>(hard bonus) Write a function called
<code>distance(x1, y1, x2, y2)</code> which calculates the distance
between the point at (x1, y1) and (x2, y2) on a Cartesian Plane. You can
find the formula for this at <a
href="http://www.mathsisfun.com/algebra/distance-2-points.html"
class="uri">http://www.mathsisfun.com/algebra/distance-2-points.html</a><br>
Use the <code>hypotenuse</code> function from exercise 5 to compose this
function.</p></li>
</ol>
</section>
<section id="functions-lab" class="level2">
<h2>Functions Lab</h2>
<p>This is the first “lab” in our textbook. For this project, you will
be asked to write a complete program that solves a problem. The labs
should break up parts of the program into different functions. Your
program should start when the <code>main()</code> function is called.
<code>main</code> is not a keyword in Javascript, but in many
programming languages there is a convention that the starting function
is called <code>main</code>. Please take a look at the Tip Calculator
case study below for a sense of how your program should be
structured.</p>
<p>For this first lab, too, please pay attention to your <a
href="#coding-style">coding style</a> to make sure that the program is
well formatted and easy for human readers to understand.</p>
<p>For this lab you are going to revisit the lemonade stand estimator
from the exercises in chapter 2. You will make an interactive program
that asks the user to enter all of the data for:</p>
<ul>
<li>prices of the ingredients</li>
<li>prices for the materials (e.g. cups)</li>
<li>sale price for a cup of lemonade</li>
<li>and estimation of the number of cups sold</li>
</ul>
<p>Once all of the data is entered, the program will print out a neatly
formatted message with the results of the estimation.</p>
</section>
<section id="unit-testing-exercises" class="level2">
<h2>Unit testing exercises</h2>
<p>For each of these problems, write the unit test
<strong>first</strong>, then write the function. Make sure that it
passes the test.</p>
<p><strong>Convert km to m.</strong> For example, write a function that
converts kilometers to meters, as well as a function that tests this
code. There are 1,000 meters in 1 kilometer. The code might look like
this:</p>
<div class="sourceCode" id="cb54"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb54-1"><a href="#cb54-1"></a></span>
<span id="cb54-2"><a href="#cb54-2"></a><span class="kw">function</span> <span class="fu">kmToM</span> (km) {</span>
<span id="cb54-3"><a href="#cb54-3"></a>  <span class="kw">let</span> m <span class="op">=</span> km <span class="op">/</span> <span class="dv">1000</span><span class="op">;</span></span>
<span id="cb54-4"><a href="#cb54-4"></a>  <span class="cf">return</span> m<span class="op">;</span></span>
<span id="cb54-5"><a href="#cb54-5"></a>}</span>
<span id="cb54-6"><a href="#cb54-6"></a></span>
<span id="cb54-7"><a href="#cb54-7"></a></span>
<span id="cb54-8"><a href="#cb54-8"></a><span class="kw">function</span> <span class="fu">test_kmToM</span>() {</span>
<span id="cb54-9"><a href="#cb54-9"></a>  <span class="fu">assert</span>(<span class="fu">kmToM</span>(<span class="dv">1</span>) <span class="op">===</span> <span class="dv">1000</span><span class="op">,</span> <span class="st">&quot;1km should = 1000m&quot;</span>)<span class="op">;</span></span>
<span id="cb54-10"><a href="#cb54-10"></a>  <span class="fu">assert</span>(<span class="fu">kmToM</span>(<span class="dv">52</span>) <span class="op">===</span> <span class="dv">52000</span><span class="op">,</span> <span class="st">&quot;52km should = 52000m&quot;</span>)<span class="op">;</span></span>
<span id="cb54-11"><a href="#cb54-11"></a>  <span class="fu">assert</span>(<span class="fu">kmToM</span>(<span class="op">.</span><span class="bn">05</span>) <span class="op">===</span> <span class="dv">50</span><span class="op">,</span> <span class="st">&quot;.05km should = 50m&quot;</span>)<span class="op">;</span></span>
<span id="cb54-12"><a href="#cb54-12"></a>  <span class="fu">assert</span>(<span class="fu">kmToM</span>(<span class="op">-</span><span class="dv">3</span>) <span class="op">===</span> <span class="op">-</span><span class="dv">3000</span><span class="op">,</span> <span class="st">&quot;-3 should = -3000m&quot;</span>)<span class="op">;</span></span>
<span id="cb54-13"><a href="#cb54-13"></a>  <span class="fu">assert</span>(<span class="fu">kmToM</span>(<span class="dv">0</span>) <span class="op">===</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;0 should = 0&quot;</span>)<span class="op">;</span></span>
<span id="cb54-14"><a href="#cb54-14"></a>}</span></code></pre></div>
<ol type="1">
<li><p><strong>Tbs to cups</strong>. There are 16 tablespoons in a cup.
Write a function that converts Tbs to cups. It should take the number of
tablespoons as an argument and return the number of cups.</p></li>
<li><p><strong>Kilos (kg) to pounds (lbs)</strong>. Write a function
that converts kilograms to pounds. Use the conversion rate of 2.2 pounds
for each kilogram.</p></li>
<li><p><strong>Weight of water</strong>. 1 liter of water weighs exactly
1 kilogram. Write a function that has a parameter for the volume of
water in liters returns the weight of water <em>in pounds</em>,
something like this:
<code>function litersOfWaterInLbs(liters)</code></p></li>
<li><p><strong>Format currency.</strong> Write a function
<code>fmtCurrency(amount, symbol)</code> that takes a currency amount as
a real number and returns a string, with the currency symbol at the
start followed by the amount rounded to 2 decimal places (using
<code>toFixed</code>).</p></li>
<li><p><strong>Making pizza.</strong> You make pizzas. When you make the
sauce, if you only use 1 can of tomatoes, it’s not enough for the whole
pie. You need 1.5 cans per pizza. When you are making a lot of pizzas
(and a big pot of sauce), you want a function that tells you how many
cans of tomatoes to buy. Of course, you can’t buy half a can of
tomatoes, so you must round up if there’s a half can. To “round up”, use
Javascript’s built in <a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/ceil"><code>Math.round</code>
function</a>.</p></li>
</ol>
<section id="rounding-numbers-optional-challenge" class="level3">
<h3>Rounding numbers (optional challenge)</h3>
<p>Javascript’s built-in <code>Math.round(n)</code> rounds any real
number to the closest integer. Write a more flexible function,
<code>round(n, p)</code> that rounds a number <code>n</code> to the
number of decimal places specified by <code>p</code>.</p>
<p>Examples:</p>
<div class="sourceCode" id="cb55"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="fu">round</span>(<span class="fl">2.457</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="fl">2.46</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="fu">round</span>(<span class="fl">3.98746144</span><span class="op">,</span> <span class="dv">4</span>)</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="fl">3.9875</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>⠕ <span class="fu">round</span>(<span class="fl">3.98746144</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">4</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>⠕ <span class="fu">round</span>(<span class="dv">52</span><span class="op">,</span> <span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">50</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>⠕ <span class="fu">round</span>(<span class="dv">55</span><span class="op">,</span> <span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">60</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>⠕ <span class="fu">round</span>(<span class="dv">542</span><span class="op">,</span> <span class="op">-</span><span class="dv">2</span>)</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">540</span></span></code></pre></div>
<p><em>Your tests should test all of these examples.</em></p>
</section>
</section>
<section id="code-listing-1-the-tip-calculator"
class="level2 codeListing">
<h2 class="codeListing">Code Listing 1: The Tip Calculator</h2>
<section id="refactoring" class="level3">
<h3>Refactoring</h3>
<p>Now that we have fruitful functions, we can focus our attention on
reorganizing our code so that it fits more nicely into our mental
chunks.<br />
This process of rearrangement is called <strong>refactoring</strong> the
code.</p>
<p>With our Tip Calculator we need to find the amount of the tip and
show the results to the user. In the example below, we separate the
various functions of the program to make a more complete tip calculator.
As you’ll see, we’re starting to build code that is useful. Using
functions allows us to make changes to one part of a program without
affecting other parts of the program. For example, we can change the
welcome message without worrying about breaking our calculations.</p>
<p>The trick about refactoring code is to anticipate which things we are
likely to want to change each time we call the function: these should
become the parameters, or changeable parts, of the functions we
write.</p>
<p><a href="https://repl.it/@mcuringa/tip-calculator">View the “Tip
Calculator” repl</a></p>
</section>
<section id="case-study-tip-calculator"
class="level3 tipCalculator codeNotes">
<h3 class="tipCalculator codeNotes">Case Study: Tip Calculator</h3>
<aside data-line-number="1">
<p>Brief header <strong>comments</strong> at the top of the
<strong>source file</strong> identify basic information about the
program and the file. Comments are messages for programmers who read the
<strong>source code</strong> — they do not affect the execution of the
program.</p>
</aside>
<aside data-line-number="14">
<p><code>welcome</code> is a very simple <strong>function</strong> — it
does not accept any data in the form of <strong>function
parameters</strong> and it does not <strong>return</strong> any data
using a <strong>return statement</strong>. It simply prints out a
message to the console.</p>
</aside>
<aside data-line-number="30">
<p>The <code>calcTip</code> function defines 2
<strong>parameters</strong>: <code>bill</code> and <code>pct</code>.
These parameters become variables within the <strong>function
body</strong>. Line 30 uses <strong>arithmetic operators</strong>
(multiplication here) to calculate a new value and store it in the
<code>tip</code> <strong>variable</strong>. <code>tip</code> is
converted to a float using the <strong>built-in function</strong>
<code>Number.parseFloat</code>. Finally, the rounded tip amount is
returned.</p>
</aside>
<aside data-line-number="43">
<p><code>askBillAmt</code> is a <strong>fruitful function</strong>
because it has a <strong>return statement</strong>. It uses the
<strong>built-in function</strong> <code>window.prompt</code> to ask for
data from the user of the program. When this function is called, it
returns the amount of the bill as a float, because it represents
money.</p>
</aside>
<aside data-line-number="61">
<p><code>money</code> is a small helper function that we wrote to re-use
the task of formatting numbers as currency with a dollar sign and two
decimal places. It is called 3 times in <code>showResults</code> with
different <strong>arguments</strong>.</p>
</aside>
<aside data-line-number="70">
<p><code>showResults</code> defines 3 <strong>parameters</strong> which
are used to pass in all of the data needed to show the results of the
tip calculation. Notice that the <code>console.log</code> statements use
the <strong>+ operator</strong> to
<abbr title="join together">concatenate</abbr> strings. Because we are
joining <strong>string literals</strong> with variables of type
<code>number</code>. The <code>+</code> operator automatically converts
the numbers to strings.</p>
</aside>
<aside data-line-number="90">
<p><code>main</code> is the first function <strong>called</strong> for
this program. It maintains the executive control of the program, calling
other functions in sequence and passing data between functions. All of
the other functions have been defined, but are waiting to be called.</p>
</aside>
<div class="listingSrcCode">
<div class="sourceCode" id="cb56"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb56-1"><a href="#cb56-1"></a><span class="co">/**</span></span>
<span id="cb56-2"><a href="#cb56-2"></a><span class="co"> * tip-calulator.js</span></span>
<span id="cb56-3"><a href="#cb56-3"></a><span class="co"> * This example program helps the user</span></span>
<span id="cb56-4"><a href="#cb56-4"></a><span class="co"> * calculate the amount of tip to leave</span></span>
<span id="cb56-5"><a href="#cb56-5"></a><span class="co"> * on a restaurant bill.</span></span>
<span id="cb56-6"><a href="#cb56-6"></a><span class="co"> * by Matt Curinga</span></span>
<span id="cb56-7"><a href="#cb56-7"></a><span class="co"> * 15 Sep 2018 </span></span>
<span id="cb56-8"><a href="#cb56-8"></a><span class="co"> *</span></span>
<span id="cb56-9"><a href="#cb56-9"></a><span class="co"> */</span></span>
<span id="cb56-10"><a href="#cb56-10"></a></span>
<span id="cb56-11"><a href="#cb56-11"></a><span class="co">/*</span></span>
<span id="cb56-12"><a href="#cb56-12"></a><span class="co"> Present the user with a welcome message.</span></span>
<span id="cb56-13"><a href="#cb56-13"></a><span class="co">*/</span></span>
<span id="cb56-14"><a href="#cb56-14"></a><span class="kw">function</span> <span class="fu">welcome</span>() {</span>
<span id="cb56-15"><a href="#cb56-15"></a></span>
<span id="cb56-16"><a href="#cb56-16"></a>  <span class="kw">let</span> msg <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb56-17"><a href="#cb56-17"></a><span class="vs">-----------------------------------</span></span>
<span id="cb56-18"><a href="#cb56-18"></a><span class="vs">   Welcome to the Tip Calculator   </span></span>
<span id="cb56-19"><a href="#cb56-19"></a><span class="vs">-----------------------------------</span></span>
<span id="cb56-20"><a href="#cb56-20"></a><span class="vs">`</span><span class="op">;</span></span>
<span id="cb56-21"><a href="#cb56-21"></a></span>
<span id="cb56-22"><a href="#cb56-22"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(msg)<span class="op">;</span></span>
<span id="cb56-23"><a href="#cb56-23"></a></span>
<span id="cb56-24"><a href="#cb56-24"></a>}</span>
<span id="cb56-25"><a href="#cb56-25"></a></span>
<span id="cb56-26"><a href="#cb56-26"></a><span class="co">/*</span></span>
<span id="cb56-27"><a href="#cb56-27"></a><span class="co">  Calculate the tip on a bill, given the pct of the tip.</span></span>
<span id="cb56-28"><a href="#cb56-28"></a><span class="co">  Return the amount of the tip</span></span>
<span id="cb56-29"><a href="#cb56-29"></a><span class="co">*/</span></span>
<span id="cb56-30"><a href="#cb56-30"></a><span class="kw">function</span> <span class="fu">calcTip</span>(bill<span class="op">,</span> pct) {</span>
<span id="cb56-31"><a href="#cb56-31"></a>    <span class="co">// convert pct to a decimal and calculate</span></span>
<span id="cb56-32"><a href="#cb56-32"></a>    <span class="kw">let</span> tip <span class="op">=</span> bill <span class="op">*</span> pct<span class="op">;</span></span>
<span id="cb56-33"><a href="#cb56-33"></a>    </span>
<span id="cb56-34"><a href="#cb56-34"></a>    <span class="co">// convert the tip to float with 2 decimal places</span></span>
<span id="cb56-35"><a href="#cb56-35"></a>    tip <span class="op">=</span> <span class="bu">Number</span><span class="op">.</span><span class="fu">parseFloat</span>(tip)<span class="op">;</span></span>
<span id="cb56-36"><a href="#cb56-36"></a>    <span class="cf">return</span> tip<span class="op">;</span></span>
<span id="cb56-37"><a href="#cb56-37"></a>}</span>
<span id="cb56-38"><a href="#cb56-38"></a></span>
<span id="cb56-39"><a href="#cb56-39"></a><span class="co">/*</span></span>
<span id="cb56-40"><a href="#cb56-40"></a><span class="co">  Ask the user to enter the amount of the bill</span></span>
<span id="cb56-41"><a href="#cb56-41"></a><span class="co">  and return this amount as a &lt;float&gt;</span></span>
<span id="cb56-42"><a href="#cb56-42"></a><span class="co">*/</span></span>
<span id="cb56-43"><a href="#cb56-43"></a><span class="kw">function</span> <span class="fu">askBillAmt</span>() {</span>
<span id="cb56-44"><a href="#cb56-44"></a>    <span class="kw">let</span> amt <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="at">prompt</span>(<span class="st">&quot;How much was your total bill?&quot;</span>)<span class="op">;</span></span>
<span id="cb56-45"><a href="#cb56-45"></a>    amt <span class="op">=</span> <span class="bu">Number</span><span class="op">.</span><span class="fu">parseFloat</span>(amt)<span class="op">;</span></span>
<span id="cb56-46"><a href="#cb56-46"></a></span>
<span id="cb56-47"><a href="#cb56-47"></a>    <span class="cf">return</span> amt<span class="op">;</span></span>
<span id="cb56-48"><a href="#cb56-48"></a>}</span>
<span id="cb56-49"><a href="#cb56-49"></a></span>
<span id="cb56-50"><a href="#cb56-50"></a><span class="co">/*</span></span>
<span id="cb56-51"><a href="#cb56-51"></a><span class="co">  Allow the user to choose a tip amount from a menu.</span></span>
<span id="cb56-52"><a href="#cb56-52"></a><span class="co">*/</span></span>
<span id="cb56-53"><a href="#cb56-53"></a><span class="kw">function</span> <span class="fu">askTipPct</span>() {</span>
<span id="cb56-54"><a href="#cb56-54"></a>  <span class="kw">let</span> pct <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="at">prompt</span>(<span class="st">&quot;What percent tip do you want to leave?&quot;</span>)<span class="op">;</span></span>
<span id="cb56-55"><a href="#cb56-55"></a>  <span class="co">// convert the pct from a whole number to a fraction</span></span>
<span id="cb56-56"><a href="#cb56-56"></a>  pct <span class="op">/=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb56-57"><a href="#cb56-57"></a>  pct <span class="op">=</span> <span class="bu">Number</span><span class="op">.</span><span class="fu">parseFloat</span>(pct)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb56-58"><a href="#cb56-58"></a>  <span class="cf">return</span> pct<span class="op">;</span></span>
<span id="cb56-59"><a href="#cb56-59"></a>}</span>
<span id="cb56-60"><a href="#cb56-60"></a></span>
<span id="cb56-61"><a href="#cb56-61"></a><span class="kw">function</span> <span class="fu">money</span>(amt) {</span>
<span id="cb56-62"><a href="#cb56-62"></a>  <span class="kw">let</span> dollars <span class="op">=</span> <span class="st">&quot;$&quot;</span> <span class="op">+</span> <span class="bu">Number</span><span class="op">.</span><span class="fu">parseFloat</span>(amt)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb56-63"><a href="#cb56-63"></a>  <span class="cf">return</span> dollars<span class="op">;</span></span>
<span id="cb56-64"><a href="#cb56-64"></a>}</span>
<span id="cb56-65"><a href="#cb56-65"></a></span>
<span id="cb56-66"><a href="#cb56-66"></a><span class="co">/*</span></span>
<span id="cb56-67"><a href="#cb56-67"></a><span class="co">  Prints a message to the user showing</span></span>
<span id="cb56-68"><a href="#cb56-68"></a><span class="co">  the result of the calculations.</span></span>
<span id="cb56-69"><a href="#cb56-69"></a><span class="co">*/</span>    </span>
<span id="cb56-70"><a href="#cb56-70"></a><span class="kw">function</span> <span class="fu">showResults</span>(bill<span class="op">,</span> tip<span class="op">,</span> pct) {</span>
<span id="cb56-71"><a href="#cb56-71"></a>  <span class="kw">let</span> total <span class="op">=</span> tip <span class="op">+</span> bill<span class="op">;</span></span>
<span id="cb56-72"><a href="#cb56-72"></a></span>
<span id="cb56-73"><a href="#cb56-73"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Bill amount: &quot;</span> <span class="op">+</span> <span class="fu">money</span>(bill) )<span class="op">;</span></span>
<span id="cb56-74"><a href="#cb56-74"></a>  <span class="co">// multiply % by 100 to convert back</span></span>
<span id="cb56-75"><a href="#cb56-75"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Tip percentage: &quot;</span> <span class="op">+</span> (pct <span class="op">*</span> <span class="dv">100</span>) <span class="op">+</span> <span class="st">&quot;%&quot;</span> )<span class="op">;</span></span>
<span id="cb56-76"><a href="#cb56-76"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Tip amount due: &quot;</span> <span class="op">+</span> <span class="fu">money</span>(tip) )<span class="op">;</span></span>
<span id="cb56-77"><a href="#cb56-77"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Total with tip: &quot;</span> <span class="op">+</span> <span class="fu">money</span>(total) )<span class="op">;</span></span>
<span id="cb56-78"><a href="#cb56-78"></a></span>
<span id="cb56-79"><a href="#cb56-79"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`</span></span>
<span id="cb56-80"><a href="#cb56-80"></a><span class="vs">-----------------------------------</span></span>
<span id="cb56-81"><a href="#cb56-81"></a><span class="vs">             GOOD BYE      </span></span>
<span id="cb56-82"><a href="#cb56-82"></a><span class="vs">-----------------------------------</span></span>
<span id="cb56-83"><a href="#cb56-83"></a><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb56-84"><a href="#cb56-84"></a>}</span>
<span id="cb56-85"><a href="#cb56-85"></a></span>
<span id="cb56-86"><a href="#cb56-86"></a><span class="co">/*</span></span>
<span id="cb56-87"><a href="#cb56-87"></a><span class="co">  Read in the basic information, calcualte the tip</span></span>
<span id="cb56-88"><a href="#cb56-88"></a><span class="co">  and the share, then dispaly the results to the user.</span></span>
<span id="cb56-89"><a href="#cb56-89"></a><span class="co">*/</span></span>
<span id="cb56-90"><a href="#cb56-90"></a><span class="kw">function</span> <span class="fu">main</span>() {</span>
<span id="cb56-91"><a href="#cb56-91"></a>    </span>
<span id="cb56-92"><a href="#cb56-92"></a>    <span class="fu">welcome</span>()<span class="op">;</span></span>
<span id="cb56-93"><a href="#cb56-93"></a>    <span class="kw">let</span> myBill <span class="op">=</span> <span class="fu">askBillAmt</span>()<span class="op">;</span></span>
<span id="cb56-94"><a href="#cb56-94"></a>    <span class="kw">let</span> pct <span class="op">=</span> <span class="fu">askTipPct</span>()<span class="op">;</span></span>
<span id="cb56-95"><a href="#cb56-95"></a>    <span class="kw">let</span> tip <span class="op">=</span> <span class="fu">calcTip</span>(myBill<span class="op">,</span> pct)<span class="op">;</span></span>
<span id="cb56-96"><a href="#cb56-96"></a>    <span class="fu">showResults</span>(myBill<span class="op">,</span> tip<span class="op">,</span> pct)<span class="op">;</span></span>
<span id="cb56-97"><a href="#cb56-97"></a></span>
<span id="cb56-98"><a href="#cb56-98"></a>}</span>
<span id="cb56-99"><a href="#cb56-99"></a></span>
<span id="cb56-100"><a href="#cb56-100"></a><span class="fu">main</span>()<span class="op">;</span></span></code></pre></div>
</div>
</section>
</section>
</section>
<section id="conditionals" class="level1">
<h1>Conditionals</h1>
<blockquote>
<p>A successful attempt to express logical propositions by symbols, the
laws of whose combinations should be founded upon the laws of the mental
processes which they represent, would, so far, be a step towards a
philosophical language.</p>
<p>— George Boole, <em>The Mathematical Analysis of Logic</em> 1847</p>
</blockquote>
<section id="boolean-values-and-expressions" class="level2">
<h2>Boolean values and expressions</h2>
<p>A <em>Boolean</em> value is either true or false. It is named after
the British mathematician, George Boole, who first formulated
<em>Boolean algebra</em> — some rules for reasoning about and combining
these values. This is the basis of all modern computer logic.</p>
<p>In Javascript, the two Boolean values are <code>true</code> and
<code>false</code> (the capitalization must be exactly as shown), and
the Javascript type is <strong>‘boolean’</strong>.</p>
<div class="sourceCode" id="cb57"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>⠕ tyepof <span class="kw">true</span><span class="op">;</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;boolean&#39;</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>⠕ tyepof True<span class="op">;</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;undefined&#39;</span></span></code></pre></div>
<p>A <strong>Boolean expression</strong> is an expression that evaluates
to produce a result which is a Boolean value. For example, the operator
<code>===</code> tests if two values are equal. It produces (or
<em>yields</em>) a Boolean value:</p>
<div class="sourceCode" id="cb58"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="dv">5</span> <span class="op">===</span> (<span class="dv">3</span> <span class="op">+</span> <span class="dv">2</span>)<span class="op">;</span>   <span class="co">// Is five equal 5 to the result of 3 + 2?</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">true</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="dv">5</span> <span class="op">===</span> <span class="dv">6</span><span class="op">;</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">false</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> j <span class="op">=</span> <span class="st">&quot;hel&quot;</span><span class="op">;</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>⠕ j <span class="op">+</span> <span class="st">&quot;lo&quot;</span> <span class="op">===</span> <span class="st">&quot;hello&quot;</span><span class="op">;</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="kw">true</span></span></code></pre></div>
<p>In the first statement, the two operands evaluate to equal values, so
the expression evaluates to <code>true</code>; in the second statement,
5 is not equal to 6, so we get <code>false</code>.</p>
<p>The <code>===</code> operator is one of six common <strong>comparison
operators</strong> which all produce a <code>boolean</code> result; here
are all six:</p>
<div class="sourceCode" id="cb59"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">===</span> y   <span class="co">// Produce true if x is equal to y</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">!==</span> y   <span class="co">// Produce true if x is not equal to y</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">&gt;</span> y     <span class="co">// Produce true if x is greater than y</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">&lt;</span> y     <span class="co">// Produce true if x is less than y</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>x <span class="op">&gt;=</span> y    <span class="co">// Produce true if x is greater than or equal to y</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>x <span class="op">&lt;=</span> y    <span class="co">// Produce true if x is less than or equal to y</span></span></code></pre></div>
<p>Although these operations are probably familiar, the Javascript
symbols are different from the mathematical symbols. A common error is
to use a single equal sign (<code>=</code>) instead of a triple equal
sign (<code>===</code>). Remember that <code>=</code> is an assignment
operator and <code>===</code> is a comparison operator. Also, there is
no such thing as <code>=&lt;</code> or <code>=&gt;</code>.</p>
<p>Like any other types we’ve seen so far, Boolean values can be
assigned to variables, printed, etc.</p>
<div class="sourceCode" id="cb60"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> age <span class="op">=</span> <span class="dv">18</span><span class="op">;</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> oldEnoughToGetADrivingLicence <span class="op">=</span> age <span class="op">&gt;=</span> <span class="dv">16</span><span class="op">;</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(oldEnoughToGetADrivingLicence)<span class="op">;</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="kw">true</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">typeof</span> oldEnoughToGetADrivingLicence<span class="op">;</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;boolean&#39;</span></span></code></pre></div>
<aside id="strict-equality">
<p><strong>Equality and “sameness” in Javascript</strong></p>
<p>Javascript, as a programming language, is a little bit quirky when it
comes to testing equality. The double equal sign <code>==</code> is a
“loose” equality operator, while the triple equal sign <code>===</code>
used in the examples above is the “strict” equality operator.</p>
<p>When we looked at variables and data types in chapter 2, we saw how
Javascript does automatic type conversion. For example, it converts
numbers to strings when you use the <code>+</code> token for string
concatenation and strings to numbers (if it can) when we use other
mathematical operators.</p>
<p>The <code>==</code> compares values for equality <em>after</em> type
conversion, whereas the <code>===</code> compares values <em>before</em>
conversion. Only values of the same type are equal with the strict
operator.</p>
<div class="sourceCode" id="cb61"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="dv">5</span> <span class="op">==</span> <span class="st">&quot;5&quot;</span><span class="op">;</span> <span class="co">// true because of type conversion</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">true</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="dv">5</span> <span class="op">===</span> <span class="st">&quot;5&quot;</span><span class="op">;</span> <span class="co">// false using strict equality</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">false</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>⠕ <span class="dv">5</span> <span class="op">===</span> <span class="fl">5.0</span><span class="op">;</span> <span class="co">// true because integers and floats are all type `number`</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">true</span></span></code></pre></div>
<p>In addition to the loose equality with <code>==</code> there is a
loose inequality operator using <code>!=</code>. Because loose equality
(and inequality) is difficult to predict, <strong>we will only use
strict equality</strong> in the examples in this book. However, you are
likely to encounter both styles when reading other code, documentation,
and tutorials.</p>
<p>For further reading on this topic you can read <a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness">Equality
comparison and sameness</a> on the Mozilla Developer Network.</p>
</aside>
</section>
<section id="logical-operators" class="level2">
<h2>Logical operators</h2>
<p>There are three <strong>logical operators</strong>, <em>and</em>
<code>&amp;&amp;</code>, <em>or</em> <code>||</code>, and <em>not</em>
<code>!</code>, that allow us to build more complex Boolean expressions
from simpler Boolean expressions. The semantics (meaning) of these
operators is similar to their meaning in English. For example,
<code>x &gt; 0 &amp;&amp; x &lt; 10</code> produces <code>true</code>
only if <code>x</code> is greater than 0 <em>and</em> at the same time,
x is less than 10.</p>
<p><code>n % 2 == 0 || n % 3 == 0</code> is <code>true</code> if
<em>either</em> of the conditions are <code>true</code>, that is, if the
number <code>n</code> is divisible by 2 <em>or</em> it is divisible by
3. (What do you think happens if <code>n</code> is divisible by both 2
and by 3 at the same time? Will the expression yield <code>true</code>
or <code>false</code>? Try it in your Javascript interpreter.)</p>
<p>Finally, the <code>not</code> operator negates a Boolean value, so
<code>! (x &gt; y)</code> is <code>true</code> if
<code>(x &gt; y)</code> is <code>false</code>, that is, if
<code>x</code> is less than or equal to <code>y</code>.</p>
<p>The expression on the left of the <code>||</code> operator is
evaluated first: if the result is <code>true</code>, Javascript does not
(and need not) evaluate the expression on the right — this is called
<em>short-circuit evaluation</em>. Similarly, for the
<code>&amp;&amp;</code> operator, if the expression on the left yields
<code>false</code>, Javascript does not evaluate the expression on the
right.</p>
<p>So there are no unnecessary evaluations.</p>
</section>
<section id="truth-tables" class="level2">
<h2>Truth Tables</h2>
<p>A truth table is a small table that allows us to list all the
possible inputs, and to give the results for the logical operators.
Because the <code>&amp;&amp;</code> and <code>||</code> operators each
have two operands, there are only four rows in a truth table that
describes the semantics of <code>&amp;&amp;</code>.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">a</th>
<th style="text-align: left;">b</th>
<th style="text-align: left;">a &amp;&amp; b</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">False</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">False</td>
</tr>
<tr class="even">
<td style="text-align: left;">False</td>
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
</tr>
<tr class="odd">
<td style="text-align: left;">True</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">False</td>
</tr>
<tr class="even">
<td style="text-align: left;">True</td>
<td style="text-align: left;">True</td>
<td style="text-align: left;">True</td>
</tr>
</tbody>
</table>
<p>In a Truth Table, we sometimes use T and F as shorthand for the two
Boolean values: here is the truth table describing <code>||</code>:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">a</th>
<th style="text-align: left;">b</th>
<th style="text-align: left;">a || b</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">F</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">F</td>
</tr>
<tr class="even">
<td style="text-align: left;">F</td>
<td style="text-align: left;">T</td>
<td style="text-align: left;">T</td>
</tr>
<tr class="odd">
<td style="text-align: left;">T</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">T</td>
</tr>
<tr class="even">
<td style="text-align: left;">T</td>
<td style="text-align: left;">T</td>
<td style="text-align: left;">T</td>
</tr>
</tbody>
</table>
<p>The third logical operator, <code>!</code>, only takes a single
operand, so its truth table only has two rows:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">a</th>
<th style="text-align: left;">!a</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">F</td>
<td style="text-align: left;">T</td>
</tr>
<tr class="even">
<td style="text-align: left;">T</td>
<td style="text-align: left;">F</td>
</tr>
</tbody>
</table>
</section>
<section id="simplifying-boolean-expressions" class="level2">
<h2>Simplifying Boolean Expressions</h2>
<p>A set of rules for simplifying and rearranging expressions is called
an <em>algebra</em>. For example, we are all familiar with school
algebra rules, such as:</p>
<div class="sourceCode" id="cb62"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>n <span class="op">*</span> <span class="dv">0</span> <span class="op">===</span> <span class="dv">0</span></span></code></pre></div>
<p>which provides rules for working with Boolean values.</p>
<p>First, the <code>&amp;&amp;</code> operator:</p>
<div class="sourceCode" id="cb63"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">&amp;&amp;</span> <span class="kw">false</span> <span class="op">===</span> <span class="kw">false</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="kw">false</span> <span class="op">&amp;&amp;</span> x <span class="op">===</span> <span class="kw">false</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>y <span class="op">&amp;&amp;</span> x <span class="op">===</span> x <span class="op">&amp;&amp;</span> y</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">&amp;&amp;</span> <span class="kw">true</span> <span class="op">===</span> x</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="kw">true</span> <span class="op">&amp;&amp;</span> x <span class="op">===</span> x</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>x <span class="op">&amp;&amp;</span> x <span class="op">===</span> x</span></code></pre></div>
<p>Here are some corresponding rules for the <code>||</code>
operator:</p>
<div class="sourceCode" id="cb64"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">||</span> <span class="kw">false</span> <span class="op">===</span> x</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="kw">false</span> <span class="op">||</span> x <span class="op">===</span> x</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>y <span class="op">||</span> x <span class="op">===</span> x <span class="op">||</span> y</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">||</span> <span class="kw">true</span> <span class="op">===</span> <span class="kw">true</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="kw">true</span> <span class="op">||</span> x <span class="op">===</span> <span class="kw">true</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>x <span class="op">||</span> x <span class="op">===</span> x</span></code></pre></div>
<p>Two <code>!</code> operators cancel each other:</p>
<div class="sourceCode" id="cb65"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>(<span class="op">!</span>x) <span class="op">===</span> x</span></code></pre></div>
</section>
<section id="conditional-execution" class="level2">
<h2>Conditional execution</h2>
<p>In order to write useful programs, we almost always need the ability
to check conditions and change the behavior of the program accordingly.
<strong>Conditional statements</strong> give us this ability. The
simplest form is the <strong>if</strong> statement:</p>
<div class="sourceCode" id="cb66"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb66-1"><a href="#cb66-1"></a><span class="cf">if</span> (x <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>) {</span>
<span id="cb66-2"><a href="#cb66-2"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(x<span class="op">,</span> <span class="st">&quot; is even.&quot;</span>)<span class="op">;</span></span>
<span id="cb66-3"><a href="#cb66-3"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Did you know that 2 is the only even number that is prime?&quot;</span>)<span class="op">;</span></span>
<span id="cb66-4"><a href="#cb66-4"></a>}</span>
<span id="cb66-5"><a href="#cb66-5"></a><span class="cf">else</span> {</span>
<span id="cb66-6"><a href="#cb66-6"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(x<span class="op">,</span> <span class="st">&quot; is odd.&quot;</span>) <span class="op">;</span></span>
<span id="cb66-7"><a href="#cb66-7"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Did you know that multiplying two odd numbers always gives an odd result?&quot;</span>)<span class="op">;</span></span>
<span id="cb66-8"><a href="#cb66-8"></a>}</span></code></pre></div>
<p>If it is true, then all the indented statements get executed. If not,
then all the statements indented under the <code>else</code> clause get
executed.</p>
<figure>
<img src="figs/flowchart_if_else.png"
alt="Flowchart of an if statement with an else clause" />
<figcaption aria-hidden="true">Flowchart of an if statement with an else
clause</figcaption>
</figure>
<p>The syntax for an <code>if</code> statement looks like this:</p>
<div class="sourceCode" id="cb67"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb67-1"><a href="#cb67-1"></a><span class="cf">if</span> BOOLEAN EXPRESSION {</span>
<span id="cb67-2"><a href="#cb67-2"></a>  STATEMENTS_1   <span class="co">// Executed if condition evaluates to true</span></span>
<span id="cb67-3"><a href="#cb67-3"></a>}</span>
<span id="cb67-4"><a href="#cb67-4"></a><span class="cf">else</span> {</span>
<span id="cb67-5"><a href="#cb67-5"></a>  STATEMENTS_2   <span class="co">// Executed if condition evaluates to false</span></span>
<span id="cb67-6"><a href="#cb67-6"></a>}</span></code></pre></div>
<p>As with the function definition from the last chapter and other
compound statements like <code>for</code>, the <code>if</code> statement
consists of a header line and a body. The header line begins with the
keyword <code>if</code> followed by a <em>Boolean expression</em> and
ends with a left curly brace ( { ).</p>
<p>The indented statements that follow are called a
<strong>block</strong>. The block ends with the right curly brace ( }
).</p>
<p>Each of the statements inside the first block of statements are
executed in order if the Boolean expression evaluates to
<code>true</code>. The entire first block of statements is skipped if
the Boolean expression evaluates to <code>false</code>, and instead all
the statements indented under the <code>else</code> clause are
executed.</p>
<p>There is no limit on the number of statements that can appear under
the two clauses of an <code>if</code> statement, but there has to be at
least one statement in each block.</p>
</section>
<section id="omitting-the-else-clause" class="level2">
<h2>Omitting the <code>else</code> clause</h2>
<figure>
<img src="figs/flowchart_if_only.png"
alt="Flowchart of an if statement with no else clause" />
<figcaption aria-hidden="true">Flowchart of an if statement with no else
clause</figcaption>
</figure>
<p>Another form of the <code>if</code> statement is one in which the
<code>else</code> clause is omitted entirely. In this case, when the
condition evaluates to <code>true</code>, the statements are executed,
otherwise the flow of execution continues to the statement after the
<code>if</code>.</p>
<div class="sourceCode" id="cb68"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb68-1"><a href="#cb68-1"></a><span class="cf">if</span> (x <span class="op">&lt;</span> <span class="dv">0</span>) {</span>
<span id="cb68-2"><a href="#cb68-2"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;The negative number &quot;</span><span class="op">,</span>  x<span class="op">,</span> <span class="st">&quot; is not valid here.&quot;</span>)<span class="op">;</span></span>
<span id="cb68-3"><a href="#cb68-3"></a>  x <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb68-4"><a href="#cb68-4"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;I&#39;ve decided to use the number 42 instead.&quot;</span>)<span class="op">;</span></span>
<span id="cb68-5"><a href="#cb68-5"></a>}</span>
<span id="cb68-6"><a href="#cb68-6"></a></span>
<span id="cb68-7"><a href="#cb68-7"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;The square root of &quot;</span><span class="op">,</span> x<span class="op">,</span> <span class="st">&quot;is&quot;</span><span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(x)) <span class="op">;</span></span></code></pre></div>
<p>In this case, the print function that outputs the square root is the
one after the <code>if</code> — it comes after our curly braces ended
the conditional block.</p>
<p>Notice that <code>else</code> is not a statement. The <code>if</code>
statement has two <em>clauses</em>, one of which is the (optional)
<code>else</code> clause. However you can never use the
<code>else</code> keyword outside of an <code>if</code> statement.</p>
</section>
<section id="chained-conditionals" class="level2">
<h2>Chained conditionals</h2>
<p>Sometimes there are more than two possibilities and we need more than
two branches. One way to express a computation like that is a
<strong>chained conditional</strong>:</p>
<div class="sourceCode" id="cb69"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb69-1"><a href="#cb69-1"></a><span class="cf">if</span> (x <span class="op">&lt;</span> y) {</span>
<span id="cb69-2"><a href="#cb69-2"></a>  STATEMENTS_A</span>
<span id="cb69-3"><a href="#cb69-3"></a>}</span>
<span id="cb69-4"><a href="#cb69-4"></a><span class="cf">else</span> <span class="cf">if</span> (x <span class="op">&gt;</span> y) {</span>
<span id="cb69-5"><a href="#cb69-5"></a>  STATEMENTS_B</span>
<span id="cb69-6"><a href="#cb69-6"></a>}</span>
<span id="cb69-7"><a href="#cb69-7"></a><span class="cf">else</span> {</span>
<span id="cb69-8"><a href="#cb69-8"></a>  STATEMENTS_C</span>
<span id="cb69-9"><a href="#cb69-9"></a>}</span></code></pre></div>
<p><img src="figs/flowchart_chained_conditional.png" /></p>
<p>Again, exactly one branch will be executed. There is no limit of the
number of <code>else if</code> statements but only a single (and
optional) final <code>else</code> statement is allowed and it must be
the last branch in the statement:</p>
<div class="sourceCode" id="cb70"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb70-1"><a href="#cb70-1"></a><span class="cf">if</span> (choice <span class="op">===</span> <span class="st">&quot;a&quot;</span>) {</span>
<span id="cb70-2"><a href="#cb70-2"></a>  <span class="fu">functionOne</span>()<span class="op">;</span></span>
<span id="cb70-3"><a href="#cb70-3"></a>}</span>
<span id="cb70-4"><a href="#cb70-4"></a><span class="cf">else</span> <span class="cf">if</span> (choice <span class="op">==</span> <span class="st">&quot;b&quot;</span>) {</span>
<span id="cb70-5"><a href="#cb70-5"></a>  <span class="fu">functionTwo</span>()<span class="op">;</span></span>
<span id="cb70-6"><a href="#cb70-6"></a>}</span>
<span id="cb70-7"><a href="#cb70-7"></a><span class="cf">else</span> <span class="cf">if</span> (choice <span class="op">===</span> <span class="st">&quot;c&quot;</span>) {</span>
<span id="cb70-8"><a href="#cb70-8"></a>  <span class="fu">functionThree</span>()<span class="op">;</span></span>
<span id="cb70-9"><a href="#cb70-9"></a>}</span>
<span id="cb70-10"><a href="#cb70-10"></a><span class="cf">else</span> {</span>
<span id="cb70-11"><a href="#cb70-11"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Invalid choice.&quot;</span>)<span class="op">;</span></span>
<span id="cb70-12"><a href="#cb70-12"></a>}</span></code></pre></div>
<p>Each condition is checked in order. If the first is false, the next
is checked, and so on. If one of them is true, the corresponding branch
executes, and the statement ends. Even if more than one condition is
true, only the first true branch executes.</p>
</section>
<section id="nested-conditionals" class="level2">
<h2>Nested conditionals</h2>
<p>One conditional can also be <strong>nested</strong> within another.
(It is the same theme of composability, again!) We could have written
the previous example as follows:</p>
<figure>
<img src="figs/flowchart_nested_conditional.png"
alt="Flowchart of this nested conditional" />
<figcaption aria-hidden="true">Flowchart of this nested
conditional</figcaption>
</figure>
<div class="sourceCode" id="cb71"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb71-1"><a href="#cb71-1"></a><span class="cf">if</span> (x <span class="op">&lt;</span> y) {</span>
<span id="cb71-2"><a href="#cb71-2"></a>  STATEMENTS_A</span>
<span id="cb71-3"><a href="#cb71-3"></a>}</span>
<span id="cb71-4"><a href="#cb71-4"></a><span class="cf">else</span> {</span>
<span id="cb71-5"><a href="#cb71-5"></a>  <span class="cf">if</span>(x <span class="op">&gt;</span> y) {</span>
<span id="cb71-6"><a href="#cb71-6"></a>    STATEMENTS_B</span>
<span id="cb71-7"><a href="#cb71-7"></a>  }</span>
<span id="cb71-8"><a href="#cb71-8"></a>  <span class="cf">else</span> {</span>
<span id="cb71-9"><a href="#cb71-9"></a>    STATEMENTS_C</span>
<span id="cb71-10"><a href="#cb71-10"></a>  }</span>
<span id="cb71-11"><a href="#cb71-11"></a>}</span></code></pre></div>
<p>The outer conditional contains two branches. The second branch
contains another <code>if</code> statement, which has two branches of
its own. Those two branches could contain conditional statements as
well.</p>
<p>Although the indentation of the statements makes the structure
apparent, nested conditionals very quickly become difficult to read. In
general, it is a good idea to avoid them when we can.</p>
<p>Logical operators often provide a way to simplify nested conditional
statements. For example, we can rewrite the following code using a
single conditional:</p>
<div class="sourceCode" id="cb72"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb72-1"><a href="#cb72-1"></a><span class="cf">if</span> (<span class="dv">0</span> <span class="op">&lt;</span> x) {    <span class="co">// Assume x is a number here</span></span>
<span id="cb72-2"><a href="#cb72-2"></a>  <span class="cf">if</span> (x <span class="op">&lt;</span> <span class="dv">10</span>) {</span>
<span id="cb72-3"><a href="#cb72-3"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;x is a positive single digit.&quot;</span>)<span class="op">;</span></span>
<span id="cb72-4"><a href="#cb72-4"></a>  }</span>
<span id="cb72-5"><a href="#cb72-5"></a>}</span></code></pre></div>
<p>The <code>console.log</code> function is called only if we make it
past both the conditionals, so instead of the above which uses two
<code>if</code> statements each with a simple condition, we could make a
more complex condition using the <code>&amp;&amp;</code> operator. Now
we only need a single <code>if</code> statement:</p>
<div class="sourceCode" id="cb73"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb73-1"><a href="#cb73-1"></a><span class="cf">if</span> (<span class="dv">0</span> <span class="op">&lt;</span> x <span class="op">&amp;&amp;</span> x <span class="op">&lt;</span> <span class="dv">10</span>) {</span>
<span id="cb73-2"><a href="#cb73-2"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;x is a positive single digit.&quot;</span>)<span class="op">;</span></span>
<span id="cb73-3"><a href="#cb73-3"></a>}</span></code></pre></div>
</section>
<section id="the-return-statement" class="level2">
<h2>The <code>return</code> statement</h2>
<p>The <code>return</code> statement, with or without a value, depending
on whether the function is fruitful or void, allows us to terminate the
execution of a function before (or when) we reach the end. One reason to
use an <em>early return</em> is if we detect an error condition:</p>
<div class="sourceCode" id="cb74"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb74-1"><a href="#cb74-1"></a><span class="kw">function</span> <span class="fu">printSquareRoot</span>(x) {</span>
<span id="cb74-2"><a href="#cb74-2"></a>  <span class="cf">if</span> (x <span class="op">&lt;=</span> <span class="dv">0</span>) {</span>
<span id="cb74-3"><a href="#cb74-3"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Positive numbers only, please.&quot;</span>)<span class="op">;</span></span>
<span id="cb74-4"><a href="#cb74-4"></a>    <span class="cf">return</span><span class="op">;</span></span>
<span id="cb74-5"><a href="#cb74-5"></a>  }</span>
<span id="cb74-6"><a href="#cb74-6"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;The square root of&quot;</span><span class="op">,</span> x<span class="op">,</span> <span class="st">&quot;is&quot;</span><span class="op">,</span> result)</span>
<span id="cb74-7"><a href="#cb74-7"></a>}</span></code></pre></div>
<p>The function <code>printSquareRoot</code> has a parameter named
<code>x</code>. The first thing it does is check whether <code>x</code>
is less than or equal to 0, in which case it displays an error message
and then uses <code>return</code> to exit the function. The flow of
execution immediately returns to the caller, and the remaining lines of
the function are not executed.</p>
</section>
<section id="truthy-evaluations" class="level2">
<h2>Truthy evaluations</h2>
<p>As you integrate Boolean logic into your programs, you will often
encounter the pattern where you test if a single value evaluates to
<code>true</code> or <code>false</code>. The Boolean condition can be
written without a comparison operator because the value itself will be
resolves to <code>true</code> or <code>false</code>.</p>
<div class="sourceCode" id="cb75"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb75-1"><a href="#cb75-1"></a><span class="cf">if</span> (email) {</span>
<span id="cb75-2"><a href="#cb75-2"></a>  <span class="co">// send an email...</span></span>
<span id="cb75-3"><a href="#cb75-3"></a>}</span></code></pre></div>
<p>Any value that is not <code>false</code>, <code>undefined</code>,
<code>null</code>, 0, <code>NaN</code>, or an empty string (’’) actually
<strong>returns true</strong> when tested as a conditional statement.
Consider the following code:</p>
<div class="sourceCode" id="cb76"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb76-1"><a href="#cb76-1"></a><span class="kw">let</span> first <span class="op">=</span> <span class="st">&quot;Diego&quot;</span><span class="op">;</span></span>
<span id="cb76-2"><a href="#cb76-2"></a><span class="kw">let</span> last <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb76-3"><a href="#cb76-3"></a><span class="kw">let</span> email <span class="op">=</span> <span class="st">&quot;diego@example.com&quot;</span><span class="op">;</span></span>
<span id="cb76-4"><a href="#cb76-4"></a></span>
<span id="cb76-5"><a href="#cb76-5"></a><span class="cf">if</span> (email) {</span>
<span id="cb76-6"><a href="#cb76-6"></a>  <span class="co">// this block will be executed because email</span></span>
<span id="cb76-7"><a href="#cb76-7"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Email evaluted to true&quot;</span>)<span class="op">;</span></span>
<span id="cb76-8"><a href="#cb76-8"></a>}</span>
<span id="cb76-9"><a href="#cb76-9"></a></span>
<span id="cb76-10"><a href="#cb76-10"></a><span class="cf">if</span> (email <span class="op">===</span> <span class="kw">true</span>) {</span>
<span id="cb76-11"><a href="#cb76-11"></a>  <span class="co">// this block won&#39;t be executed because email is not equal to true</span></span>
<span id="cb76-12"><a href="#cb76-12"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Email doesn&#39;t equal true&quot;</span>)<span class="op">;</span></span>
<span id="cb76-13"><a href="#cb76-13"></a>}</span>
<span id="cb76-14"><a href="#cb76-14"></a></span>
<span id="cb76-15"><a href="#cb76-15"></a><span class="cf">if</span> (<span class="op">!</span>last) {</span>
<span id="cb76-16"><a href="#cb76-16"></a>  <span class="co">// this block (using not) executes</span></span>
<span id="cb76-17"><a href="#cb76-17"></a>  <span class="co">// because last is an empty string, it evaluates to false</span></span>
<span id="cb76-18"><a href="#cb76-18"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Enter your last name!&quot;</span>)<span class="op">;</span></span>
<span id="cb76-19"><a href="#cb76-19"></a>}</span></code></pre></div>
<p>In the above example we can say that <code>email</code> is
<em>truthy</em> because it evaluates to <code>true</code> even though it
doesn’t equal <code>true</code>. Likewise, <code>last</code> is
<em>falsy</em> — it evaluates to <code>false</code> because it’s an
empty string, not equal to <code>false</code>.</p>
<aside id="curly-braces">
<p><strong>Optional curly braces</strong></p>
<p>Curly braces in Javascript are optional of the block only has one
statement. This is the case for all blocks — following the
<code>function</code> header, <code>for</code> header, <code>if</code>
and <code>else</code>, and others we haven’t seen yet. While it is
uncommon for other types of blocks, it is not uncommon to see
<code>if</code> statements without curly braces. You may see:</p>
<div class="sourceCode" id="cb77"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="op">!</span>oldEnoughToDrive)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;You can&#39;t rent a car.&quot;</span>)<span class="op">;</span></span></code></pre></div>
<p>This is identical to</p>
<div class="sourceCode" id="cb78"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="op">!</span>oldEnoughToDrive) {</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;You can&#39;t rent a car.&quot;</span>)<span class="op">;</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Some programmers consider it bad practice to omit curly braces for
single statements, because it reduces readability and can lead to bugs.
We recommend always using curly braces for blocks and our examples in
this book follow this style.</p>
</aside>
</section>
<section id="logical-opposites" class="level2">
<h2>Logical opposites</h2>
<p>Each of the six relational operators has a logical opposite: for
example, suppose we can get a driving license when our age is greater or
equal to 16, we can <em>not</em> get the driving license when we are
less than 16.</p>
<p>Notice that the opposite of <code>&gt;=</code> is
<code>&lt;</code>.</p>
<table>
<thead>
<tr class="header">
<th>operator</th>
<th>logical opposite</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>===</td>
<td>!==</td>
</tr>
<tr class="even">
<td>!==</td>
<td>===</td>
</tr>
<tr class="odd">
<td>&lt;</td>
<td>&gt;=</td>
</tr>
<tr class="even">
<td>&lt;=</td>
<td>&gt;</td>
</tr>
<tr class="odd">
<td>&gt;</td>
<td>&lt;=</td>
</tr>
<tr class="even">
<td>&gt;=</td>
<td>&lt;</td>
</tr>
</tbody>
</table>
<p>Understanding these logical opposites allows us to sometimes get rid
of <code>!</code> operators. <code>!</code> operators are often quite
difficult to read in computer code, and our intentions will usually be
clearer if we can eliminate them.</p>
<p>For example, if we wrote this Javascript:</p>
<div class="sourceCode" id="cb79"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb79-1"><a href="#cb79-1"></a><span class="cf">if</span> (<span class="op">!</span>(age <span class="op">&gt;=</span> <span class="dv">16</span>)) {</span>
<span id="cb79-2"><a href="#cb79-2"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Hey, you&#39;re too young to get a driving license!&quot;</span>)<span class="op">;</span></span>
<span id="cb79-3"><a href="#cb79-3"></a>}</span></code></pre></div>
<p>it would probably be clearer to use the simplification laws, and to
write instead:</p>
<div class="sourceCode" id="cb80"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb80-1"><a href="#cb80-1"></a><span class="cf">if</span> (age <span class="op">&lt;</span> <span class="dv">16</span>) {</span>
<span id="cb80-2"><a href="#cb80-2"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Hey, you&#39;re too young to get a driving license!&quot;</span>)</span>
<span id="cb80-3"><a href="#cb80-3"></a>}</span></code></pre></div>
<p>Two powerful simplification laws (called de Morgan’s laws) that are
often helpful when dealing with complicated Boolean expressions are:</p>
<pre><code>!(x &amp;&amp; y)  ===  (!x) || (!y)
!(x || y)   ===  (!x) &amp;&amp; (!y)</code></pre>
<p>For example, suppose we can slay the dragon only if our magic
lightsabre sword is charged to 90% or higher, and we have 100 or more
energy units in our protective shield. We find this fragment of
Javascript code in the game:</p>
<div class="sourceCode" id="cb82"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb82-1"><a href="#cb82-1"></a><span class="cf">if</span> <span class="op">!</span>((swordCharge <span class="op">&gt;=</span> <span class="fl">0.90</span>) <span class="op">&amp;&amp;</span> (shieldEnergy <span class="op">&gt;=</span> <span class="dv">100</span>)) {</span>
<span id="cb82-2"><a href="#cb82-2"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Your attack has no effect, the dragon fries you to a crisp!&quot;</span>)<span class="op">;</span></span>
<span id="cb82-3"><a href="#cb82-3"></a>}</span>
<span id="cb82-4"><a href="#cb82-4"></a><span class="cf">else</span> {</span>
<span id="cb82-5"><a href="#cb82-5"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;The dragon crumples in a heap. You rescue the gorgeous prince!&quot;</span>)<span class="op">;</span></span>
<span id="cb82-6"><a href="#cb82-6"></a>}</span></code></pre></div>
<p>de Morgan’s laws together with the logical opposites would let us
rework the condition in a (perhaps) easier to understand way like
this:</p>
<div class="sourceCode" id="cb83"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb83-1"><a href="#cb83-1"></a><span class="cf">if</span> (swordCharge <span class="op">&lt;</span> <span class="fl">0.90</span>) <span class="op">||</span> (shieldEnergy <span class="op">&lt;</span> <span class="dv">100</span>) {</span>
<span id="cb83-2"><a href="#cb83-2"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Your attack has no effect, the dragon fries you to a crisp!&quot;</span>)<span class="op">;</span></span>
<span id="cb83-3"><a href="#cb83-3"></a>}</span>
<span id="cb83-4"><a href="#cb83-4"></a><span class="cf">else</span> {</span>
<span id="cb83-5"><a href="#cb83-5"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;The dragon crumples in a heap. You rescue the gorgeous prince!&quot;</span>)<span class="op">;</span></span>
<span id="cb83-6"><a href="#cb83-6"></a>}</span></code></pre></div>
<p>We could also get rid of the <code>!</code> by swapping around the
<code>then</code> and <code>else</code> parts of the conditional. So
here is a third version, also equivalent:</p>
<div class="sourceCode" id="cb84"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb84-1"><a href="#cb84-1"></a><span class="cf">if</span> (swordCharge <span class="op">&gt;=</span> <span class="fl">0.90</span>) <span class="fu">and</span> (shieldEnergy <span class="op">&gt;=</span> <span class="dv">100</span>) {</span>
<span id="cb84-2"><a href="#cb84-2"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;The dragon crumples in a heap. You rescue the gorgeous prince!&quot;</span>)<span class="op">;</span></span>
<span id="cb84-3"><a href="#cb84-3"></a>}</span>
<span id="cb84-4"><a href="#cb84-4"></a><span class="cf">else</span> {</span>
<span id="cb84-5"><a href="#cb84-5"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Your attack has no effect, the dragon fries you to a crisp!&quot;</span>)<span class="op">;</span></span>
<span id="cb84-6"><a href="#cb84-6"></a>}</span></code></pre></div>
<p>This last version is probably the best of the three, because it very
closely matches<br />
the initial English statement. Clarity of our code (for other humans),
and making it easy to see that the code does what we expect should
always be a high priority.</p>
<p>As our programming skills develop we’ll find we have more than one
way to solve any problem. So good programs are <em>designed</em>. We
make choices that favor clarity, simplicity, and elegance. The job title
<em>software architect</em> says a lot about what we do — we are
<em>architects</em> who engineer our products to balance beauty,
functionality, simplicity and clarity in our creations.</p>
<aside id="polish-code-tip">
<p><strong>Tip:</strong> Once our program works, we should play around a
bit trying to polish it up. Write good comments. Think about whether the
code would be clearer with different variable names. Could we have done
it more elegantly? Should we rather use a function? Can we simplify the
conditionals?</p>
We think of our code as our creation, our work of art! We make it great.
</aside>
</section>
<section id="glossary-4" class="level2">
<h2>Glossary</h2>
<dl>
<dt>block</dt>
<dd>
<p>A group of consecutive statements with the same indentation.</p>
</dd>
<dt>body</dt>
<dd>
<p>The block of statements in a compound statement that follows the
header.</p>
</dd>
<dt>Boolean algebra</dt>
<dd>
<p>Some rules for rearranging and reasoning about Boolean
expressions.</p>
</dd>
<dt>Boolean expression</dt>
<dd>
<p>An expression that is either true or false.</p>
</dd>
<dt>Boolean value</dt>
<dd>
<p>There are exactly two Boolean values: <code>true</code> and
<code>false</code>. Boolean values result when a Boolean expression is
evaluated by the Javascript interpreter. They have type
<code>'boolean'</code>.</p>
</dd>
<dt>branch</dt>
<dd>
<p>One of the possible paths of the flow of execution determined by
conditional execution.</p>
</dd>
<dt>chained conditional</dt>
<dd>
<p>A conditional branch with more than two possible flows of execution.
In Javascript chained conditionals are written with
<code>if ... else if ... else</code> statements.</p>
</dd>
<dt>comparison operator</dt>
<dd>
<p>Javascript operators that compare two values: <code>===</code>,
<code>!==</code>, <code>&gt;</code>, <code>&lt;</code>,
<code>&gt;=</code>, and <code>&lt;=</code>.</p>
</dd>
<dt>condition</dt>
<dd>
<p>The Boolean expression in a conditional statement that determines
which branch is executed.</p>
</dd>
<dt>conditional statement</dt>
<dd>
<p>A statement that controls the flow of execution depending on some
condition. In Javascript the keywords <code>if</code>,
<code>else if</code>, and <code>else</code> are used for conditional
statements.</p>
</dd>
<dt>logical operator</dt>
<dd>
<p>One of the operators that combines Boolean expressions: (and)
<code>&amp;&amp;</code>, (or) <code>||</code>, and (not)
<code>!</code>.</p>
</dd>
<dt>nesting</dt>
<dd>
<p>One program structure within another, such as a conditional statement
inside a branch of another conditional statement.</p>
</dd>
<dt>prompt</dt>
<dd>
<p>A visual cue that tells the user that the system is ready to accept
input data.</p>
</dd>
<dt>truth table</dt>
<dd>
<p>A concise table of Boolean values that can describe the semantics of
an operator.</p>
</dd>
<dt>type conversion</dt>
<dd>
<p>An explicit function call that takes a value of one type and computes
a corresponding value of another type.</p>
</dd>
<dt>wrapping code in a function</dt>
<dd>
<p>The process of adding a function header and parameters to a sequence
of program statements is often referred to as “wrapping the code in a
function”. This process is very useful whenever the program statements
in question are going to be used multiple times. It is even more useful
when it allows the programmer to express their mental chunking, and how
they’ve broken a complex problem into pieces.</p>
</dd>
</dl>
</section>
<section id="conditional-exercises" class="level2">
<h2>Conditional Exercises</h2>
<p><a href="https://repl.it/@mcuringa/conditionals-exercises">You can
use this repl for your exercises</a></p>
<ol type="1">
<li><p>Assume the days of the week are numbered 0,1,2,3,4,5,6 from
Sunday to Saturday. Write a function which is given the day number, and
it returns the day name (a string).</p></li>
<li><p>You go on a wonderful vacation leaving on day number 3 (a
Wednesday). You return home after 22 nights sleep. What day of the week
is it? Write a general version of the program which asks for the
starting day number, and the length of your stay, and it will tell you
the name of day of the week you will return on. You might want to use
the <code>%</code> mod operator. You can compose this function from the
one you wrote in exercise 1.</p></li>
<li><p>Give the logical opposites of these conditions</p>
<ol type="a">
<li><code>a &gt; b</code></li>
<li><code>a &gt;= b</code></li>
<li><code>a &gt;= 18  and  day == 3</code></li>
<li><code>a &gt;= 18  and  day != 3</code></li>
</ol></li>
<li><p>What do these expressions evaluate to?</p>
<ol type="a">
<li><code>3 === 3</code></li>
<li><code>3 !== 3</code></li>
<li><code>3 &gt;= 4</code></li>
<li><code>!(3 &lt; 4)</code></li>
</ol></li>
<li><p>Write a function which is given an exam score, and it returns a
string — the letter grade for that mark — according to this scheme:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Score</th>
<th style="text-align: left;">Grade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">90-100</td>
<td style="text-align: left;">A</td>
</tr>
<tr class="even">
<td style="text-align: left;">80-89</td>
<td style="text-align: left;">B</td>
</tr>
<tr class="odd">
<td style="text-align: left;">70-79</td>
<td style="text-align: left;">C</td>
</tr>
<tr class="even">
<td style="text-align: left;">65-69</td>
<td style="text-align: left;">D</td>
</tr>
<tr class="odd">
<td style="text-align: left;">&lt;65</td>
<td style="text-align: left;">F</td>
</tr>
</tbody>
</table></li>
<li><p>(hard bonus) Write a function <code>isRightAngled</code> which,
given the length of three sides of a triangle, will determine whether
the triangle is right-angled. Assume that the third argument to the
function is always the longest side. It will return <code>true</code> if
the triangle is right-angled, or <code>false</code> otherwise.<br> Hint:
Floating point arithmetic is not always exactly accurate, so it is not
safe to test floating point numbers for equality. If a good programmer
wants to know whether <code>x</code> is equal or close enough to
<code>y</code>, they would probably code it up as:<br></p>
<div class="sourceCode" id="cb85"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(x<span class="op">-</span>y) <span class="op">&lt;</span> <span class="fl">0.000001</span>) {</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// x is approximately equal to y</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>}     </span></code></pre></div>
<p>If you’re intrigued by why floating point arithmetic is sometimes
inaccurate, on a piece of paper, divide 10 by 3 and write down the
decimal result. You’ll find it does not terminate, so you’ll need an
infinitely long sheet of paper. The <em>representation</em> of numbers
in computer memory or on your calculator has similar problems: memory is
finite, and some digits may have to be discarded, so small inaccuracies
creep in. Try this script:</p>
<div class="sourceCode" id="cb86"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb86-1"><a href="#cb86-1"></a><span class="kw">let</span> a <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(<span class="fl">2.0</span>)<span class="op">;</span></span>
<span id="cb86-2"><a href="#cb86-2"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(a<span class="op">,</span> a<span class="op">*</span>a)<span class="op">;</span></span>
<span id="cb86-3"><a href="#cb86-3"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(a<span class="op">*</span>a <span class="op">===</span> <span class="fl">2.0</span>)<span class="op">;</span></span></code></pre></div></li>
</ol>
</section>
<section id="conditionals-lab" class="level2">
<h2>Conditionals Lab</h2>
<p>This section describes three lab assignments that ask you to write
larger programs that are organized into several functions. To complete
these labs you will combine what you have learned about variables and
expressions, functions, and conditional Boolean expressions.</p>
<section id="lab-1-bmi-calculator-lab" class="level3">
<h3>Lab 1: BMI Calculator Lab</h3>
<p><a href="https://en.wikipedia.org/wiki/Body_mass_index">Body Mass
Index (BMI)</a> is a ratio of weight to height (squared) that public
health and other organizations use as a guide for healthy weights. It is
expressed as
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>m</mi><mi>a</mi><mi>s</mi><mi>s</mi></mrow><mrow><mi>h</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><msup><mi>t</mi><mn>2</mn></msup></mrow></mfrac><mo>=</mo><mi>B</mi><mi>M</mi><mi>I</mi></mrow><annotation encoding="application/x-tex">\frac{mass}{height^{2}} =BMI</annotation></semantics></math>
In this lab you will write a BMI calculator that asks the user for their
age, height, and weight. You will calculate their BMI and then report a
message indicating if they are at risk for being underweight, healthy
weight, overweight, or obese.</p>
<p>BMI can be calculated using metric or SI measurements for height and
weitht. The standard <em>index</em> comes from metric units:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>m</mi><mi>a</mi><mi>s</mi><mi>s</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>k</mi><mi>g</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>h</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>m</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mfrac><mo>=</mo><mi>B</mi><mi>M</mi><mi>I</mi></mrow><annotation encoding="application/x-tex">\frac{mass(kg)}{(height(m))^{2}} = BMI</annotation></semantics></math>
If you choose to use SI rather than metric measurements, you can use
inches as the units for height and pounds as the unit for weight, and
then convert the result by multiplying by the constant <code>703</code>.
The formula would be:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>m</mi><mi>a</mi><mi>s</mi><mi>s</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>l</mi><mi>b</mi><mi>s</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>h</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>i</mi><mi>n</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mfrac><mo>×</mo><mn>703</mn><mo>=</mo><mi>B</mi><mi>M</mi><mi>I</mi></mrow><annotation encoding="application/x-tex">\frac{mass(lbs)}{(height(in))^{2}} \times 703 = BMI</annotation></semantics></math></p>
<p>BMI for children and teens is more complicated, so you will not
calculate it for this lab. Instead, if the age is &lt; 20, you should
show the user a message that indicates that your calculator is only for
adults.</p>
<p>Once you have calculated the user’s BMI, you should use the following
chart to determine which weight category they are in. Use this
table:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">BMI</th>
<th style="text-align: left;">Category</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">&lt; 18.5</td>
<td style="text-align: left;">underweight</td>
</tr>
<tr class="even">
<td style="text-align: left;">18.5-24.9</td>
<td style="text-align: left;">normal weight</td>
</tr>
<tr class="odd">
<td style="text-align: left;">25-29.9</td>
<td style="text-align: left;">overweight</td>
</tr>
<tr class="even">
<td style="text-align: left;">&gt; 29.9</td>
<td style="text-align: left;">obese</td>
</tr>
</tbody>
</table>
</section>
<section id="lab-2-simplified-chinese-birth-animals" class="level3">
<h3>Lab 2: Simplified Chinese Birth Animals</h3>
<p>Chinese animal signs are determined based on the year of birth and
repeat on a 12 year cycle. For this lab, we are going to write a program
that asks the user the year they were born and then tells them their
animal sign. We will use a simplified version of the calendar which
matches animal-year to the Western calendar year. Use the table below
for the starting years (and then each animal repeats 12 years later).
You will want to use the mod <code>%</code> operator for this
problem.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Animal</th>
<th style="text-align: left;">Birth Year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Rat</td>
<td style="text-align: left;">1924</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ox</td>
<td style="text-align: left;">1925</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Tiger</td>
<td style="text-align: left;">1926</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rabbit</td>
<td style="text-align: left;">1927</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dragon</td>
<td style="text-align: left;">1928</td>
</tr>
<tr class="even">
<td style="text-align: left;">Snake</td>
<td style="text-align: left;">1929</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Horse</td>
<td style="text-align: left;">1930</td>
</tr>
<tr class="even">
<td style="text-align: left;">Goat</td>
<td style="text-align: left;">1931</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Monkey</td>
<td style="text-align: left;">1932</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rooster</td>
<td style="text-align: left;">1933</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dog</td>
<td style="text-align: left;">1934</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pig</td>
<td style="text-align: left;">1935</td>
</tr>
</tbody>
</table>
</section>
<section id="lab-3-bouncing-turtle" class="level3">
<h3>Lab 3: Bouncing turtle</h3>
<p>This may be an interesting problem if you are comfortable with
geometry and trigonometry. In this lab you’ll revisit the
<code>randomWalk</code> program that we worked on in our <em>turtle
graphics</em>. In the <code>randomWalk</code> the turtle moves in a loop
where it chooses a random angle to turn and a random distance for each
iteration of the loop. You will modify <code>randomWalk</code> so that
the turtle “bounces” when it reaches the edge of the screen. By bounce,
the turtle should advance to the edge of the screen (aka canvas) and
then turn to the <a
href="https://www.physicsclassroom.com/class/refln/Lesson-1/The-Law-of-Reflection">angle
of reflection</a> away from the edge. To finish its “walk”, it should
then move forward for whatever distance remains for this iteration. Some
hints:</p>
<p>https://repl.it/<span class="citation"
data-cites="mcuringa/Random-Walk">@mcuringa/Random-Walk</span></p>
<ul>
<li>Determine the maximum and minimum <code>x</code> and <code>y</code>
that allow the turtle to stay on the screen. The turtle canvas
dimensions are <code>1920 x 1280</code></li>
<li><em>Before</em> the turtle moves forward, you will have to calculate
the ending <code>x</code>, <code>y</code> and determine if it’s on the
screen or off the screen</li>
<li>you will need to use <code>getHeading()</code> to make this
calculation</li>
<li>you will need to use the trigonometry functions in <a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math">the
Javascript Math library</a></li>
</ul>
</section>
</section>
</section>
<section id="iteration-with-for-loops" class="level1">
<h1>Iteration with <code>for</code> loops</h1>
<section id="running-loops" class="level2">
<h2>Running loops</h2>
<p>Computers are often used to automate repetitive tasks. Repeating
identical or similar tasks without making errors is something that
computers do well and people do poorly.</p>
<p>Repeated execution of a set of statements is called
<strong>iteration</strong>. Because iteration is so common, Javascript
provides several language features to make it easier. The
<code>for</code> loop is the form of iteration you’ll likely be using
most often, and we will look at that first. In the next chapter we’ve
going to look at the <code>while</code> statement — another way to have
your program repeat code. After you understand both <code>for</code> and
<code>while</code> loops, you will be able to use them both to solve
problems.</p>
</section>
<section id="the-for-loop" class="level2">
<h2>The <code>for</code> loop</h2>
<p>A basic building block of all programs is to be able to repeat some
code, over and over again. Javascript’s <strong>for</strong> loop solves
this for us. The syntax for the <code>for</code> loop is:</p>
<div class="sourceCode" id="cb87"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="kw">(</span><span class="ex">[initialization]</span><span class="kw">;</span> <span class="ex">[loop</span> condition]<span class="kw">;</span> <span class="ex">[final-expression]</span><span class="kw">)</span> <span class="kw">{</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">loop</span> body</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<p>We can see that <code>for</code> follows the familiar pattern for
<strong>block statements</strong> that we have already seen for
<em>functions</em> and <em>if</em>/<em>else</em> statements, with a
header and then body between opening and closing curly braces ({}); In
the case of <code>for</code>, the header contains 3 statements inside
the parenthesis.</p>
<ol type="1">
<li>The <strong>initialization</strong> statement is called exactly
once: the first time the program reaches the for statement.</li>
<li>The <strong>loop condition</strong> is tested before each iteration
of the loop. If <code>true</code>, the <strong>loop body</strong>
executes. The loop body may contain any number of Javascript
statements.</li>
<li>After the loop body statements are executed, the <strong>final
expression</strong> is called. Typically this expression
<em>increments</em> (adds to) or <em>decrements</em> (subtracts from)
the loop variable. After the final expression is called, the loop
condition is checked again to see if the loop should continue or
<em>terminate</em>.</li>
</ol>
<p>We have already played around with the <code>for</code> loop with our
turtle graphics when we were looking at the variables in a spiral. Let’s
take a closer look at this function which contains a for loop.</p>
<figure class="figure">
<img src="figs/turtle-spiral.png" class="figure-img img-fluid" alt="Square spiral created with turtle graphics code.">
<figcaption class="figure-caption">
Our <code>spiral</code> function (below) uses a <code>for</code> loop to
draw this design. <a href="https://repl.it/@mcuringa/turtle-spiral">Try
it and remix it here.</a>
</figcaption>
</figure>
<div class="sourceCode" id="cb88"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb88-1"><a href="#cb88-1"></a><span class="kw">function</span> <span class="fu">spiral</span> () {</span>
<span id="cb88-2"><a href="#cb88-2"></a>  <span class="fu">setColor</span>(<span class="st">&quot;deeppink&quot;</span>)</span>
<span id="cb88-3"><a href="#cb88-3"></a>  <span class="kw">let</span> distance <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb88-4"><a href="#cb88-4"></a>  <span class="kw">let</span> angle <span class="op">=</span> <span class="dv">91</span><span class="op">;</span></span>
<span id="cb88-5"><a href="#cb88-5"></a>  <span class="cf">for</span> (<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">&lt;</span><span class="dv">500</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb88-6"><a href="#cb88-6"></a>    <span class="fu">fd</span>(distance)<span class="op">;</span></span>
<span id="cb88-7"><a href="#cb88-7"></a>    distance <span class="op">+=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb88-8"><a href="#cb88-8"></a>    <span class="fu">rt</span>(angle)<span class="op">;</span></span>
<span id="cb88-9"><a href="#cb88-9"></a>  }</span>
<span id="cb88-10"><a href="#cb88-10"></a>}</span></code></pre></div>
<ul>
<li>The variable <code>i</code> in the <code>for</code> statement at
line 5 is the <strong>loop variable</strong>. We could have chosen any
other variable name instead, but <code>i</code> is a common convention,
being short for the loop <em>index</em>.</li>
<li>The <strong>loop initialization</strong> assigns the loop variable
its starting value: <code>let i = 0;</code></li>
<li>The indented lines between the curly braces form the <strong>loop
body</strong>. <code>spiral</code>’s loop body contains 3 statements
which (line 5) move the turtle forward, (line 6) increment the
<code>distance</code> variable, and (line 7) rotate the turtle.</li>
<li>At the <em>beginning</em> of each <em>iteration</em> or
<em>pass</em> of the loop, the Javascript interpreter checks the
<strong>loop condition</strong>. If <code>true</code> the loop runs for
another iteration. If <code>false</code>, the loop terminates.</li>
<li>At the <em>end</em> of each execution of the body of the loop,
Javascript returns to the <code>for</code> header to run the
<strong>final expression</strong>. The final expression here increments
<code>i</code> by one, using the special <code>++</code> operator.</li>
<li>Finally, when the loop condition is false, the program continues
beyond the closing curly brace. In <code>spiral</code>, since there are
no other statements in the function body, the function returns
<code>undefined</code> since it is a <em>void function</em>.</li>
</ul>
</section>
<section id="assignment" class="level2">
<h2>Assignment</h2>
<p>As we have mentioned previously, it is legal to make more than one
assignment to the same variable. A new assignment makes an existing
variable refer to a new value (and stop referring to the old value).</p>
<div class="sourceCode" id="cb89"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb89-1"><a href="#cb89-1"></a><span class="kw">let</span> airTimeRemaining <span class="op">=</span> <span class="dv">15</span><span class="op">;</span></span>
<span id="cb89-2"><a href="#cb89-2"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(airTimeRemaining)<span class="op">;</span></span>
<span id="cb89-3"><a href="#cb89-3"></a>airTimeRemaining <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb89-4"><a href="#cb89-4"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(airTimeRemaining)<span class="op">;</span></span></code></pre></div>
<p>The output of this program is:</p>
<div class="sourceCode" id="cb90"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="ex">15</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span></span></code></pre></div>
<p>because the first time <code>airTimeRemaining</code> is printed, its
value is 15, and the second time, its value is 7.</p>
<p>It is especially important to distinguish between an assignment
statement and a Boolean expression that tests for equality. Because
Javascript uses the equal token (<code>=</code>) for assignment, it is
tempting to interpret a statement like <code>a = b</code> as a Boolean
test. Unlike mathematics, it is not! Remember that the Javascript token
for the equality operator is <code>===</code>.</p>
<p>Note too that an equality test is symmetric, but assignment is not.
For example, if <code>a === 7</code> then <code>7 === a</code>. But in
Javascript, the statement <code>a = 7</code> is legal and
<code>7 = a</code> is not.</p>
<p>In Javascript, an assignment statement can make two variables equal,
but because further assignments can change either of them, they don’t
have to stay that way:</p>
<div class="sourceCode" id="cb91"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb91-1"><a href="#cb91-1"></a><span class="kw">let</span> a <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb91-2"><a href="#cb91-2"></a><span class="kw">let</span> b <span class="op">=</span> a<span class="op">;</span>    <span class="co">// After executing this line, a and b are now equal</span></span>
<span id="cb91-3"><a href="#cb91-3"></a>a <span class="op">=</span> <span class="dv">3</span><span class="op">;</span>    <span class="co">// After executing this line, a and b are no longer equal</span></span></code></pre></div>
<p>The third line changes the value of <code>a</code> but does not
change the value of <code>b</code>, so they are no longer equal. (In
some programming languages, a different symbol is used for assignment,
such as <code>&lt;-</code> or <code>:=</code>, to avoid confusion. Some
people also think that <em>variable</em> was an unfortunate word to
choose, and instead we should have called them <em>assignables</em>.
Javascript chooses to follow common terminology and token usage, also
found in languages like C, C++, Java, and C#, so we use the tokens
<code>=</code> for assignment, <code>==</code> (or <code>===</code>
which we prefer in Javascript) for equality, and we talk of
<em>variables</em>.</p>
</section>
<section id="updating-variables" class="level2">
<h2>Updating variables</h2>
<p>When an assignment statement is executed, the right-hand side
expression (i.e. the expression that comes after the assignment token)
is evaluated first. This produces a value. Then the assignment is made,
so that the variable on the left-hand side now refers to the new
value.</p>
<p>One of the most common forms of assignment is an update, where the
new value of the variable depends on its old value. Deduct 40 cents from
my airtime balance, or add one run to the scoreboard.</p>
<div class="sourceCode" id="cb92"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb92-1"><a href="#cb92-1"></a><span class="kw">let</span> n <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb92-2"><a href="#cb92-2"></a>n <span class="op">=</span> <span class="dv">3</span> <span class="op">*</span> n <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span></code></pre></div>
<p>Line 2 means
<code>get the current value of n, multiply it by three and add one, and assign the answer to n, thus making n refer to the value</code>.<br />
So after executing the two lines above, <code>n</code> will point/refer
to the integer 16.</p>
<p>If you try to get the value of a variable that has never been
assigned to, you’ll get an error:</p>
<div class="sourceCode" id="cb93"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> w <span class="op">=</span> x <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="bu">ReferenceError</span><span class="op">:</span> x is not defined</span></code></pre></div>
<p>Before you can update a variable, you have to
<strong>initialize</strong> it to some starting value, usually with a
simple assignment:</p>
<div class="sourceCode" id="cb94"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb94-1"><a href="#cb94-1"></a><span class="kw">let</span> runsScored <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb94-2"><a href="#cb94-2"></a><span class="op">...</span></span>
<span id="cb94-3"><a href="#cb94-3"></a>runsScored <span class="op">=</span> runsScored <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span></code></pre></div>
<p>Line 3 — updating a variable by adding 1 to it — is very
common.<br />
It is called an <strong>increment</strong> of the variable; subtracting
1 is called a <strong>decrement</strong>.<br />
Sometimes programmers also talk about <em>bumping</em> a variable, which
means the same as incrementing it by 1.</p>
</section>
<section id="abbreviated-assignment" class="level2">
<h2>Abbreviated assignment</h2>
<p>Incrementing a variable is so common that Javascript provides an
abbreviated syntax for it:</p>
<div class="sourceCode" id="cb95"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>⠕ count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>⠕ count<span class="op">++;</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>⠕ count<span class="op">;</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span></span></code></pre></div>
<p><code>count++</code> is an abreviation for
<code>count = count + 1</code>. We pronounce the operator as
<em>“plus-plus”</em>. Javascript offers a different operator
(<code>+=</code> pronounced <em>“plus-equals”</em>) for increment values
other than 1:</p>
<div class="sourceCode" id="cb96"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>⠕ n <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>⠕ n <span class="op">+=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>⠕ n<span class="op">;</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span></span></code></pre></div>
<p>There are similar abbreviations for <code>--</code>, <code>-=</code>,
<code>*=</code>, <code>/=</code>, and <code>%=</code>:</p>
<div class="sourceCode" id="cb97"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>⠕ n <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>⠕ n<span class="op">--;</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>⠕ n<span class="op">;</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>⠕ n <span class="op">*=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>⠕ n<span class="op">;</span></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>⠕ n <span class="op">-=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>⠕ n<span class="op">;</span></span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>⠕ n <span class="op">%=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a>⠕ n<span class="op">;</span></span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span></span></code></pre></div>
</section>
<section id="tables" class="level2">
<h2>Tables</h2>
<p>One of the things loops are good for is generating tables. Before
computers were readily available, people had to calculate logarithms,
sines and cosines, and other mathematical functions by hand. To make
that easier, mathematics books contained long tables listing the values
of these functions. Creating the tables was slow and boring, and they
tended to be full of errors.</p>
<p>When computers appeared on the scene, one of the initial reactions
was, <em>“This is great! We can use the computers to generate the
tables, so there will be no errors.”</em> That turned out to be true
(mostly) but shortsighted. Soon thereafter, computers and calculators
were so pervasive that the tables became obsolete.</p>
<p>Well, almost. For some operations, computers use tables of values to
get an approximate answer and then perform computations to improve the
approximation. In some cases, there have been errors in the underlying
tables, most famously in the table the Intel Pentium processor chip used
to perform floating-point division.</p>
<p>Although a log table is not as useful as it once was, it still makes
a good example of iteration. The following program outputs a sequence of
values in the left column and 2 raised to the power of that value in the
right column:</p>
<div class="sourceCode" id="cb98"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb98-1"><a href="#cb98-1"></a><span class="cf">for</span> (<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">&lt;</span><span class="dv">13</span><span class="op">;</span> i<span class="op">++</span>) {  <span class="co">// Generate numbers 0 to 12</span></span>
<span id="cb98-2"><a href="#cb98-2"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(i <span class="op">+</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span> <span class="op">+</span> <span class="dv">2</span><span class="op">**</span>i)<span class="op">;</span></span>
<span id="cb98-3"><a href="#cb98-3"></a>}</span></code></pre></div>
<p>The string <code>"\t"</code> represents a <strong>tab
character</strong>. The backslash character in <code>"\t"</code>
indicates the beginning of an <strong>escape sequence</strong>. Escape
sequences are used to represent invisible characters like tabs and
newlines. The sequence <code>\n</code> represents a
<strong>newline</strong>, breaking a string onto the next line.</p>
<p>An escape sequence can appear anywhere in a string; in this example,
the tab escape sequence is the only thing in the string. How do you
think you represent a backslash in a string?</p>
<p>As characters and strings are displayed on the screen, an invisible
marker called the <strong>cursor</strong> keeps track of where the next
character will go. After calling <code>console.log</code>, the cursor
normally goes to the beginning of the next line.</p>
<p>The tab character shifts the cursor to the right until it reaches one
of the tab stops. Tabs are useful for making columns of text line up, as
in the output of the previous program:</p>
<div class="sourceCode" id="cb99"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>     1</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>     2</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>     4</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>     8</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>     16</span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>     32</span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>     64</span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>     128</span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a><span class="ex">8</span>     256</span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a><span class="ex">9</span>     512</span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a><span class="ex">10</span>    1024</span>
<span id="cb99-12"><a href="#cb99-12" aria-hidden="true" tabindex="-1"></a><span class="ex">11</span>    2048</span>
<span id="cb99-13"><a href="#cb99-13" aria-hidden="true" tabindex="-1"></a><span class="ex">12</span>    4096</span></code></pre></div>
<p>Because of the tab characters between the columns, the position of
the second column does not depend on the number of digits in the first
column.</p>
</section>
<section id="two-dimensional-tables" class="level2">
<h2>Two-dimensional tables</h2>
<p>A two-dimensional table is a table where you read the value at the
intersection of a row and a column. A multiplication table is a good
example. Let’s say you want to print a multiplication table for the
values from 1 to 6.</p>
<p>A good way to start is to write a loop that prints the multiples of
2, all on one line. Because <code>console.log</code> moves the cursor to
the next line, we’re going to accumulate our data into a string
variable, and then print out the whole row with a call to
<code>console.log</code>.</p>
<div class="sourceCode" id="cb100"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb100-1"><a href="#cb100-1"></a><span class="kw">let</span> row <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span>     </span>
<span id="cb100-2"><a href="#cb100-2"></a><span class="cf">for</span> (<span class="kw">let</span> i<span class="op">=</span><span class="dv">1</span><span class="op">;</span> i<span class="op">&lt;</span><span class="dv">7</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb100-3"><a href="#cb100-3"></a>  row <span class="op">+=</span> (<span class="dv">2</span> <span class="op">*</span> i) <span class="op">+</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb100-4"><a href="#cb100-4"></a>}</span>
<span id="cb100-5"><a href="#cb100-5"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(row)<span class="op">;</span></span></code></pre></div>
<p>Here we initialized our loop variable <code>i</code> to 1 rather than
0 because we want to start counting from 1. As the loop executes, the
value of <code>i</code> changes from 1 to 6. When <code>i</code> is
incremented to 7, the loop terminates. Each time through the loop, it
displays the value of <code>2 * i</code>, followed by the tab escape
character.</p>
<p>We use the <code>+=</code> operator to <strong>concatenate</strong>
each value of <code>i * 2</code> to the string <code>row</code>. After
our <code>for</code> statement terminates, we print the results with
<code>console.log</code>.</p>
<p>The output of the program is:</p>
<div class="sourceCode" id="cb101"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>   4   6  8    10    12</span></code></pre></div>
<p>So far, so good. The next step is to <strong>encapsulate</strong> and
<strong>generalize</strong>.</p>
</section>
<section id="encapsulation-and-generalization" class="level2">
<h2>Encapsulation and generalization</h2>
<p><strong>Encapsulation</strong> is the process of wrapping a piece of
code in a function, allowing you to take advantage of all the things
functions are good for. You have already seen some examples of
encapsulation, including including the <code>square</code> function for
our turtle graphics.</p>
<p><strong>Generalization</strong> means taking something specific, such
as printing the multiples of 2, and making it more general or
<strong>abstract</strong>, such as printing the multiples of any
integer. We can use function parameters to accomplish generalization and
abstraction.</p>
<p>This function encapsulates the previous loop and generalizes it to
print multiples of <code>n</code>:</p>
<div class="sourceCode" id="cb102"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb102-1"><a href="#cb102-1"></a><span class="kw">function</span> <span class="fu">printMultiples</span> (n) {</span>
<span id="cb102-2"><a href="#cb102-2"></a>  <span class="kw">let</span> row <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span>     </span>
<span id="cb102-3"><a href="#cb102-3"></a>  <span class="cf">for</span> (<span class="kw">let</span> i<span class="op">=</span><span class="dv">1</span><span class="op">;</span> i<span class="op">&lt;</span><span class="dv">7</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb102-4"><a href="#cb102-4"></a>    row <span class="op">+=</span> (n <span class="op">*</span> i) <span class="op">+</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb102-5"><a href="#cb102-5"></a>  }</span>
<span id="cb102-6"><a href="#cb102-6"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(row)<span class="op">;</span></span>
<span id="cb102-7"><a href="#cb102-7"></a>}</span></code></pre></div>
<p>To encapsulate, all we had to do was add the first line, which
declares the name of the function and the parameter list. To generalize,
all we had to do was replace the value 2 with the parameter
<code>n</code>.</p>
<p>If we call this function with the argument 2, we get the same output
as before. With the argument 3, the output is:</p>
<div class="sourceCode" id="cb103"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>   6   9  12   15  18</span></code></pre></div>
<p>With the argument 4, the output is:</p>
<div class="sourceCode" id="cb104"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>   8   12   16   20   24</span></code></pre></div>
<p>By now you can probably guess how to print a multiplication table —
by calling <code>printMultiples</code> repeatedly with different
arguments. In fact, we can use another loop:</p>
<div class="sourceCode" id="cb105"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb105-1"><a href="#cb105-1"></a><span class="cf">for</span> (<span class="kw">let</span> i<span class="op">=</span><span class="dv">1</span><span class="op">;</span> i<span class="op">&lt;</span><span class="dv">7</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb105-2"><a href="#cb105-2"></a>  <span class="fu">printMultiples</span>(i)<span class="op">;</span></span>
<span id="cb105-3"><a href="#cb105-3"></a>}</span></code></pre></div>
<p>Notice how similar this loop is to the one inside
<code>printMultiples</code>. All we did was replace the
<code>print</code> function with a function call.</p>
<p>The output of this program is a multiplication table:</p>
<div class="sourceCode" id="cb106"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>    2     3     4     5     6</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>    4     6     8     10    12</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>    6     9     12    15    18</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>    8     12    16    20    24</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>    10    15    20    25    30</span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>    12    18    24    30    36</span></code></pre></div>
</section>
<section id="more-encapsulation-and-generalization" class="level2">
<h2>More encapsulation and generalization</h2>
<p>To demonstrate encapsulation again, let’s take the code from the last
section and wrap it up in a function:</p>
<div class="sourceCode" id="cb107"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb107-1"><a href="#cb107-1"></a><span class="kw">function</span> <span class="fu">printMultTable</span> () {</span>
<span id="cb107-2"><a href="#cb107-2"></a>  <span class="cf">for</span> (<span class="kw">let</span> i<span class="op">=</span><span class="dv">1</span><span class="op">;</span> i<span class="op">&lt;</span><span class="dv">7</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb107-3"><a href="#cb107-3"></a>    <span class="fu">printMultiples</span>(i)<span class="op">;</span></span>
<span id="cb107-4"><a href="#cb107-4"></a>  }</span>
<span id="cb107-5"><a href="#cb107-5"></a>}</span></code></pre></div>
<p>With our <code>printMultTable</code> we encapsulate the code for
printing the multiplication table.</p>
<p>This process is a common <strong>development plan</strong>. We
develop code by writing lines of code outside any function, or typing
them in to the interpreter. When we get the code working, we extract it
and wrap it up in a function.</p>
<p>This development plan is particularly useful if you don’t know how to
divide the program into functions when you start writing. This approach
lets you design as you go along.</p>
</section>
<section id="local-variables" class="level2">
<h2>Local variables</h2>
<p>You might be wondering how we can use the same variable,
<code>i</code>, in both <code>printMultiples</code> and
<code>printMultTable</code>. Doesn’t it cause problems when one of the
functions changes the value of the variable?</p>
<p>The answer is no, because the <code>i</code> in
<code>printMultiples</code> and the <code>i</code> in
<code>printMultTable</code> are <em>not</em> the same variable.</p>
<p>Variables declared with <code>let</code> inside a function definition
are local; you can’t access a local variable from outside its home
function. That means you are free to have multiple variables with the
same name as long as they are not in the same function.</p>
<p>It is common and perfectly legal to have different local variables
with the same name. In particular, names like <code>i</code> and
<code>j</code> are used frequently as loop variables. If you avoid using
them in one function just because you used them somewhere else, you will
probably make the program harder to read.</p>
</section>
<section id="more-generalization" class="level2">
<h2>More generalization</h2>
<p>As another example of generalization, imagine you wanted a program
that would print a multiplication table of any size, not just the
six-by-six table. You could add a parameter to
<code>printMultTable</code>:</p>
<div class="sourceCode" id="cb108"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb108-1"><a href="#cb108-1"></a><span class="kw">function</span> <span class="fu">printMultTable</span> (high) {</span>
<span id="cb108-2"><a href="#cb108-2"></a>  <span class="cf">for</span> (<span class="kw">let</span> i<span class="op">=</span><span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> high<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb108-3"><a href="#cb108-3"></a>    <span class="fu">printMultiples</span>(i)<span class="op">;</span></span>
<span id="cb108-4"><a href="#cb108-4"></a>  }</span>
<span id="cb108-5"><a href="#cb108-5"></a>}</span></code></pre></div>
<p>We replaced the loop condition <code>i&lt;7</code> to use the
parameter <code>high</code>. Because we want to print upt to and
including <code>high</code>, we changed the Boolean operator from
<code>&lt;</code> to <code>&lt;=</code>. If we call
<code>printMultTable</code> with the argument 7, it displays:</p>
<div class="sourceCode" id="cb109"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>   2     3     4     5     6</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>   4     6     8     10    12</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>   6     9     12    15    18</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>   8     12    16    20    24</span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>   10    15    20    25    30</span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>   12    18    24    30    36</span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>   14    21    28    35    42</span></code></pre></div>
<p>This is fine, except that we probably want the table to be square —
with the same number of rows and columns. We have <code>high</code>
number of rows, but our old version of <code>printMultiples</code> stops
at the literal value <code>&lt;7</code>. To do improve our code, we add
another parameter to <code>printMultiples</code> to specify how many
columns the table should have.</p>
<p>Just to be annoying, we call this parameter <code>high</code>,
demonstrating that different functions can have parameters with the same
name (just like local variables). Here’s the whole program:</p>
<div class="sourceCode" id="cb110"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb110-1"><a href="#cb110-1"></a><span class="kw">function</span> <span class="fu">printMultiples</span> (n<span class="op">,</span> high) {</span>
<span id="cb110-2"><a href="#cb110-2"></a>  <span class="kw">let</span> row <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span>     </span>
<span id="cb110-3"><a href="#cb110-3"></a>  <span class="cf">for</span> (<span class="kw">let</span> i<span class="op">=</span><span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> high<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb110-4"><a href="#cb110-4"></a>    row <span class="op">+=</span> (n <span class="op">*</span> i) <span class="op">+</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb110-5"><a href="#cb110-5"></a>  }</span>
<span id="cb110-6"><a href="#cb110-6"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(row)<span class="op">;</span></span>
<span id="cb110-7"><a href="#cb110-7"></a>}</span>
<span id="cb110-8"><a href="#cb110-8"></a></span>
<span id="cb110-9"><a href="#cb110-9"></a><span class="kw">function</span> <span class="fu">printMultTable</span> (high) {</span>
<span id="cb110-10"><a href="#cb110-10"></a>  <span class="cf">for</span> (<span class="kw">let</span> i<span class="op">=</span><span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> high<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb110-11"><a href="#cb110-11"></a>    <span class="fu">printMultiples</span>(i<span class="op">,</span> high)<span class="op">;</span></span>
<span id="cb110-12"><a href="#cb110-12"></a>  }</span>
<span id="cb110-13"><a href="#cb110-13"></a>}</span></code></pre></div>
<p>Notice that when we added a new parameter, we had to change the first
line of the function (the function heading), and we also had to change
the place where the function is called in
<code>printMultTable</code>.</p>
<p>Now, when we call <code>printMultTable(7)</code>:</p>
<div class="sourceCode" id="cb111"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>    2     3     4     5     6     7</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>    4     6     8     10    12    14</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>    6     9     12    15    18    21</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>    8     12    16    20    24    28</span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>    10    15    20    25    30    35</span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>    12    18    24    30    36    42</span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>    14    21    28    35    42    49</span></code></pre></div>
</section>
<section id="solving-problems-with-for-loops" class="level2">
<h2>Solving problems with <code>for</code> loops</h2>
<p>The <code>for</code> loop is a <strong>definite loop</strong> – a
type of iteration where the number of iterations is (typically) known
when the loop begins. In the examples we’ve looked at, we’ve used it to
iterate over a range of numbers – to execute the loop a set number of
times. In later chapters we’ll learn how to use the <code>for</code>
loop to iterate over lists of items as well. We can use a
<code>for</code> loop to search through one of these lists, whether a
range of numbers or a list of items. For now, we’ll stick with ranges of
numbers.</p>
<p>Let’s say we want to write a function that counts the multiples of 3
in a range of numbers. We already learned how to use the <code>if</code>
statement to test a condition. In this chapter we looked at ways to
iterate over a range of numbers. We can combine these techniques to
solve our problem.</p>
<div class="sourceCode" id="cb112"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb112-1"><a href="#cb112-1"></a><span class="kw">function</span> <span class="fu">countMultiplesOf3</span> (start<span class="op">,</span> end) {</span>
<span id="cb112-2"><a href="#cb112-2"></a>  <span class="kw">let</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>     </span>
<span id="cb112-3"><a href="#cb112-3"></a>  <span class="cf">for</span> (<span class="kw">let</span> i<span class="op">=</span>start<span class="op">;</span> i <span class="op">&lt;=</span> end<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb112-4"><a href="#cb112-4"></a>    <span class="cf">if</span> (i <span class="op">%</span> <span class="dv">3</span> <span class="op">===</span> <span class="dv">0</span>) {</span>
<span id="cb112-5"><a href="#cb112-5"></a>      count<span class="op">++;</span></span>
<span id="cb112-6"><a href="#cb112-6"></a>    }</span>
<span id="cb112-7"><a href="#cb112-7"></a>  }</span>
<span id="cb112-8"><a href="#cb112-8"></a>  <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb112-9"><a href="#cb112-9"></a>}</span>
<span id="cb112-10"><a href="#cb112-10"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">countMultiplesOf3</span>(<span class="dv">3</span><span class="op">,</span> <span class="dv">12</span>))<span class="op">;</span> <span class="co">// the multiples are [3, 6, 9, 12], so prints 4</span></span></code></pre></div>
<p>In the example above, we test to see if a number is evenly divisible
by 3 (i.e. a multiple of 3) using the <code>%</code> mode operator. We
use the <code>count</code> variable to keep track of all of the
multiples we find, using the <code>++</code> operator to increment
<code>count</code> each time we find a multiple in our loop.</p>
<p>Sometimes we want to exit a <code>for</code> loop early. One way to
do this is with a <code>return</code> statement. Let’s write a simple
function to test if a number is prime. A prime number is a positive
integer greater than 1 that is only divisible by itself and by 1. To
test if a number is prime, we will test all of the numbers smaller than
it. If any of those numbers divide evenly into the number, it’s not
prime. If our loop completes without finding a divisor, our number must
be prime. Here’s the code:</p>
<div class="sourceCode" id="cb113"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb113-1"><a href="#cb113-1"></a><span class="kw">function</span> <span class="fu">isPrime</span> (n) {</span>
<span id="cb113-2"><a href="#cb113-2"></a></span>
<span id="cb113-3"><a href="#cb113-3"></a>  <span class="cf">if</span> (n <span class="op">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb113-4"><a href="#cb113-4"></a>    <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb113-5"><a href="#cb113-5"></a>  }</span>
<span id="cb113-6"><a href="#cb113-6"></a></span>
<span id="cb113-7"><a href="#cb113-7"></a>  <span class="cf">if</span> (n <span class="op">===</span> <span class="dv">2</span>) {</span>
<span id="cb113-8"><a href="#cb113-8"></a>    <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb113-9"><a href="#cb113-9"></a>  }</span>
<span id="cb113-10"><a href="#cb113-10"></a></span>
<span id="cb113-11"><a href="#cb113-11"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> i<span class="op">&lt;</span>n<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb113-12"><a href="#cb113-12"></a>    <span class="cf">if</span> (n <span class="op">%</span> i <span class="op">===</span> <span class="dv">0</span>) {</span>
<span id="cb113-13"><a href="#cb113-13"></a>      <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb113-14"><a href="#cb113-14"></a>    }</span>
<span id="cb113-15"><a href="#cb113-15"></a>  }</span>
<span id="cb113-16"><a href="#cb113-16"></a></span>
<span id="cb113-17"><a href="#cb113-17"></a>  <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb113-18"><a href="#cb113-18"></a></span>
<span id="cb113-19"><a href="#cb113-19"></a>}</span></code></pre></div>
<p>On line 3, we make sure that <code>n</code> is a positive integer
greater than 1. On line 6, we handle the special case of 2 – the only
even prime. On line 11 we begin our <code>for</code> loop. We do at
<em>most</em> enough iterations to check all of the numbers between 2
and <code>n - 1</code>. <em>If</em> we find a divisor of <code>n</code>
on line 12, <em>then</em> we return <code>false</code> because
<code>n</code> can’t be prime. We don’t need to continue our
<code>for</code> loop, so we exit early with a <code>return</code>
statement. If we finally reach line 17, we return <code>true</code>.
Because of the logic of our program, <code>n</code> <em>must</em> be
prime.</p>
</section>
<section id="functions-2" class="level2">
<h2>Functions</h2>
<p>A few times now, we have mentioned all the things functions are good
for. By now, you might be wondering what exactly those things are. Here
are some of them:</p>
<ol type="1">
<li>Capturing your mental chunking. Breaking your complex tasks into
sub-tasks, and giving the sub-tasks a meaningful name is a powerful
mental technique.</li>
<li>Dividing a long program into functions allows you to separate parts
of the program, debug them in isolation, and then compose them into a
whole.</li>
<li>Functions facilitate the use of iteration.</li>
<li>Well-designed functions are often useful for many programs. Once you
write and debug one, you can reuse it in many different programs and
contexts.</li>
</ol>
</section>
<section id="glossary-5" class="level2">
<h2>Glossary</h2>
<dl>
<dt>control flow</dt>
<dd>
The execution and sequencing of statements in a computer program.
Statements flow in the order they are written. <em>Selection</em> of
certain statements – and exclusion of others – can be accomplished with
<code>if</code> and <code>else</code> statements. Repetition of
statements is accomplished by <em>iteration</em>, such as with a
<code>for</code> loop.
</dd>
<dt>definite loop</dt>
<dd>
A form of iteration when the (maximum) number of loops are known before
the loop begins.
</dd>
<dt>encapsulation</dt>
<dd>
Encapsulation in computer programming involves writing functionality in
code that is isolated from other parts of the program. We can wrap parts
of our code in a function to encapsulate it. This allows us to test and
validate the encapsulated function independently from other parts of the
program.
</dd>
<dt><code>for</code> loop</dt>
<dd>
The <code>for</code> loop is a <em>finite loop</em> that repeats the
loop body a known number of times. <code>for</code> loops are useful for
repeating things a set number of times (e.g. do this 100 times, print
all of the odd numbers to 5,000), and iterating through items on a list
(e.g. send an email to the whole class roster).
</dd>
<dt>loop body</dt>
<dd>
Any number of statements that are executed during iterations of the
loop. The loop body follows the loop header and is indicated by curly
braces and (in well formatted code) one level of indentation.
</dd>
<dt>loop initialization</dt>
<dd>
The first statement in the loop header parenthesis, typically
initializes a loop variable that will be used to test the loop
condition.
</dd>
<dt>loop variable</dt>
<dd>
The loop variable determines when the loop terminates in a Booleaen
expression in the <em>loop condition</em>. Often it counts the number of
iterations in a loop, but it is modified by the <em>final
expression</em> and may be modified in the <em>loop body</em>.
</dd>
<dt>reassignment</dt>
<dd>
The ability of <em>variables</em> to be given (assigned) a new value
after they have been declared.
</dd>
</dl>
</section>
<section id="for-loop-exercises" class="level2">
<h2>For Loop Exercises</h2>
<p><a href="https://repl.it/@mcuringa/function-exercises">Fork this repl
with empty function definitions to get started</a></p>
<ol type="1">
<li><p>Write a function that prints <code>We like Javascript!</code>
1000 times.</p></li>
<li><p>Write a function <code>printOdds(start, end)</code> which prints
all of the odd number starting with <code>start</code> up to and
including <code>end</code>.</p></li>
<li><p>Write a function <code>countByTens</code> that counts to 10,000
by 10s (printing the sequence 10, 20, 30, .. 10,000).</p></li>
<li><p>Write a function named <code>poly</code> that uses a
<code>for</code> loop to make a turtle draw any regular polygon (regular
means all sides the same lengths, all angles the same, to find the
angle, divide 360 by the number of sides). The function must have
<code>size</code> and <code>numSides</code> as parameters. So,
<code>poly(40, 4)</code> would draw a square where the sides are 40
pixels long.</p></li>
<li><p>Write a function <code>countPrimes(a, b)</code> which counts all
of the prime numbers between <code>a</code> and <code>b</code>,
including <code>a</code> and <code>b</code>. Your function must
<em>return</em> the count. It should not print anything to the
console.</p></li>
<li><p><strong>Center text.</strong> The <code>.length</code> attributes
of a string tells us how many characters are in the string,
<code>"cat".length === 3</code>. Using this property and a
<code>for</code> loop, write a function that centers text in the
console. Your function must have two parameters – the text that needs to
be centered, and the number of characters in the console. The function
returns a new string, padded with enough blank spaces on the left side
so that it will be centered. <em>The function does not print to the
console</em>.</p></li>
<li><p>(hard bonus) Consider the <code>isPrime</code> example above. Our
solution would be considered a <strong>naive</strong> solution – a
solution which solve the problem in a basic, but not most efficient or
<em>elegant</em> manner. Thinking (or reading) about prime numbers, can
you <strong>refactor</strong> <code>isPrime</code> so that it can
determine if a number is prime without having to complete all of the
iterations between 2 and <code>n</code>?</p></li>
</ol>
</section>
<section id="for-loop-lab" class="level2">
<h2>For Loop Lab</h2>
<p>For the <code>for</code> loop lab we’re going to return to our turtle
graphics programming. We’ve already seen many interesting shapes and
patterns that can be made with loops. For this lab, you are going to use
turtle to draw a picture, with these simple guidelines:</p>
<ul>
<li>all of your code is encapsulated in functions, except for the call
to <code>main()</code> which starts your program</li>
<li>(at least) 3 different things in your picture are created by
<em>generalized</em> functions. Generalized functions use function
parameters to allow one function to handle different cases. In turtle,
these parameters may control things like size, color, placement on the
screen, etc.</li>
<li>you use <code>for</code> loops to place more than one “think” in
your picture</li>
</ul>
<p>If you are unsure how to start, consider drawing a city. You can
write functions for buildings, windows, using for loops to place the
windows on a building and building inside your drawing.</p>
</section>
</section>
<section id="while-loops" class="level1">
<h1>While loops</h1>
<section id="the-while-statement" class="level2">
<h2>The <code>while</code> statement</h2>
<p>Here is a fragment of code that demonstrates the use of the
<code>while</code> statement:</p>
<div class="sourceCode" id="cb114"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb114-1"><a href="#cb114-1"></a><span class="co">/**</span></span>
<span id="cb114-2"><a href="#cb114-2"></a><span class="co"> * Return the sum of 1+2+3 ... n</span></span>
<span id="cb114-3"><a href="#cb114-3"></a><span class="co"> */</span></span>
<span id="cb114-4"><a href="#cb114-4"></a><span class="kw">function</span> <span class="fu">sumTo</span>(n) {</span>
<span id="cb114-5"><a href="#cb114-5"></a>  <span class="kw">let</span> total <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb114-6"><a href="#cb114-6"></a>  <span class="kw">let</span> v <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb114-7"><a href="#cb114-7"></a>  <span class="cf">while</span> (v <span class="op">&lt;=</span> n) {</span>
<span id="cb114-8"><a href="#cb114-8"></a>    total <span class="op">+=</span> v<span class="op">;</span></span>
<span id="cb114-9"><a href="#cb114-9"></a>    v<span class="op">++;</span></span>
<span id="cb114-10"><a href="#cb114-10"></a>  }</span>
<span id="cb114-11"><a href="#cb114-11"></a>  <span class="cf">return</span> total<span class="op">;</span></span>
<span id="cb114-12"><a href="#cb114-12"></a>}</span>
<span id="cb114-13"><a href="#cb114-13"></a></span>
<span id="cb114-14"><a href="#cb114-14"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;sumTo(4) =&gt; 10&quot;</span><span class="op">,</span> <span class="fu">sumTo</span>(<span class="dv">4</span>) <span class="op">===</span> <span class="dv">10</span>)<span class="op">;</span></span>
<span id="cb114-15"><a href="#cb114-15"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;sumTo(1000) =&gt;500500 &quot;</span><span class="op">,</span> <span class="fu">sumTo</span>(<span class="dv">1000</span>) <span class="op">===</span> <span class="dv">500500</span>)<span class="op">;</span></span></code></pre></div>
<p>You can almost read the <code>while</code> statement as if it were
English. It means, while <code>v</code> is less than or equal to
<code>n</code>, continue executing the body of the loop. Within the
body, each time, increment <code>v</code>. When <code>v</code> passes
<code>n</code>, return your accumulated sum.</p>
<p>More formally, here is precise flow of execution for a
<code>while</code> statement:</p>
<ul>
<li>Evaluate the condition at line 4, yielding a value which is either
<code>false</code> or <code>true</code>.</li>
<li>If the value is <code>false</code>, exit the <code>while</code>
statement and continue execution at the next statement (line 8 in this
case).</li>
<li>If the value is <code>true</code>, execute each of the statements in
the body (lines 6 and 7) and then go back to the <code>while</code>
statement at line 5.</li>
</ul>
<p>The body consists of all of the statements indented below the
<code>while</code> keyword.</p>
<p>Notice that if the loop condition is <code>false</code> the first
time we test it, the statements in the body of the loop are never
executed.</p>
<p>The body of the loop should change the value of one or more variables
so that eventually the condition becomes <code>false</code> and the loop
terminates. Otherwise the loop will repeat forever, which is called an
<strong>infinite loop</strong>. An endless source of amusement for
computer scientists is the observation that the directions on shampoo,
“lather, rinse, repeat”, are an infinite loop.</p>
<p>In the case here, we can prove that the loop terminates because we
know that the value of <code>n</code> is finite, and we can see that the
value of <code>v</code> increments each time through the loop, so
eventually it will have to exceed <code>n</code>. In other cases, it is
not so easy, even impossible in some cases, to tell if the loop will
ever terminate.</p>
<p>What you will notice here is that the <code>while</code> loop is more
work for you — the programmer — than the equivalent <code>for</code>
loop. When using a <code>while</code> loop you have to manage the loop
variable yourself: give it an initial value, test for completion, and
then make sure you change something in the body so that the loop
terminates. By comparison, here is an equivalent function that uses
<code>for</code> instead:</p>
<div class="sourceCode" id="cb115"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb115-1"><a href="#cb115-1"></a><span class="co">// Return the sum of 1+2+3 ... n</span></span>
<span id="cb115-2"><a href="#cb115-2"></a><span class="kw">function</span> <span class="fu">sumTo</span>(n) {</span>
<span id="cb115-3"><a href="#cb115-3"></a>  <span class="kw">let</span> ss  <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb115-4"><a href="#cb115-4"></a>  <span class="cf">for</span> (<span class="kw">let</span> v <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> v <span class="op">&lt;=</span> n<span class="op">;</span> v<span class="op">++</span>) {</span>
<span id="cb115-5"><a href="#cb115-5"></a>    ss <span class="op">=</span> ss <span class="op">+</span> v<span class="op">;</span></span>
<span id="cb115-6"><a href="#cb115-6"></a>  }</span>
<span id="cb115-7"><a href="#cb115-7"></a>  <span class="cf">return</span> ss<span class="op">;</span></span>
<span id="cb115-8"><a href="#cb115-8"></a>}</span></code></pre></div>
<p>So why have two kinds of loop if <code>for</code> looks easier? This
next example shows a case where we need the extra power that we get from
the <code>while</code> loop.</p>
</section>
<section id="the-collatz-3n-1-sequence" class="level2">
<h2>The Collatz 3n + 1 sequence</h2>
<p>Let’s look at a simple sequence that has fascinated and foxed
mathematicians for many years. They still cannot answer even quite
simple questions about this.</p>
<p>The “computational rule” for creating the sequence is to start from
some given <code>n</code>, and to generate the next term of the sequence
from <code>n</code>, either by halving <code>n</code>, (whenever
<code>n</code> is even), or else by multiplying it by three and adding
1. The sequence terminates when <code>n</code> reaches 1.</p>
<p>This Javascript function captures that algorithm:</p>
<div class="sourceCode" id="cb116"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb116-1"><a href="#cb116-1"></a><span class="co">// Print the 3n+1 sequence from n,</span></span>
<span id="cb116-2"><a href="#cb116-2"></a><span class="co">// terminating when it reaches 1.</span></span>
<span id="cb116-3"><a href="#cb116-3"></a><span class="kw">function</span> <span class="fu">seq3np1</span> (n) {</span>
<span id="cb116-4"><a href="#cb116-4"></a></span>
<span id="cb116-5"><a href="#cb116-5"></a>  <span class="kw">let</span> sequence <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb116-6"><a href="#cb116-6"></a>  <span class="cf">while</span> (n <span class="op">!==</span> <span class="dv">1</span>) {</span>
<span id="cb116-7"><a href="#cb116-7"></a>    sequence <span class="op">+=</span> n <span class="op">+</span> <span class="st">&quot;, &quot;</span><span class="op">;</span></span>
<span id="cb116-8"><a href="#cb116-8"></a>    <span class="cf">if</span> (n <span class="op">%</span> <span class="dv">2</span> <span class="op">===</span> <span class="dv">0</span>) {    <span class="co">// n is even</span></span>
<span id="cb116-9"><a href="#cb116-9"></a>      n <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(n<span class="op">/</span><span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb116-10"><a href="#cb116-10"></a>    }</span>
<span id="cb116-11"><a href="#cb116-11"></a>    <span class="cf">else</span> {               <span class="co">// n is odd</span></span>
<span id="cb116-12"><a href="#cb116-12"></a>      n <span class="op">=</span> n <span class="op">*</span> <span class="dv">3</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb116-13"><a href="#cb116-13"></a>    }</span>
<span id="cb116-14"><a href="#cb116-14"></a></span>
<span id="cb116-15"><a href="#cb116-15"></a>  }</span>
<span id="cb116-16"><a href="#cb116-16"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(sequence <span class="op">+</span> <span class="dv">1</span> <span class="op">+</span> <span class="st">&quot;.&quot;</span>)<span class="op">;</span></span>
<span id="cb116-17"><a href="#cb116-17"></a>}</span></code></pre></div>
<caption>
See <a href="https://repl.it/@mcuringa/Collatz">Collatz repl</a>
</caption>
<p>First, note that we use the accumulator pattern that we introduced in
the last chapter to concatenate our output to the (initially empty)
string, <code>sequence</code>. Not until we complete the
<code>while</code> loop do we print <code>sequence</code> to the
console.</p>
<p>The condition for continuing with this loop is <code>n !== 1</code>,
so the loop will continue running until it reaches its termination
condition, (i.e. <code>n === 1</code>).</p>
<p>Each time through the loop, the program joins the value of
<code>n</code> to <code>sequence</code> and then checks whether it is
even or odd. If it is even, the value of <code>n</code> is divided by 2
(and then rounded down using <code>Math.floor</code>). If it is odd, the
value is replaced by <code>n * 3 + 1</code>. Because of the logic for
how the loop variable (<code>n</code>) changes in each iteration, this
algorithm cannot be easily implemented with a <code>for</code> loop,
because the <code>for</code> loop finalization statement cannot handle
the boolean logic of deciding how to modify <code>n</code>. In this
case, <code>while</code> is more suitable.</p>
<p>Here are some examples:</p>
<div class="sourceCode" id="cb117"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="fu">seq3np1</span>(<span class="dv">3</span>)</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="fl">1.</span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="fu">seq3np1</span>(<span class="dv">19</span>)</span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="dv">19</span><span class="op">,</span> <span class="dv">58</span><span class="op">,</span> <span class="dv">29</span><span class="op">,</span> <span class="dv">88</span><span class="op">,</span> <span class="dv">44</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">34</span><span class="op">,</span> <span class="dv">17</span><span class="op">,</span> <span class="dv">52</span><span class="op">,</span> <span class="dv">26</span><span class="op">,</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="fl">1.</span></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>⠕ <span class="fu">seq3np1</span>(<span class="dv">21</span>)</span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a><span class="dv">21</span><span class="op">,</span> <span class="dv">64</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="fl">1.</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>⠕ <span class="fu">seq3np1</span>(<span class="dv">16</span>)</span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a><span class="dv">16</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="fl">1.</span></span></code></pre></div>
<p>Since <code>n</code> sometimes increases and sometimes decreases,
there is no obvious proof that <code>n</code> will ever reach 1, or that
the program terminates. For some particular values of <code>n</code>, we
can prove termination. For example, if the starting value is a power of
two, then the value of <code>n</code> will be even each time through the
loop until it reaches 1. The previous example ends with such a sequence,
starting with 16.</p>
<p>See if you can find a small starting number that needs more than a
hundred steps before it terminates.</p>
<p>Particular values aside, the interesting question was first posed by
a German mathematician called Lothar Collatz: the <em>Collatz
conjecture</em> (also known as the <em>3n + 1 conjecture</em>), is that
this sequence terminates for <em>all</em> positive values of
<code>n</code>. So far, no one has been able to prove it <em>or</em>
disprove it!<br />
(A conjecture is a statement that might be true, but nobody knows for
sure.)</p>
<p>Think carefully about what would be needed for a proof or disproof of
the conjecture <em>“All positive integers will eventually converge to 1
using the Collatz rules”</em>. With fast computers we have been able to
test every integer up to very large values, and so far, they have all
eventually ended up at 1. But who knows? Perhaps there is some as-yet
untested number which does not reduce to 1.</p>
<p>You’ll notice that if you don’t stop when you reach 1, the sequence
gets into its own cyclic loop: 1, 4, 2, 1, 4, 2, 1, 4 … So one
possibility is that there might be other cycles that we just haven’t
found yet.</p>
<p><a href="https://en.wikipedia.org/wiki/Collatz_conjecture">Wikipedia
has an informative article about the Collatz conjecture.</a> The
sequence also goes under other names (Hailstone sequence, Wonderous
numbers, etc.), and you’ll find out just how many integers have already
been tested by computer, and found to converge!</p>
<aside id="for-or-while">
<p><strong>Choosing between <code>for</code> and
<code>while</code></strong></p>
<p>Use a <code>for</code> loop if you know, before you start looping,
the maximum number of times that you’ll need to execute the body. For
example, if you’re traversing a list of elements, you know that the
maximum number of loop iterations you can possibly need is “all the
elements in the list”. Or if you need to print the 12 times table, we
know right away how many times the loop will need to run.</p>
<p>So any problem like “iterate this weather model for 1000 cycles”, or
“search this list of words”, “find all prime numbers up to 10000”
suggest that a <code>for</code> loop is best.</p>
<p>By contrast, if you are required to repeat some computation until
some condition is met, and you cannot calculate in advance when (or if)
this will happen, as we did in this 3n + 1 problem, you’ll need a
<code>while</code> loop.</p>
<p>We call the first case <strong>definite iteration</strong> — we know
ahead of time some definite bounds for what is needed. The latter case
is called <strong>indefinite iteration</strong> — we’re not sure how
many iterations we’ll need — we cannot even establish an upper
bound!</p>
</aside>
</section>
<section id="tracing-a-program" class="level2">
<h2>Tracing a program</h2>
<p>To write effective computer programs, and to build a good conceptual
model of program execution, a programmer needs to develop the ability to
<strong>trace</strong> the execution of a computer program. Tracing
involves becoming the computer and following the flow of execution
through a sample program run, recording the state of all variables and
any output the program generates after each instruction is executed.</p>
<p>To understand this process, let’s trace the call to
<code>seq3np1(3)</code> from the previous section. At the start of the
trace, we have a variable, <code>n</code> (the parameter), with an
initial value of 3. Since 3 is not equal to 1, the <code>while</code>
loop body is executed. 3 is printed and <code>3 % 2 === 0</code> is
evaluated. Since it evaluates to <code>false</code>, the
<code>else</code> branch is executed and <code>3 * 3 + 1</code> is
evaluated and assigned to <code>n</code>.</p>
<p>To keep track of all this as you hand trace a program, make a column
heading on a piece of paper for each variable created as the program
runs and another one for output. Our trace so far would look something
like this:</p>
<pre><code>n         output printed so far
--        ---------------------
3         3,
10</code></pre>
<p>Since <code>10 !== 1</code> evaluates to <code>true</code>, the loop
body is again executed, and 10 is printed. <code>10 % 2 === 0</code> is
true, so the <code>if</code> branch is executed and <code>n</code>
becomes 5. By the end of the trace we have:</p>
<pre><code>n         output printed so far
--        ---------------------
3         3,
10        3, 10,
5         3, 10, 5,
16        3, 10, 5, 16,
8         3, 10, 5, 16, 8,
4         3, 10, 5, 16, 8, 4,
2         3, 10, 5, 16, 8, 4, 2,
1         3, 10, 5, 16, 8, 4, 2, 1.</code></pre>
<p>Tracing can be a bit tedious and error prone (that’s why we get
computers to do this stuff in the first place!), but it is an essential
skill for a programmer to have. From this trace we can learn a lot about
the way our code works. We can observe that as soon as <code>n</code>
becomes a power of 2, for example, the program will require
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>log</mo><mn>2</mn></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">{\log_2}(n)</annotation></semantics></math>
executions of the loop body to complete. We can also see that we don’t
reach the final 1 within the body of the loop, which is why we
concatenate <code>1</code> after our <code>while</code> loop
terminates.</p>
<p>In this function, we just store all of the values of the Collatz
sequence in a single string. As we learn a bit more Javascript, we’ll be
able to show you how to generate a list of values to hold the sequence,
rather concatenating them to a string.</p>
</section>
<section id="counting-digits" class="level2">
<h2>Counting digits</h2>
<p>The following function counts the number of decimal digits in a
positive integer:</p>
<div class="sourceCode" id="cb120"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb120-1"><a href="#cb120-1"></a><span class="kw">function</span> <span class="fu">numDigits</span>(n) {</span>
<span id="cb120-2"><a href="#cb120-2"></a>  <span class="kw">let</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb120-3"><a href="#cb120-3"></a>  <span class="cf">while</span> (n <span class="op">!=</span> <span class="dv">0</span>) {</span>
<span id="cb120-4"><a href="#cb120-4"></a>    count<span class="op">++;</span></span>
<span id="cb120-5"><a href="#cb120-5"></a>    n <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(n <span class="op">/</span> <span class="dv">10</span>)<span class="op">;</span></span>
<span id="cb120-6"><a href="#cb120-6"></a>  }</span>
<span id="cb120-7"><a href="#cb120-7"></a>  <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb120-8"><a href="#cb120-8"></a>}</span></code></pre></div>
<p>A call to <code>console.log(numDigits(710))</code> will print
<code>3</code>. Trace the execution of this function call (using
<code>console.log</code> or just a piece of paper) to convince yourself
that it works.</p>
<p>This function demonstrates an important pattern of computation called
a <strong>counter</strong>. The variable <code>count</code> is
initialized to 0 and then incremented each time the loop body is
executed. When the loop exits, <code>count</code> contains the result —
the total number of times the loop body was executed, which is the same
as the number of digits.</p>
<p>If we wanted to only count digits that are either 0 or 5, adding a
conditional before incrementing the counter will do the trick:</p>
<div class="sourceCode" id="cb121"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb121-1"><a href="#cb121-1"></a><span class="kw">function</span> <span class="fu">numZeroAndNumFiveDigits</span>(n) {</span>
<span id="cb121-2"><a href="#cb121-2"></a>  <span class="kw">let</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb121-3"><a href="#cb121-3"></a>  <span class="cf">while</span>( n <span class="op">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb121-4"><a href="#cb121-4"></a>    <span class="kw">let</span> digit <span class="op">=</span> n <span class="op">%</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb121-5"><a href="#cb121-5"></a>    <span class="cf">if</span> (digit <span class="op">===</span> <span class="dv">0</span> <span class="op">||</span> digit <span class="op">===</span> <span class="dv">5</span>) {</span>
<span id="cb121-6"><a href="#cb121-6"></a>      count <span class="op">=</span> count <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb121-7"><a href="#cb121-7"></a>    }</span>
<span id="cb121-8"><a href="#cb121-8"></a>    n <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(n <span class="op">/</span> <span class="dv">10</span>)<span class="op">;</span></span>
<span id="cb121-9"><a href="#cb121-9"></a>  }</span>
<span id="cb121-10"><a href="#cb121-10"></a>  <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb121-11"><a href="#cb121-11"></a>}</span></code></pre></div>
<p>Confirm that
<code>numZeroAndNumFiveDigits(1055030250) === 7</code>.</p>
<p>Notice, however, that <code>numDigits(0) === 0</code>. Explain why.
Do you think this is a bug in the code, or a bug in the specifications,
or our expectations, or the tests?</p>
</section>
<section id="newtons-method-for-finding-square-roots" class="level2">
<h2>Newton’s method for finding square roots</h2>
<p>Loops are often used in programs that compute numerical results by
starting with an approximate answer and iteratively improving it.</p>
<p>For example, before we had calculators or computers, people needed to
calculate square roots manually. Newton used a particularly good method
(there is some evidence that this method was known many years before).
Suppose that you want to know the square root of <code>n</code>. If you
start with almost any approximation, you can compute a better
approximation (closer to the actual answer) with the following
formula:</p>
<div class="sourceCode" id="cb122"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="ex">better</span> = <span class="er">(</span><span class="ex">approx</span> + n/approx<span class="kw">)</span><span class="ex">/2</span></span></code></pre></div>
<p>Repeat this calculation a few times using your calculator. Can you
see why each iteration brings your estimate a little closer? One of the
amazing properties of this particular algorithm is how quickly it
converges to an accurate answer — a great advantage for doing it
manually.</p>
<p>By using a loop and repeating this formula until the better
approximation gets close enough to the previous one, we can write a
function for computing the square root. (In fact, this is how your
calculator finds square roots — it may have a slightly different formula
and method, but it is also based on repeatedly improving its
guesses.)</p>
<p>This is an example of an <code>indefinite</code> iteration problem:
we cannot predict in advance how many times we’ll want to improve our
guess — we just want to keep getting closer and closer. Our stopping
condition for the loop will be when our old guess and our improved guess
are “close enough” to each other.</p>
<p>Ideally, we’d like the old and new guess to be exactly equal to each
other when we stop. But exact equality is a tricky notion in computer
arithmetic when real numbers are involved. Because real numbers are not
represented absolutely accurately (after all, a number like pi or the
square root of two has an infinite number of decimal places because it
is irrational), we need to formulate the stopping test for the loop by
asking “is <code>a</code> close enough to <code>b</code>”? This stopping
condition can be coded like this:</p>
<div class="sourceCode" id="cb123"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb123-1"><a href="#cb123-1"></a><span class="cf">if</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(a<span class="op">-</span>b) <span class="op">&lt;</span> <span class="fl">0.001</span>) {  <span class="co">// Make this smaller for better accuracy</span></span>
<span id="cb123-2"><a href="#cb123-2"></a>  <span class="cf">break</span></span>
<span id="cb123-3"><a href="#cb123-3"></a>}</span></code></pre></div>
<p>Notice that we take the absolute value of the difference between
<code>a</code> and <code>b</code>.</p>
<div class="sourceCode" id="cb124"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb124-1"><a href="#cb124-1"></a><span class="kw">function</span> <span class="fu">sqrt</span>(n) {</span>
<span id="cb124-2"><a href="#cb124-2"></a>  <span class="kw">let</span> approx <span class="op">=</span> n<span class="op">/</span><span class="dv">2</span><span class="op">;</span>   <span class="co">// Start with some or other guess at the answer</span></span>
<span id="cb124-3"><a href="#cb124-3"></a>  <span class="kw">let</span> better <span class="op">=</span> (approx <span class="op">+</span> n<span class="op">/</span>approx)<span class="op">/</span><span class="dv">2</span><span class="op">;</span></span>
<span id="cb124-4"><a href="#cb124-4"></a>  <span class="cf">while</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(approx <span class="op">-</span> better) <span class="op">&gt;</span> <span class="op">.</span><span class="bn">001</span>) {</span>
<span id="cb124-5"><a href="#cb124-5"></a>    approx <span class="op">=</span> better<span class="op">;</span></span>
<span id="cb124-6"><a href="#cb124-6"></a>    better <span class="op">=</span> (approx <span class="op">+</span> n<span class="op">/</span>approx)<span class="op">/</span><span class="fl">2.0</span><span class="op">;</span></span>
<span id="cb124-7"><a href="#cb124-7"></a>  }</span>
<span id="cb124-8"><a href="#cb124-8"></a>  <span class="cf">return</span> better<span class="op">;</span></span>
<span id="cb124-9"><a href="#cb124-9"></a>}</span>
<span id="cb124-10"><a href="#cb124-10"></a></span>
<span id="cb124-11"><a href="#cb124-11"></a><span class="co">// Test cases</span></span>
<span id="cb124-12"><a href="#cb124-12"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">sqrt</span>(<span class="dv">25</span>))<span class="op">;</span></span>
<span id="cb124-13"><a href="#cb124-13"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">sqrt</span>(<span class="dv">49</span>))<span class="op">;</span></span>
<span id="cb124-14"><a href="#cb124-14"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">sqrt</span>(<span class="dv">81</span>))<span class="op">;</span></span></code></pre></div>
<caption>
See <a href="https://repl.it/@mcuringa/Newton-Sqare-Root">Newton Square
Root repl</a>
</caption>
<p>The output is:</p>
<pre><code>5.000000000016778
7
9.000000000004924</code></pre>
<p>See if you can improve the approximations by changing the stopping
condition. Also, step through the algorithm (perhaps by hand, using your
calculator or by adding a <code>count</code> variable to the loop) to
see how many iterations were needed before it achieved this level of
accuracy for <code>sqrt(25)</code>.</p>
</section>
<section id="algorithms" class="level2">
<h2>Algorithms</h2>
<p>Newton’s method is an example of an <strong>algorithm</strong>: it is
a mechanical process for solving a category of problems (in this case,
computing square roots).</p>
<p>Some kinds of knowledge are not algorithmic. For example, learning
dates from history or your multiplication tables involves memorization
of specific solutions.</p>
<p>But the techniques you learned for addition with carrying,
subtraction with borrowing, and long division are all algorithms. Or if
you are an avid Sudoku puzzle solver, you might have some specific set
of steps that you always follow.</p>
<p>One of the characteristics of algorithms is that they do not require
any intelligence to carry out. They are mechanical processes in which
each step follows from the last according to a simple set of rules. And
they’re designed to solve a general class or category of problems, not
just a single problem.</p>
<p>Understanding that hard problems can be solved by step-by-step
algorithmic processes (and having technology to execute these algorithms
for us) is one of the major breakthroughs that has had enormous
benefits. So while the execution of the algorithm may be boring and may
require no intelligence, algorithmic or computational thinking —
i.e. using algorithms and automation as the basis for approaching
problems — is rapidly transforming our society. Some claim that this
shift towards algorithmic thinking and processes is going to have even
more impact on our society than the invention of the printing press. And
the process of designing algorithms is interesting, intellectually
challenging, and a central part of what we call programming.</p>
<p>Some of the things that people do naturally, without difficulty or
conscious thought, are the hardest to express algorithmically.
Understanding natural language is a good example. We all do it, but so
far no one has been able to explain <em>how</em> we do it, at least not
in the form of a step-by-step mechanical algorithm.</p>
</section>
<section id="while-loop-exercises" class="level2">
<h2>While Loop Exercises</h2>
<p>Some of these exercises work best with <code>while</code> loops,
while others can be solved more easily with <code>for</code> loops. Some
of them will work better if you write more than one function for the
solution.</p>
<p>The most straightforward applications of loops, given what we have
learned so far, is working with numbers. Please review some basic terms
and concepts that will help you with these exercises.</p>
<p>A <strong>prime number</strong> is a whole number greater than 1 that
can only be evenly divided by 1 and itself. <strong>Factors</strong> are
number that multiply together produce a number. 2 and 3 are factors of 6
because
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>x</mi><mn>3</mn><mo>=</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">2 x 3=6</annotation></semantics></math>.
Is the result of <strong>multiple</strong> multiplying a number. <em>18
is a multiple of 3 because
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn><mi>x</mi><mn>3</mn><mo>=</mo><mn>18</mn></mrow><annotation encoding="application/x-tex">6 x 3 = 18</annotation></semantics></math></em>.</p>
<p>The site <em>Math is Fun</em> <a
href="https://www.mathsisfun.com/numbers/factors-multiples.html">offers
a straightforward definition of multiples and factors</a> with links to
other pages relevant to these problems.</p>
<p><strong><a href="https://repl.it/@mcuringa/While-Loop-Exercises">You
can get started by forking this repl with the function
definitions</a></strong></p>
<ol type="1">
<li><p><strong>Sum range</strong></p>
<p>Write a function <code>sumRange(start, end)</code> that sums (adds
up) all of the numbers between <code>start</code> and <code>end</code>,
including <code>start</code> and <code>end</code>. Return the sum (a
number).</p></li>
<li><p><strong>Square Root Count</strong></p>
<p>Revise the code above for Newton’s method for calculating square
roots. Instead of returning the square root, it should return the number
of iterations required to find the square root.</p></li>
<li><p><strong>Sum of odds</strong></p>
<p><code>sumOfOdds(start, end)</code> calculates and returns the sum of
all of the <em>odd</em> numbers in the range
<code>start</code>..<code>end</code>. It includes <code>start</code> and
<code>end</code> if they are odd numbers.</p></li>
<li><p><strong>Sum of Squares</strong></p>
<p>Write a function that calculates and returns the sum of the squares
of numbers in a range: <code>sumOfSquare(start, end)</code>. The range
includes <code>start</code> and <code>end</code>.</p></li>
<li><p><strong>Greatest factor</strong></p>
<p>Write a function <code>greatestFactor(start, end, n)</code> that
returns the greatest (highest) factor of <code>n</code> in the range of
numbers between <code>start</code> and <code>end</code> (including
end).</p></li>
</ol>
<hr />
<ol start="6" type="1">
<li><p><strong>Greatest Common Factor</strong></p>
<p>Write a function <code>gcm(a, b)</code> that returns the greatest
(highest number) that is a factor of both <code>a</code> and
<code>b</code>.</p></li>
<li><p><strong>Factorials</strong></p>
<p>Write a function <code>fact(n)</code> which returns the factorial of
<code>n</code> (<em>n!</em>). The <strong>factorial</strong> of a number
is that number multiplied by all of the numbers between itself and 1, so
the factorial of 4 is
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mi>x</mi><mn>3</mn><mi>x</mi><mn>2</mn><mi>x</mi><mn>1</mn><mo>=</mo><mn>24</mn></mrow><annotation encoding="application/x-tex">4 x 3 x 2 x 1 = 24</annotation></semantics></math>.
In Javascript, we’d say <code>fact(4) === 24</code>.</p></li>
<li><p><strong><a
href="https://www.mathsisfun.com/numbers/fibonacci-sequence.html">Fibonacci
Sequence</a></strong></p>
<p>Each term in the Fibonacci Sequence is calculated by adding the two
previous numbers in the sequence together. The first two terms can by 0,
and 1, so the next term is 1. The sequence begins 0, 1, 1, 2, 3, 5, 8,
13. Write a function <code>fib(n)</code> which returns the
<code>n</code>th number in the sequence. So, <code>fib(0) === 0</code>,
<code>fib(3) === 5</code> and so on.</p></li>
<li><p><strong><a
href="https://en.wikipedia.org/wiki/Narcissistic_number">Armstrong
Numbers</a></strong></p>
<p>An Armstrong Number is a number where the sum of the digits raised to
the number of digits in the number, equal the number itself. 153 is an
Armstrong Number. It has 3 digits, so
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>1</mn><mn>3</mn></msup><mo>+</mo><msup><mn>5</mn><mn>3</mn></msup><mo>+</mo><msup><mn>3</mn><mn>3</mn></msup><mo>=</mo><mn>1</mn><mo>+</mo><mn>125</mn><mo>+</mo><mn>27</mn><mo>=</mo><mn>153</mn></mrow><annotation encoding="application/x-tex">1^3 + 5^3 + 3^3 = 1 + 125 + 27 = 153</annotation></semantics></math>
Write a function <code>isArmstrong(n)</code> that returns
<code>true</code> if <code>n</code> is an Armstrong Number, or
<code>false</code> if it isn’t.</p></li>
</ol>
</section>
</section>
<section id="strings-1" class="level1">
<h1>Strings</h1>
<section id="a-compound-data-type" class="level2">
<h2>A compound data type</h2>
<p>So far we have seen built-in types like <code>number</code>,
<code>string</code>, and <code>boolean</code>. We’ve also started
working with arrays, although we’ll take a closer look in the next
chapter.</p>
<p>Strings and arrays are qualitatively different from the others
because they are made up of smaller pieces. In the case of strings,
they’re made up of smaller strings each containing one
<strong>character</strong>.</p>
<p>Types that comprise smaller pieces are called <strong>compound data
types</strong>. Depending on what we are doing, we may want to treat a
compound data type as a single thing, or we may want to access its
parts. This ambiguity is useful.</p>
</section>
<section id="working-with-strings-as-single-things" class="level2">
<h2>Working with strings as single things</h2>
<p>Strings are <strong>objects</strong>. Objects can provide functions
that work with the data of a string <strong>instance</strong>.</p>
<p>For example:</p>
<div class="sourceCode" id="cb126"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> ss <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">;</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> tt <span class="op">=</span> ss<span class="op">.</span><span class="fu">toUpperCase</span>()<span class="op">;</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>⠕ tt</span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;HELLO, WORLD!&#39;</span>   </span></code></pre></div>
<p><code>toUpperCase</code> is a method that can be invoked on any
string object to create a new string, in which all the characters are in
uppercase. (The original string <code>ss</code> remains unchanged.)</p>
<p>There are also methods such as <code>toLowerCase</code>,
<code>trim</code>, and <code>repeat</code> that do other interesting
things. <a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">To
learn what methods are available and what they do, you can consult the
MDN Documentation</a>. Or, simply type the following into a Repl.it
script:</p>
<div class="sourceCode" id="cb127"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb127-1"><a href="#cb127-1"></a><span class="kw">let</span> ss <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">;</span></span>
<span id="cb127-2"><a href="#cb127-2"></a><span class="kw">let</span> tt <span class="op">=</span> ss<span class="op">.</span></span></code></pre></div>
<p>When you type the period to select one of the methods of
<code>ss</code>, Repl.it will pop up a selection window showing all the
methods that could be used on your string. There are lots of methods. In
this chapter we’ll look at some of the most immediately useful ones.</p>
</section>
<section id="working-with-the-parts-of-a-string" class="level2">
<h2>Working with the parts of a string</h2>
<p>The <strong>indexing operator</strong> (Javascript uses square
brackets to enclose the index) selects a single character substring from
a string:</p>
<div class="sourceCode" id="cb128"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> fruit <span class="op">=</span> <span class="st">&quot;banana&quot;</span><span class="op">;</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> m <span class="op">=</span> fruit[<span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(m)<span class="op">;</span></span></code></pre></div>
<p>The expression <code>fruit[1]</code> selects character number 1 from
<code>fruit</code>, and creates a new string containing just this one
character. The variable <code>m</code> refers to the result. When we
display <code>m</code>, we could get a surprise:</p>
<div class="sourceCode" id="cb129"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<p>Computer scientists always start counting from zero! The letter at
subscript position zero of <code>"banana"</code> is <code>b</code>. So
at position <code>[1]</code> we have the letter <code>a</code>.</p>
<p>If we want to access the zero-eth letter of a string, we just place
0, or any expression that evaluates to 0, inbetween the brackets:</p>
<div class="sourceCode" id="cb130"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>⠕ m <span class="op">=</span> fruit[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(m)<span class="op">;</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>b</span></code></pre></div>
<p>The expression in brackets is called an <strong>index</strong>. An
index specifies a member of an ordered collection, in this case the
collection of characters in the string. The index <em>indicates</em>
which one you want, hence the name. It can be any integer
expression.</p>
<p>We already mentioned that the common variable name <code>i</code> for
loop variables can be thought of as shorthand for <em>index</em>.
Consider this <code>for</code> loop which iterates through the
characters in a string:</p>
<div class="sourceCode" id="cb131"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb131-1"><a href="#cb131-1"></a><span class="kw">let</span> fruit <span class="op">=</span> <span class="st">&quot;banana&quot;</span><span class="op">;</span></span>
<span id="cb131-2"><a href="#cb131-2"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> fruit<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb131-3"><a href="#cb131-3"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(i<span class="op">,</span> fruit[i])<span class="op">;</span></span>
<span id="cb131-4"><a href="#cb131-4"></a>}</span></code></pre></div>
<p>produces:</p>
<div class="sourceCode" id="cb132"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span> <span class="st">&#39;b&#39;</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="st">&#39;a&#39;</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="st">&#39;n&#39;</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="st">&#39;a&#39;</span></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="st">&#39;n&#39;</span></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="st">&#39;a&#39;</span></span></code></pre></div>
<p>If you take a close look at the loop condition from our example,
you’ll see that our <code>for</code> loop ends when
<code>i &lt; fruit.length</code>. <code>length</code> is a
<strong>property</strong> of a string that lets us know how many
characters are in the string. In later chapters we’ll see that arrays
and other compound datatypes have a <code>length</code> property that
makes it easy for us to <strong>iterate</strong> over the items they
contain.</p>
<p>Note that indexing string returns a <em>string</em> — Javascript has
no special type for a single character. It is just a string of length
1.</p>
<p>We’ve also seen arrays previously. The same indexing notation works
to extract elements from an array:</p>
<div class="sourceCode" id="cb133"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> primeNumbers <span class="op">=</span> [<span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">17</span><span class="op">,</span> <span class="dv">19</span><span class="op">,</span> <span class="dv">23</span><span class="op">,</span> <span class="dv">29</span><span class="op">,</span> <span class="dv">31</span>]<span class="op">;</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>⠕ primeNumbers[<span class="dv">4</span>]<span class="op">;</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">11</span></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> friends <span class="op">=</span> [<span class="st">&quot;Joe&quot;</span><span class="op">,</span> <span class="st">&quot;Zoe&quot;</span><span class="op">,</span> <span class="st">&quot;Brad&quot;</span><span class="op">,</span> <span class="st">&quot;Angelina&quot;</span><span class="op">,</span> <span class="st">&quot;Zuki&quot;</span><span class="op">,</span> <span class="st">&quot;Thandi&quot;</span><span class="op">,</span> <span class="st">&quot;Paris&quot;</span>]<span class="op">;</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>⠕ friends[<span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;Angelina&#39;</span></span></code></pre></div>
</section>
<section id="length" class="level2">
<h2>Length</h2>
<p>We’ve seen that the <code>length</code> property of a string, returns
the number of characters in the string:</p>
<div class="sourceCode" id="cb134"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> fruit <span class="op">=</span> <span class="st">&quot;banana&quot;</span><span class="op">;</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>⠕ fruit<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span></span></code></pre></div>
<p>To get the last letter of a string, you might be tempted to try
something like this:</p>
<div class="sourceCode" id="cb135"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> sz <span class="op">=</span> fruit<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> last <span class="op">=</span> fruit[sz]<span class="op">;</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>⠕ last<span class="op">;</span></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">undefined</span></span></code></pre></div>
<p>We see that <code>last</code> is <code>undefined</code>. The reason
is that there is no character at index position 6 in
<code>"banana"</code>. Because we start counting at zero, the six
indexes are numbered 0 to 5. To get the last character, we have to
subtract 1 from the length of <code>fruit</code>:</p>
<div class="sourceCode" id="cb136"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> sz <span class="op">=</span> fruit<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> last <span class="op">=</span> fruit[sz <span class="op">-</span> <span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>⠕ last<span class="op">;</span></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;a&#39;</span></span></code></pre></div>
<p>Here we see that the last character is
<code>fruit[fruit.length - 1]</code>, so the second to last character
would be <code>fruit[fruit.length - 2]</code> and so on.</p>
</section>
<section id="traversal-and-the-for-loop" class="level2">
<h2>Traversal and the <code>for</code> loop</h2>
<p>A lot of computations involve processing a string one character at a
time. Often they start at the beginning, select each character in turn,
do something to it, and continue until the end. This pattern of
processing is called a <strong>traversal</strong>. One way to encode a
traversal is with a <code>while</code> statement:</p>
<div class="sourceCode" id="cb137"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb137-1"><a href="#cb137-1"></a><span class="kw">let</span> ix <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-2"><a href="#cb137-2"></a><span class="cf">while</span> (ix <span class="op">&lt;</span> fruit<span class="op">.</span><span class="at">length</span>) {</span>
<span id="cb137-3"><a href="#cb137-3"></a>  <span class="kw">let</span> letter <span class="op">=</span> fruit[ix]<span class="op">;</span></span>
<span id="cb137-4"><a href="#cb137-4"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(letter)<span class="op">;</span></span>
<span id="cb137-5"><a href="#cb137-5"></a>  ix<span class="op">++;</span></span>
<span id="cb137-6"><a href="#cb137-6"></a>}</span></code></pre></div>
<p>The loop condition is <code>ix &lt; fruit.length</code>, so when
<code>ix</code> is equal to the length of the string, the condition is
false, and the body of the loop is not executed. The last character
accessed is the one with the index <code>fruit.length - 1</code>, which
is the last character in the string.</p>
<p>But we’ve previously seen how the <code>for</code> loop can easily
iterate over the elements in a list and it can do so for strings as
well:</p>
<div class="sourceCode" id="cb138"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb138-1"><a href="#cb138-1"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> fruit<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb138-2"><a href="#cb138-2"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(fruit[i])<span class="op">;</span></span>
<span id="cb138-3"><a href="#cb138-3"></a>}</span></code></pre></div>
<p>As we iterate through the characters in <code>fruit</code>, the loop
variable, <code>i</code> represents each index in the string. The loop
continues until no characters are left. Here we can see the expressive
power the <code>for</code> loop gives us compared to the while loop when
traversing a string.</p>
<p>The following example shows how to use concatenation and a
<code>for</code> loop to generate an abecedarian series. Abecedarian
refers to a series or list in which the elements appear in alphabetical
order. For example, in Robert McCloskey’s book <em>Make Way for
Ducklings</em>, the names of the ducklings are Jack, Kack, Lack, Mack,
Nack, Ouack, Pack, and Quack. This loop outputs these names in
order:</p>
<div class="sourceCode" id="cb139"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb139-1"><a href="#cb139-1"></a><span class="kw">let</span> prefixes <span class="op">=</span> <span class="st">&quot;JKLMNOPQ&quot;</span><span class="op">;</span></span>
<span id="cb139-2"><a href="#cb139-2"></a><span class="kw">let</span> suffix <span class="op">=</span> <span class="st">&quot;ack&quot;</span><span class="op">;</span></span>
<span id="cb139-3"><a href="#cb139-3"></a></span>
<span id="cb139-4"><a href="#cb139-4"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> prefixes<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb139-5"><a href="#cb139-5"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(prefixes[i] <span class="op">+</span> suffix)<span class="op">;</span></span>
<span id="cb139-6"><a href="#cb139-6"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb140"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>Jack</span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>Kack</span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>Lack</span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>Mack</span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a>Nack</span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a>Oack</span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a>Pack</span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a>Qack</span></code></pre></div>
<p>Of course, that’s not quite right because Ouack and Quack are
misspelled. You’ll fix this as an exercise below.</p>
</section>
<section id="substrings" class="level2">
<h2>Substrings</h2>
<p>A <em>substring</em> of a string is obtained by taking a smaller
sequence of characters from an existing string to create a new
string.</p>
<div class="sourceCode" id="cb141"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> s <span class="op">=</span> <span class="st">&quot;Pirates of the Caribbean&quot;</span><span class="op">;</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(s<span class="op">.</span><span class="fu">substring</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">7</span>))<span class="op">;</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>Pirates</span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(s<span class="op">.</span><span class="fu">substring</span>(<span class="dv">11</span><span class="op">:</span><span class="dv">14</span>))<span class="op">;</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>the</span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(s<span class="op">.</span><span class="fu">substring</span>(<span class="dv">15</span><span class="op">:</span><span class="dv">24</span>))<span class="op">;</span></span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a>Caribbean</span></code></pre></div>
<p>The <code>substring(startIndex, endIndex)</code> method of a string,
returns a new string without modifying the original string. The new
string (i.e. the <em>substring</em>) starts at (and includes) the
character at <code>startIndex</code> and ends at (but <em>excludes</em>)
the character at <code>endIndex</code>. This behavior makes sense if you
imagine the indices pointing <em>between</em> the characters, as in the
following diagram:</p>
<p><img src="figs/banana.png" /></p>
<p>If you imagine this as a piece of paper, <code>substring(m, n)</code>
copies out the part of the paper between the <code>n</code> and
<code>m</code> positions. Provided <code>m</code> and <code>n</code> are
both within the bounds of the string, your result will be of length
(m-n).</p>
<p>There are a few more tricks to <code>substring</code>. If you omit
the second argument (<code>endIndex</code>), the function returns a
substring from <code>startIndex</code> up to and including the last
character in the string. If you provide an <code>endIndex</code> greater
than <code>string.length</code>,</p>
<p><a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/substring">From
the MDN documentation</a>, we learn the following additional rules and
behaviors for <code>substring</code>.</p>
<ul>
<li>If the <code>indexEnd</code> argument is omitted,
<code>substring()</code> returns the substring from
<code>startIndex</code> to the end of the string</li>
<li>If <code>indexStart</code> is equal to <code>indexEnd</code>,
<code>substring()</code> returns an empty string</li>
<li>If <code>indexStart</code> is greater than <code>indexEnd</code>,
the <code>substring()</code> swaps the two arguments</li>
<li>Any argument value that is less than 0 is treated as 0</li>
<li>Any argument than <code>string.length</code> is treated as if it
were <code>string.length</code></li>
<li>Any argument value that is <code>NaN</code> is treated as if it were
0</li>
</ul>
</section>
<section id="string-comparison" class="level2">
<h2>String comparison</h2>
<p>The Boolean comparison operators work on strings. To see if two
strings are equal:</p>
<div class="sourceCode" id="cb142"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb142-1"><a href="#cb142-1"></a><span class="cf">if</span> (word <span class="op">===</span> <span class="st">&quot;banana&quot;</span>) {</span>
<span id="cb142-2"><a href="#cb142-2"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Yes, we are bananas!&quot;</span>)<span class="op">;</span></span>
<span id="cb142-3"><a href="#cb142-3"></a>}</span></code></pre></div>
<p>Other comparison operations are useful for putting words in
<code>lexicographical</code> order:</p>
<div class="sourceCode" id="cb143"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb143-1"><a href="#cb143-1"></a><span class="cf">if</span> (word <span class="op">&lt;</span> <span class="st">&quot;banana&quot;</span>) {</span>
<span id="cb143-2"><a href="#cb143-2"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Your word, &quot;</span> <span class="op">+</span> word <span class="op">+</span> <span class="st">&quot;, comes before banana.&quot;</span>)<span class="op">;</span></span>
<span id="cb143-3"><a href="#cb143-3"></a>}</span>
<span id="cb143-4"><a href="#cb143-4"></a><span class="cf">else</span> <span class="cf">if</span> (word <span class="op">&gt;</span> <span class="st">&quot;banana&quot;</span>) {</span>
<span id="cb143-5"><a href="#cb143-5"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Your word, &quot;</span> <span class="op">+</span> word <span class="op">+</span> <span class="st">&quot;, comes after banana.&quot;</span>)<span class="op">;</span></span>
<span id="cb143-6"><a href="#cb143-6"></a>}</span>
<span id="cb143-7"><a href="#cb143-7"></a><span class="cf">else</span> {</span>
<span id="cb143-8"><a href="#cb143-8"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Yes, we have no bananas!&quot;</span>)<span class="op">;</span></span>
<span id="cb143-9"><a href="#cb143-9"></a>}</span></code></pre></div>
<p>Keep in mind that Javascript string comparisons are <em>case
sensitive</em>, so, for exampe “Ape” does not equal “ape”. A common way
to address the problem of case is to convert strings to a standard
format, such as all lowercase, before performing the comparison. So:</p>
<div class="sourceCode" id="cb144"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> a <span class="op">=</span> <span class="st">&quot;Ape&quot;</span><span class="op">;</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> b <span class="op">=</span> <span class="st">&quot;ape&quot;</span><span class="op">;</span></span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>⠕ a <span class="op">===</span> b<span class="op">;</span></span>
<span id="cb144-4"><a href="#cb144-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">false</span></span>
<span id="cb144-5"><a href="#cb144-5" aria-hidden="true" tabindex="-1"></a>⠕ a <span class="op">=</span> a<span class="op">.</span><span class="fu">toLowerCase</span>()<span class="op">;</span></span>
<span id="cb144-6"><a href="#cb144-6" aria-hidden="true" tabindex="-1"></a>⠕ a <span class="op">===</span> b<span class="op">;</span></span>
<span id="cb144-7"><a href="#cb144-7" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">true</span></span></code></pre></div>
</section>
<section id="strings-are-immutable" class="level2">
<h2>Strings are immutable</h2>
<p>It is tempting to use the <code>[]</code> operator on the left side
of an assignment, with the intention of changing a character in a
string. For example:</p>
<div class="sourceCode" id="cb145"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb145-1"><a href="#cb145-1"></a><span class="kw">let</span> greeting <span class="op">=</span> <span class="st">&quot;Hello, world!&quot;</span><span class="op">;</span></span>
<span id="cb145-2"><a href="#cb145-2"></a>greeting[<span class="dv">0</span>] <span class="op">=</span> <span class="st">&#39;J&#39;</span><span class="op">;</span></span>
<span id="cb145-3"><a href="#cb145-3"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(greeting)<span class="op">;</span></span></code></pre></div>
<p>At best, the assignment on line 2 above will have no effect. If you
run the code in <strong>strict mode</strong>, you will get an error.</p>
<p>Strings are <strong>immutable</strong>, which means you can’t change
an existing string. The best you can do is create a new string that is a
variation on the original:</p>
<div class="sourceCode" id="cb146"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb146-1"><a href="#cb146-1"></a><span class="kw">let</span> greeting <span class="op">=</span> <span class="st">&quot;Hello, world!&quot;</span><span class="op">;</span></span>
<span id="cb146-2"><a href="#cb146-2"></a><span class="kw">let</span> newGreeting <span class="op">=</span> <span class="st">&quot;J&quot;</span> <span class="op">+</span> greeting<span class="op">.</span><span class="fu">substring</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb146-3"><a href="#cb146-3"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(newGreeting)<span class="op">;</span></span></code></pre></div>
<p>The solution here is to concatenate a new first letter onto a slice
of <code>greeting</code>. This operation has no effect on the original
string.</p>
</section>
<section id="testing-inclusion" class="level2">
<h2>Testing inclusion</h2>
<p>Javascript provides string functions that let us find substrings
within a string. <code>includes</code> returns a Boolean
<code>true</code> or <code>false</code> to indicate if the substring
exists in the string.</p>
<div class="sourceCode" id="cb147"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> s <span class="op">=</span> <span class="st">&quot;apple&quot;</span><span class="op">;</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>⠕ s<span class="op">.</span><span class="fu">includes</span>(<span class="st">&quot;p&quot;</span>)<span class="op">;</span></span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">true</span></span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>⠕ s<span class="op">.</span><span class="fu">includes</span>(<span class="st">&quot;i&quot;</span>)<span class="op">;</span></span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">false</span></span>
<span id="cb147-6"><a href="#cb147-6" aria-hidden="true" tabindex="-1"></a>⠕ s<span class="op">.</span><span class="fu">includes</span>(<span class="st">&quot;app&quot;</span>)<span class="op">;</span></span>
<span id="cb147-7"><a href="#cb147-7" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">true</span></span>
<span id="cb147-8"><a href="#cb147-8" aria-hidden="true" tabindex="-1"></a>⠕ s<span class="op">.</span><span class="fu">includes</span>(<span class="st">&quot;App&quot;</span>)<span class="op">;</span> <span class="co">// false because case doesn&#39;t match</span></span>
<span id="cb147-9"><a href="#cb147-9" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">false</span></span></code></pre></div>
<p>Note that a string is a substring of itself, and the empty string is
a substring of any other string. (Also note that computer scientists
like to think about these edge cases quite carefully!)</p>
<div class="sourceCode" id="cb148"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>⠕ s<span class="op">.</span><span class="fu">includes</span>(<span class="st">&quot;apple&quot;</span>)<span class="op">;</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">true</span></span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>⠕ s<span class="op">.</span><span class="fu">includes</span>(<span class="st">&quot;&quot;</span>)<span class="op">;</span></span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">true</span></span></code></pre></div>
<p>Combining <code>includes</code> with string concatenation using
<code>+=</code>, we can remove the vowels from a string:</p>
<div class="sourceCode" id="cb149"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb149-1"><a href="#cb149-1"></a><span class="kw">function</span> <span class="fu">removeVowels</span>(s) {</span>
<span id="cb149-2"><a href="#cb149-2"></a>  <span class="kw">let</span> vowels <span class="op">=</span> <span class="st">&quot;aeiou&quot;</span><span class="op">;</span></span>
<span id="cb149-3"><a href="#cb149-3"></a>  <span class="kw">let</span> sansVowels <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb149-4"><a href="#cb149-4"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> s<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb149-5"><a href="#cb149-5"></a>   <span class="kw">let</span> c <span class="op">=</span> s[i]<span class="op">.</span><span class="fu">toLowerCase</span>()<span class="op">;</span></span>
<span id="cb149-6"><a href="#cb149-6"></a>   <span class="cf">if</span>(<span class="op">!</span>vowels<span class="op">.</span><span class="fu">includes</span>(c)) {</span>
<span id="cb149-7"><a href="#cb149-7"></a>     sansVowels <span class="op">+=</span> s[i]<span class="op">;</span></span>
<span id="cb149-8"><a href="#cb149-8"></a>   }</span>
<span id="cb149-9"><a href="#cb149-9"></a>  }</span>
<span id="cb149-10"><a href="#cb149-10"></a>  <span class="cf">return</span> sansVowels<span class="op">;</span></span>
<span id="cb149-11"><a href="#cb149-11"></a>}</span>
<span id="cb149-12"><a href="#cb149-12"></a></span>
<span id="cb149-13"><a href="#cb149-13"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">removeVowels</span>(<span class="st">&quot;CompSci&quot;</span>))<span class="op">;</span> <span class="co">// CmpSc</span></span>
<span id="cb149-14"><a href="#cb149-14"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">removeVowels</span>(<span class="st">&quot;A dark and stormy night.&quot;</span>))<span class="op">;</span> <span class="co">//  drk nd strmy nght.</span></span></code></pre></div>
<p><a href="https://repl.it/@mcuringa/remove-vowels">Check out this
function on repl.it</a></p>
<p>This short function uses several of the techniques and patterns we
have previously seen. We use a finite <code>for</code> loop to iterate
up to <code>s.length</code> to traverse the string. We convert
<code>c</code> to lowercase for the comparison where we test for
inclusion in <code>vowels</code>. We create an empty string,
<code>sansVowels</code> that accumulates the non-vowel characters that
we find.</p>
</section>
<section id="a-find-function" class="level2">
<h2>A <code>find</code> function</h2>
<p>What does the following function do?</p>
<div class="sourceCode" id="cb150"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb150-1"><a href="#cb150-1"></a><span class="co">// Find and return the index of ch in strng.</span></span>
<span id="cb150-2"><a href="#cb150-2"></a><span class="co">// Return -1 if ch does not occur in strng.</span></span>
<span id="cb150-3"><a href="#cb150-3"></a><span class="kw">function</span> <span class="fu">find</span>(strng<span class="op">,</span> ch) {</span>
<span id="cb150-4"><a href="#cb150-4"></a></span>
<span id="cb150-5"><a href="#cb150-5"></a>  <span class="cf">for</span>(<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> strng<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb150-6"><a href="#cb150-6"></a>   <span class="cf">if</span>(strng[i] <span class="op">===</span> ch) {</span>
<span id="cb150-7"><a href="#cb150-7"></a>     <span class="cf">return</span> i<span class="op">;</span></span>
<span id="cb150-8"><a href="#cb150-8"></a>   }</span>
<span id="cb150-9"><a href="#cb150-9"></a>  }</span>
<span id="cb150-10"><a href="#cb150-10"></a>  <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb150-11"><a href="#cb150-11"></a>}</span>
<span id="cb150-12"><a href="#cb150-12"></a><span class="fu">test</span>(<span class="fu">find</span>(<span class="st">&quot;Compsci&quot;</span><span class="op">,</span> <span class="st">&quot;p&quot;</span>) <span class="op">==</span> <span class="dv">3</span>)</span>
<span id="cb150-13"><a href="#cb150-13"></a><span class="fu">test</span>(<span class="fu">find</span>(<span class="st">&quot;Compsci&quot;</span><span class="op">,</span> <span class="st">&quot;C&quot;</span>) <span class="op">==</span> <span class="dv">0</span>)</span>
<span id="cb150-14"><a href="#cb150-14"></a><span class="fu">test</span>(<span class="fu">find</span>(<span class="st">&quot;Compsci&quot;</span><span class="op">,</span> <span class="st">&quot;i&quot;</span>) <span class="op">==</span> <span class="dv">6</span>)</span>
<span id="cb150-15"><a href="#cb150-15"></a><span class="fu">test</span>(<span class="fu">find</span>(<span class="st">&quot;Compsci&quot;</span><span class="op">,</span> <span class="st">&quot;x&quot;</span>) <span class="op">==</span> <span class="op">-</span><span class="dv">1</span>)</span></code></pre></div>
<p>In a sense, <code>find</code> is the opposite of the indexing
operator. Instead of taking an index and extracting the corresponding
character, it takes a character and finds the index where that character
appears. If the character is not found, the function returns
<code>-1</code>.</p>
<p>This is another example where we see a <code>return</code> statement
inside a loop. If <code>strng[i] === ch</code>, the function returns
immediately, breaking out of the loop prematurely.</p>
<p>If the character doesn’t appear in the string, then the program exits
the loop normally and returns <code>-1</code>.</p>
<p>This pattern of computation is sometimes called a <strong>eureka
traversal</strong> or <strong>short-circuit evaluation</strong>, because
as soon as we find what we are looking for, we can cry “Eureka!”, take
the short-circuit, and stop looking.</p>
</section>
<section id="looping-and-counting" class="level2">
<h2>Looping and counting</h2>
<p>The following program counts the number of times the letter
<code>a</code> appears in a string, and is another example of the
<strong>counter pattern</strong>.</p>
<div class="sourceCode" id="cb151"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb151-1"><a href="#cb151-1"></a><span class="kw">function</span> <span class="fu">countA</span>(text) {</span>
<span id="cb151-2"><a href="#cb151-2"></a>  <span class="kw">let</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb151-3"><a href="#cb151-3"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> text<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb151-4"><a href="#cb151-4"></a>   <span class="cf">if</span> (text[i] <span class="op">===</span> <span class="st">&quot;a&quot;</span>) {</span>
<span id="cb151-5"><a href="#cb151-5"></a>     count<span class="op">++;</span></span>
<span id="cb151-6"><a href="#cb151-6"></a>   }</span>
<span id="cb151-7"><a href="#cb151-7"></a>  }</span>
<span id="cb151-8"><a href="#cb151-8"></a>  <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb151-9"><a href="#cb151-9"></a>}</span>
<span id="cb151-10"><a href="#cb151-10"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">countA</span>(<span class="st">&quot;banana&quot;</span>) <span class="op">===</span> <span class="dv">3</span>)<span class="op">;</span></span></code></pre></div>
</section>
<section id="default-parameters" class="level2">
<h2>Default parameters</h2>
<p>To find the locations of the second or third occurrence of a
character in a string, we can modify the <code>find</code> function,
adding a third parameter for the starting position in the search
string:</p>
<div class="sourceCode" id="cb152"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb152-1"><a href="#cb152-1"></a><span class="kw">function</span> <span class="fu">find2</span>(strng<span class="op">,</span> ch<span class="op">,</span> start) {</span>
<span id="cb152-2"><a href="#cb152-2"></a>  <span class="kw">let</span> ix <span class="op">=</span> start<span class="op">;</span></span>
<span id="cb152-3"><a href="#cb152-3"></a>  <span class="cf">while</span> (ix <span class="op">&lt;</span> strng<span class="op">.</span><span class="at">length</span>) {</span>
<span id="cb152-4"><a href="#cb152-4"></a>   <span class="cf">if</span> (strng[ix] <span class="op">==</span> ch) {</span>
<span id="cb152-5"><a href="#cb152-5"></a>      <span class="cf">return</span> ix<span class="op">;</span></span>
<span id="cb152-6"><a href="#cb152-6"></a>   }</span>
<span id="cb152-7"><a href="#cb152-7"></a>   ix<span class="op">++;</span></span>
<span id="cb152-8"><a href="#cb152-8"></a>  }</span>
<span id="cb152-9"><a href="#cb152-9"></a>  <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb152-10"><a href="#cb152-10"></a>}</span>
<span id="cb152-11"><a href="#cb152-11"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">find2</span>(<span class="st">&quot;banana&quot;</span><span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="dv">2</span>) <span class="op">==</span> <span class="dv">3</span>)<span class="op">;</span></span></code></pre></div>
<p>The call <code>find2("banana", "a", 2)</code> now returns
<code>3</code>, the index of the first occurrence of “a” in “banana”
starting the search at index 2. What does
<code>find2("banana", "n", 3)</code> return? If you said, 4, there is a
good chance you understand how <code>find2</code> works.</p>
<p>Better still, we can combine <code>find</code> and <code>find2</code>
using a <strong>default parameter</strong>:</p>
<div class="sourceCode" id="cb153"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb153-1"><a href="#cb153-1"></a><span class="kw">function</span> <span class="fu">find</span>(strng<span class="op">,</span> ch<span class="op">,</span> start <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb153-2"><a href="#cb153-2"></a>  <span class="kw">let</span> ix <span class="op">=</span> start<span class="op">;</span></span>
<span id="cb153-3"><a href="#cb153-3"></a>  <span class="cf">while</span> (ix <span class="op">&lt;</span> strng<span class="op">.</span><span class="at">length</span>) {</span>
<span id="cb153-4"><a href="#cb153-4"></a>   <span class="cf">if</span> (strng[ix] <span class="op">==</span> ch) {</span>
<span id="cb153-5"><a href="#cb153-5"></a>      <span class="cf">return</span> ix<span class="op">;</span></span>
<span id="cb153-6"><a href="#cb153-6"></a>   }</span>
<span id="cb153-7"><a href="#cb153-7"></a>   ix<span class="op">++;</span></span>
<span id="cb153-8"><a href="#cb153-8"></a>  }</span>
<span id="cb153-9"><a href="#cb153-9"></a>  <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb153-10"><a href="#cb153-10"></a>}</span></code></pre></div>
<p>When a function has an optional default parameter, the caller
<em>may</em> provide a matching argument. If the third argument is
provided to <code>find</code>, it gets assigned to <code>start</code>.
But if the caller leaves the argument out, then start is given a default
value indicated by the assignment <code>start = 0</code> in the function
header.</p>
<p>So the call <code>find("banana", "a", 2)</code> to this version of
<code>find</code> behaves just like <code>find2</code>, while in the
call <code>find("banana", "a")</code>, <code>start</code> will be set to
the <strong>default value</strong> of <code>0</code>.</p>
<p>Adding another optional parameter to <code>find</code> makes it
search from a starting position, up to but not including the end
position:</p>
<div class="sourceCode" id="cb154"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb154-1"><a href="#cb154-1"></a><span class="kw">function</span> <span class="fu">find</span>(strng<span class="op">,</span> ch<span class="op">,</span> start <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> end <span class="op">=</span> <span class="kw">null</span>) {</span>
<span id="cb154-2"><a href="#cb154-2"></a>  <span class="kw">let</span> ix <span class="op">=</span> start<span class="op">;</span></span>
<span id="cb154-3"><a href="#cb154-3"></a>  end <span class="op">=</span> end <span class="op">||</span> strng<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb154-4"><a href="#cb154-4"></a></span>
<span id="cb154-5"><a href="#cb154-5"></a>  <span class="cf">while</span> (ix <span class="op">&lt;</span> end) {</span>
<span id="cb154-6"><a href="#cb154-6"></a>   <span class="cf">if</span> (strng[ix] <span class="op">==</span> ch) {</span>
<span id="cb154-7"><a href="#cb154-7"></a>      <span class="cf">return</span> ix<span class="op">;</span></span>
<span id="cb154-8"><a href="#cb154-8"></a>   }</span>
<span id="cb154-9"><a href="#cb154-9"></a>   ix<span class="op">++;</span></span>
<span id="cb154-10"><a href="#cb154-10"></a>  }</span>
<span id="cb154-11"><a href="#cb154-11"></a>  <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb154-12"><a href="#cb154-12"></a>}</span>
<span id="cb154-13"><a href="#cb154-13"></a></span></code></pre></div>
<p>The optional value for <code>end</code> is interesting: we give it a
default value <code>null</code> if the caller does not supply any
argument. In the body of the function we test what <code>end</code> is,
and if the caller did not supply any argument, we reassign
<code>end</code> to be the length of the string. If the caller has
supplied an argument for <code>end</code>, however, the caller’s value
will be used in the loop.</p>
<p>On line 3 we see a new use of the logical <code>||</code> operator in
the assignment expression, <code>end = end || strng.length;</code>. We
re-assign <code>end</code> the value of <code>end</code> (i.e. it
doesn’t change) if <code>end</code> is <strong>truthy</strong> value,
<strong>or</strong> we assign <code>end</code> a default value, of
<code>strng.length</code>. Because of the way Javascripts logical
operators and truthiness work, they can be useful for assignment. As you
read more Javascript code online and in books, you will see many
examples of code that use the <code>||</code> operator to assign default
values.</p>
<p>Here are some test cases that should print <code>true</code>:</p>
<div class="sourceCode" id="cb155"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb155-1"><a href="#cb155-1"></a><span class="kw">let</span> ss <span class="op">=</span> <span class="st">&quot;Javascript strings have some interesting methods.&quot;</span><span class="op">;</span></span>
<span id="cb155-2"><a href="#cb155-2"></a></span>
<span id="cb155-3"><a href="#cb155-3"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">find</span>(ss<span class="op">,</span> <span class="st">&quot;s&quot;</span>) <span class="op">===</span> <span class="dv">4</span>)<span class="op">;</span></span>
<span id="cb155-4"><a href="#cb155-4"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">find</span>(ss<span class="op">,</span> <span class="st">&quot;s&quot;</span><span class="op">,</span> <span class="dv">11</span>) <span class="op">===</span> <span class="dv">11</span>)<span class="op">;</span></span>
<span id="cb155-5"><a href="#cb155-5"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">find</span>(ss<span class="op">,</span> <span class="st">&quot;s&quot;</span><span class="op">,</span> <span class="dv">12</span>) <span class="op">===</span> <span class="dv">17</span>)<span class="op">;</span></span>
<span id="cb155-6"><a href="#cb155-6"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">find</span>(ss<span class="op">,</span> <span class="st">&quot;s&quot;</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">17</span>) <span class="op">===</span> <span class="op">-</span><span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb155-7"><a href="#cb155-7"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">find</span>(ss<span class="op">,</span> <span class="st">&quot;.&quot;</span>) <span class="op">===</span> ss<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>)<span class="op">;</span></span></code></pre></div>
</section>
<section id="the-built-in-indexof-method" class="level2">
<h2>The built-in <code>indexOf</code> method</h2>
<p>We wrote our own <code>find</code> function above, but Javascript’s
string object includes its own version of <code>find</code> called
<code>indexOf</code>.</p>
<p><a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf">You
can see how it works in the MDN docs</a>.</p>
<div class="sourceCode" id="cb156"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb156-1"><a href="#cb156-1"></a><span class="kw">let</span> ss <span class="op">=</span> <span class="st">&quot;Javascript strings have some interesting methods.&quot;</span><span class="op">;</span></span>
<span id="cb156-2"><a href="#cb156-2"></a></span>
<span id="cb156-3"><a href="#cb156-3"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(ss<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">&quot;s&quot;</span>) <span class="op">===</span> <span class="dv">4</span>)<span class="op">;</span></span>
<span id="cb156-4"><a href="#cb156-4"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(ss<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">&quot;s&quot;</span><span class="op">,</span> <span class="dv">11</span>) <span class="op">===</span> <span class="dv">11</span>)<span class="op">;</span></span>
<span id="cb156-5"><a href="#cb156-5"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(ss<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">&quot;s&quot;</span><span class="op">,</span> <span class="dv">12</span>) <span class="op">===</span> <span class="dv">17</span>)<span class="op">;</span></span>
<span id="cb156-6"><a href="#cb156-6"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(ss<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">&quot;s&quot;</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">17</span>) <span class="op">===</span> <span class="dv">17</span>)<span class="op">;</span> <span class="co">// indexOf ignores the argument to end</span></span>
<span id="cb156-7"><a href="#cb156-7"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(ss<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">&quot;.&quot;</span>) <span class="op">===</span> ss<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>)<span class="op">;</span></span></code></pre></div>
<p><code>indexOf</code> does not have the optional <code>end</code>
paremeter. It always seachers until the end of the string. In the case
<code>ss.indexOf("s", 12, 17) === 17</code> it does not create an error
to pass in the third argument, however it is ignored entirely.</p>
<p>The built-in <code>indexOf</code> method is more general than our
version. It can find substrings, not just single characters:</p>
<div class="sourceCode" id="cb157"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="st">&quot;banana&quot;</span><span class="op">.</span><span class="fu">indexOf</span>(<span class="st">&quot;nan&quot;</span>)</span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">2</span></span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="st">&quot;banana&quot;</span><span class="op">.</span><span class="fu">indexOf</span>(<span class="st">&quot;na&quot;</span><span class="op">,</span> <span class="dv">3</span>)</span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">4</span></span></code></pre></div>
<p>Usually we’d prefer to use the methods that Javascript provides
rather than reinvent our own equivalents. But many of the built-in
functions and methods make good teaching exercises, and the underlying
techniques you learn are your building blocks to becoming a proficient
programmer.</p>
</section>
<section id="the-split-method" class="level2">
<h2>The <code>split</code> method</h2>
<p>One of the most useful methods on strings is the <code>split</code>
method: it splits a single multi-word string into an array of individual
words (“substrings”). The first parameter of <code>split</code>
specifies the character or substring (or regular expression, we’ll see
later) to be used to break the string into words. In the example below,
we split <code>ss</code> into words using a single space
<code>' '</code>;</p>
<div class="sourceCode" id="cb158"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> ss <span class="op">=</span> <span class="st">&quot;Well I never did said Alice&quot;</span><span class="op">;</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> words <span class="op">=</span> ss<span class="op">.</span><span class="fu">split</span>(<span class="st">&quot; &quot;</span>)<span class="op">;</span></span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>⠕ words</span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [<span class="st">&#39;Well&#39;</span><span class="op">,</span> <span class="st">&#39;I&#39;</span><span class="op">,</span> <span class="st">&#39;never&#39;</span><span class="op">,</span> <span class="st">&#39;did&#39;</span><span class="op">,</span> <span class="st">&#39;said&#39;</span><span class="op">,</span> <span class="st">&#39;Alice&#39;</span>]</span></code></pre></div>
</section>
<section id="cleaning-up-your-strings" class="level2">
<h2>Cleaning up your strings</h2>
<p>We’ll often work with strings that contain punctuation, or tab and
newline characters, especially, as we’ll see in a future chapter, when
we read our text from files or from the Internet. But if we’re writing a
program, say, to count word frequencies or check the spelling of each
word, we’d prefer to strip off these unwanted characters.</p>
<p>We’ll show just one example of how to strip punctuation from a
string. Remember that strings are immutable, so we cannot change the
string with the punctuation — we need to traverse the original string
and create a new string, omitting any punctuation:</p>
<div class="sourceCode" id="cb159"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb159-1"><a href="#cb159-1"></a><span class="kw">function</span> <span class="fu">removePunctuation</span>(s) {</span>
<span id="cb159-2"><a href="#cb159-2"></a>  <span class="kw">let</span> punctuation <span class="op">=</span> <span class="st">&quot;!</span><span class="sc">\&quot;</span><span class="st">#$%&amp;&#39;()*+,-./:;&lt;=&gt;?@[</span><span class="sc">\\</span><span class="st">]^_`{|}~&quot;</span><span class="op">;</span></span>
<span id="cb159-3"><a href="#cb159-3"></a>  <span class="kw">let</span> cleanString <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb159-4"><a href="#cb159-4"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> s<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb159-5"><a href="#cb159-5"></a>   <span class="cf">if</span> (punctuation<span class="op">.</span><span class="fu">indexOf</span>(s[i]) <span class="op">===</span> <span class="op">-</span><span class="dv">1</span>) {</span>
<span id="cb159-6"><a href="#cb159-6"></a>     cleanString <span class="op">+=</span> s[i]<span class="op">;</span></span>
<span id="cb159-7"><a href="#cb159-7"></a>   }</span>
<span id="cb159-8"><a href="#cb159-8"></a>  }</span>
<span id="cb159-9"><a href="#cb159-9"></a>  <span class="cf">return</span> cleanString<span class="op">;</span></span>
<span id="cb159-10"><a href="#cb159-10"></a>}</span></code></pre></div>
<p>Composing together this function and the <code>split</code> method
from the previous section makes a useful combination — we’ll clean out
the punctuation, and <code>split</code> will clean out the newlines and
tabs while turning the string into a list of words:</p>
<div class="sourceCode" id="cb160"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb160-1"><a href="#cb160-1"></a><span class="kw">let</span> text <span class="op">=</span> <span class="vs">`Born two centuries ago, Ada Lovelace was a pioneer of computer</span></span>
<span id="cb160-2"><a href="#cb160-2"></a><span class="vs">science. She took part in writing the first published program and was a</span></span>
<span id="cb160-3"><a href="#cb160-3"></a><span class="vs">computing visionary, recognizing for the first time that computers could do</span></span>
<span id="cb160-4"><a href="#cb160-4"></a><span class="vs">much more than just calculations!`</span><span class="op">;</span></span>
<span id="cb160-5"><a href="#cb160-5"></a></span>
<span id="cb160-6"><a href="#cb160-6"></a><span class="kw">let</span> words <span class="op">=</span> <span class="fu">removePunctuation</span>(text)<span class="op">.</span><span class="fu">toLowerCase</span>()<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">\s</span><span class="ss">/</span>)<span class="op">;</span></span>
<span id="cb160-7"><a href="#cb160-7"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(words)<span class="op">;</span></span></code></pre></div>
<p>The output:</p>
<div class="sourceCode" id="cb161"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>[ <span class="st">&#39;born&#39;</span><span class="op">,</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;two&#39;</span><span class="op">,</span></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;centuries&#39;</span><span class="op">,</span></span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;ago&#39;</span><span class="op">,</span></span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;ada&#39;</span><span class="op">,</span></span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;lovelace&#39;</span><span class="op">,</span></span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;much&#39;</span><span class="op">,</span></span>
<span id="cb161-9"><a href="#cb161-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;more&#39;</span><span class="op">,</span></span>
<span id="cb161-10"><a href="#cb161-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;than&#39;</span><span class="op">,</span></span>
<span id="cb161-11"><a href="#cb161-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;just&#39;</span><span class="op">,</span></span>
<span id="cb161-12"><a href="#cb161-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;calculations&#39;</span> ]                   </span></code></pre></div>
<p>Careful readers will have noticed a new syntax for the argument to
<code>split</code>, above. <code>/\s/</code> is a Javascript
<strong>regular expression</strong> (aka regex) which splits the string
on any <strong>whitespace</strong> — regular spaces, tabs, and newlines.
Regular expressions are powerful patterns for matching (and replacing)
substrings in strings. Many of the Javascript string methods accept
either plain strings are regular expressions as arguments. Regular
expressions are beyond the scope of this chapter, but we will
demonstrate a few useful examples. <a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions">MDN
offers a guide to using Regular Expressions in Javascript.</a></p>
<p>There are other useful string methods, but this book isn’t intended
to be a reference manual. On the other hand, the <em>Mozilla Developers
Network</em> is an excellent reference. You can see all of the String
methods here &lt;https://developer.mozilla.org/en-
US/docs/Web/JavaScript/Reference/Global_Objects/String&gt;.</p>
</section>
<section id="template-strings" class="level2">
<h2>Template strings</h2>
<p>Template strings are the easiest and most powerful way to format
strings in Javascript. We have already seen how we can use them with the
backtick (```) for multiline strings.</p>
<p>Template strings allow us to embed Javascript expressions in a string
without using string concatenation. Here are some examples:</p>
<div class="sourceCode" id="cb162"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb162-1"><a href="#cb162-1"></a><span class="kw">let</span> s1 <span class="op">=</span> <span class="vs">`The Javascript value of π from the math library is </span><span class="sc">${</span><span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span><span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb162-2"><a href="#cb162-2"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(s1)<span class="op">;</span></span>
<span id="cb162-3"><a href="#cb162-3"></a></span>
<span id="cb162-4"><a href="#cb162-4"></a><span class="kw">let</span> name <span class="op">=</span> <span class="st">&quot;Alice&quot;</span><span class="op">;</span></span>
<span id="cb162-5"><a href="#cb162-5"></a><span class="kw">let</span> age <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb162-6"><a href="#cb162-6"></a><span class="kw">let</span> s2 <span class="op">=</span> <span class="vs">`I am </span><span class="sc">${</span>name<span class="sc">}</span><span class="vs"> and I am </span><span class="sc">${</span>age<span class="sc">}</span><span class="vs"> years old.`</span><span class="op">;</span></span>
<span id="cb162-7"><a href="#cb162-7"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(s2)<span class="op">;</span></span>
<span id="cb162-8"><a href="#cb162-8"></a></span>
<span id="cb162-9"><a href="#cb162-9"></a><span class="kw">let</span> n1 <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb162-10"><a href="#cb162-10"></a><span class="kw">let</span> n2 <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb162-11"><a href="#cb162-11"></a>s3 <span class="op">=</span> <span class="vs">`2**10 = </span><span class="sc">${</span><span class="dv">2</span><span class="op">**</span><span class="dv">10</span><span class="sc">}</span><span class="vs"> and </span><span class="sc">${</span>n1<span class="sc">}</span><span class="vs"> * </span><span class="sc">${</span>n2<span class="sc">}</span><span class="vs"> = </span><span class="sc">${</span>n1 <span class="op">*</span> n2<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb162-12"><a href="#cb162-12"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(s3)<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb163"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>The Javascript value <span class="kw">of</span> π <span class="im">from</span> the math library is <span class="fl">3.141592653589793</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>I am Alice and I am <span class="dv">10</span> years old<span class="op">.</span></span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="op">**</span><span class="dv">10</span> <span class="op">=</span> <span class="dv">1024</span> and <span class="dv">4</span> <span class="op">*</span> <span class="dv">5</span> <span class="op">=</span> <span class="dv">20</span></span></code></pre></div>
<p>The template strings resolve any Javascript expression inside the
<code>${}</code> placeholders to a string and then concatenate the
template string into a single string. They can make our code both easier
to read and easier to write. You can <a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">learn
more about template strings from the docs</a>.</p>
<hr />
</section>
<section id="glossary-6" class="level2">
<h2>Glossary</h2>
<dl>
<dt>compound data type</dt>
<dd>
<p>A data type in which the values are made up of components, or
elements, that are themselves values.</p>
</dd>
<dt>default value</dt>
<dd>
<p>The value given to an optional parameter if no argument for it is
provided in the function call.</p>
</dd>
<dt>dot notation</dt>
<dd>
<p>Use of the <strong>dot operator</strong>, <code>.</code>, to access
methods and properties of an object.</p>
</dd>
<dt>immutable data value</dt>
<dd>
<p>A data value which cannot be modified. Assignments to elements or
slices (sub-parts) of immutable values cause a runtime error.</p>
</dd>
<dt>index</dt>
<dd>
<p>A variable or value used to select a member of an ordered collection,
such as a character from a string, or an element from a list.</p>
</dd>
<dt>indexing (<code>[]</code>)</dt>
<dd>
<p>Access a single character in a string using its position (starting
from 0). Example: <code>"This"[2]</code> evaluates to
<code>"i"</code>.</p>
</dd>
<dt>length property (<code>string.length</code>)</dt>
<dd>
<p>Returns the number of characters in a string. Example:
<code>"happy".length</code> evaluates to <code>5</code>.</p>
</dd>
<dt>mutable data value</dt>
<dd>
<p>A data value which can be modified. The types of all mutable values
are compound types. Lists and dictionaries are mutable; strings and
tuples are not.</p>
</dd>
<dt>optional parameter</dt>
<dd>
<p>A parameter written in a function header with an assignment to a
default value which it will receive if no corresponding argument is
given for it in the function call.</p>
</dd>
<dt>regular expression</dt>
<dd>
<p>A pattern expressed using the regular expression language to find a
substring within string.</p>
</dd>
<dt>short-circuit evaluation</dt>
<dd>
<p>A style of programming that shortcuts extra work as soon as the
outcome is know with certainty. In this chapter our <code>find</code>
function returned as soon as it found what it was looking for; it didn’t
traverse all the rest of the items in the string.</p>
</dd>
<dt>substring</dt>
<dd>
<p>A part of a string (substring) specified by a range of indices. More
generally, a subsequence of any sequence type in Javascript can be
created using the <code>substring</code> method of string:
<code>"testing".substring(0,4)</code>.</p>
</dd>
<dt>traverse</dt>
<dd>
<p>To iterate through the elements of a collection, performing a similar
operation on each.</p>
</dd>
<dt>whitespace</dt>
<dd>
<p>Any of the characters that move the cursor without printing visible
characters. Whitespace in Javascript can be represented by the regular
expression <code>/\s/</code>.</p>
</dd>
</dl>
</section>
<section id="string-exercises" class="level2">
<h2>String Exercises</h2>
<ol type="1">
<li><p><strong>Count vowels.</strong> Write a function
<code>countVowels(str)</code> that returns the number of vowels in the
string <code>str</code>.</p></li>
<li><p><strong>Quack.</strong> Modify:</p>
<div class="sourceCode" id="cb164"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb164-1"><a href="#cb164-1"></a><span class="kw">let</span> prefixes <span class="op">=</span> <span class="st">&quot;JKLMNOPQ&quot;</span><span class="op">;</span></span>
<span id="cb164-2"><a href="#cb164-2"></a><span class="kw">let</span> suffix <span class="op">=</span> <span class="st">&quot;ack&quot;</span><span class="op">;</span></span>
<span id="cb164-3"><a href="#cb164-3"></a></span>
<span id="cb164-4"><a href="#cb164-4"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> prefixes<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb164-5"><a href="#cb164-5"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(prefixes[i] <span class="op">+</span> suffix)<span class="op">;</span></span>
<span id="cb164-6"><a href="#cb164-6"></a>}</span></code></pre></div>
<p>so that <code>Ouack</code> and <code>Quack</code> are spelled
correctly.</p></li>
<li><p><strong>Count substring</strong> Write a function that counts how
many times a substring occurs in a string. Example:
<code>count("an", "banana") === 2</code>.</p></li>
<li><p><strong>Remove letter.</strong> Write a function that removes all
occurrences of a given letter from a string:
<code>removeLetter("cat", "a") === "ct"</code>.</p></li>
<li><p><strong>Reverse.</strong> Write a function
<code>reverse(text)</code> that returns <code>text</code> with the
letters reversed. So, <code>reverse("happy") === "yppah"</code></p></li>
<li><p><strong>Palindrome.</strong> Write a function
<code>isPalindrome(text)</code> that returns <code>true</code> if
<code>text</code> is a palindrome, or <code>false</code> if it is not. A
string is a palindrome if it reads the same forwards and backwards.
(Hint: use your <code>reverse</code> function to make this
easy!)</p></li>
</ol>
</section>
</section>
<section id="array" class="level1">
<h1>Array</h1>
<p>A <strong>array</strong> is an ordered collection of values. The
values that make up an array are called its <strong>elements</strong>,
or its <strong>items</strong>.</p>
<p>We will use the term <code>element</code> or <code>item</code> to
mean the same thing. Arrays are similar to strings, which are ordered
collections of characters, except that the elements of an array can be
of any type. Arrays and strings — and other collections that maintain
the order of their items — are called <strong>sequences</strong> or
<strong>lists</strong>.</p>
<section id="array-values" class="level2">
<h2>Array values</h2>
<p>There are several ways to create a new array; the simplest is to
enclose the elements in square brackets (<code>[</code> and
<code>]</code>):</p>
<div class="sourceCode" id="cb165"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb165-1"><a href="#cb165-1"></a><span class="kw">let</span> ps <span class="op">=</span> [<span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span>]<span class="op">;</span></span>
<span id="cb165-2"><a href="#cb165-2"></a><span class="kw">let</span> qs <span class="op">=</span> [<span class="st">&quot;spam&quot;</span><span class="op">,</span> <span class="st">&quot;bungee&quot;</span><span class="op">,</span> <span class="st">&quot;swallow&quot;</span>]<span class="op">;</span></span>
<span id="cb165-3"><a href="#cb165-3"></a><span class="kw">let</span> empty <span class="op">=</span> []<span class="op">;</span></span></code></pre></div>
<p>The first array contains four numbers. The second contains an array
of three strings. The third is an <strong>empty array</strong> — it’s
waiting for us to add elements. The elements of an array don’t have to
be the same type. The following array contains a string, a number, and
(amazingly) another array:</p>
<div class="sourceCode" id="cb166"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb166-1"><a href="#cb166-1"></a><span class="kw">let</span> zs <span class="op">=</span> [<span class="st">&quot;hello&quot;</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> [<span class="dv">10</span><span class="op">,</span> <span class="dv">20</span>]]<span class="op">;</span></span></code></pre></div>
<p>An array within another array is said to be
<strong>nested</strong>.</p>
<p>We have already seen that we can assign array values to variables or
pass arrays as parameters to functions:</p>
<div class="sourceCode" id="cb167"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> vocabulary <span class="op">=</span> [<span class="st">&quot;apple&quot;</span><span class="op">,</span> <span class="st">&quot;cheese&quot;</span><span class="op">,</span> <span class="st">&quot;dog&quot;</span>]<span class="op">;</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> numbers <span class="op">=</span> [<span class="dv">17</span><span class="op">,</span> <span class="dv">123</span>]<span class="op">;</span></span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> anEmptyList <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(vocabulary<span class="op">,</span> numbers<span class="op">,</span> an_empty_list)</span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a>[ <span class="st">&#39;apple&#39;</span><span class="op">,</span> <span class="st">&#39;cheese&#39;</span><span class="op">,</span> <span class="st">&#39;dog&#39;</span> ] [ <span class="dv">17</span><span class="op">,</span> <span class="dv">123</span> ] []</span></code></pre></div>
</section>
<section id="accessing-elements" class="level2">
<h2>Accessing elements</h2>
<p>The syntax for accessing the elements of an array is the same as the
syntax for accessing the characters of a string — the index operator:
<code>[]</code> (not to be confused with an empty array). The expression
inside the brackets specifies the index. Remember that the indices start
at 0 and can be integers up to <code>length - 1</code>:</p>
<div class="sourceCode" id="cb168"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>⠕ numbers[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">17</span></span></code></pre></div>
<p>Any expression evaluating to an integer can be used as an index:</p>
<div class="sourceCode" id="cb169"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>⠕ numbers[<span class="dv">9</span><span class="op">-</span><span class="dv">8</span>]<span class="op">;</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">123</span></span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>⠕ numbers[<span class="st">&quot;1&quot;</span>]</span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">undefined</span></span></code></pre></div>
<p>If you try to access an element that does not exist, Javascript
returns <code>undefined</code>:</p>
<div class="sourceCode" id="cb170"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>⠕ numbers[<span class="dv">5</span>]<span class="op">;</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">undefined</span></span></code></pre></div>
<p>If you assign a value to an element that does not exist, Javascript
will add the value to the array at that index, and create empty elements
in the intervening indices.</p>
<div class="sourceCode" id="cb171"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>⠕ numbers[<span class="dv">5</span>] <span class="op">=</span> <span class="dv">22</span><span class="op">;</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">22</span></span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a>⠕ numbers<span class="op">;</span></span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="dv">17</span><span class="op">,</span> <span class="dv">123</span><span class="op">,</span> <span class="op">&lt;</span><span class="dv">3</span> empty items<span class="op">&gt;,</span> <span class="dv">22</span> ]</span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a>⠕ numbers[<span class="dv">5</span>]<span class="op">;</span></span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">22</span></span></code></pre></div>
<p>It is common to use a loop variable as a list index.</p>
<div class="sourceCode" id="cb172"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb172-1"><a href="#cb172-1"></a><span class="kw">let</span> horsemen <span class="op">=</span> [<span class="st">&quot;war&quot;</span><span class="op">,</span> <span class="st">&quot;famine&quot;</span><span class="op">,</span> <span class="st">&quot;pestilence&quot;</span><span class="op">,</span> <span class="st">&quot;death&quot;</span>]<span class="op">;</span></span>
<span id="cb172-2"><a href="#cb172-2"></a></span>
<span id="cb172-3"><a href="#cb172-3"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> horsemen<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb172-4"><a href="#cb172-4"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(horsemen[i])<span class="op">;</span></span>
<span id="cb172-5"><a href="#cb172-5"></a>}</span></code></pre></div>
<p>Each time through the loop, the variable <code>i</code> is used as an
index into the array, printing the <code>i</code>’th element. This
pattern of computation is called a <strong>array traversal</strong>.</p>
<p>Like strings, Javascript arrays have a <code>length</code> property
that tells us how many items are in the array. When we use
<code>i &lt; horsemen.length</code> as the loop condition, our
<code>for</code> loop stops when it accesses the last element of the
array.</p>
</section>
<section id="array-membership" class="level2">
<h2>Array membership</h2>
<p>Javascript arrays have an <code>includes</code> method which returns
a Boolean <code>true</code> or <code>false</code> to indicate membership
of an item in an array.</p>
<div class="sourceCode" id="cb173"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> horsemen <span class="op">=</span> [<span class="st">&quot;war&quot;</span><span class="op">,</span> <span class="st">&quot;famine&quot;</span><span class="op">,</span> <span class="st">&quot;pestilence&quot;</span><span class="op">,</span> <span class="st">&quot;death&quot;</span>]<span class="op">;</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>⠕ horsemen<span class="op">.</span><span class="fu">includes</span>(<span class="st">&quot;pestilence&quot;</span>)<span class="op">;</span></span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">true</span></span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a>⠕ horsemen<span class="op">.</span><span class="fu">includes</span>(<span class="st">&quot;debauchery&quot;</span>)<span class="op">;</span></span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">false</span></span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true" tabindex="-1"></a>⠕ <span class="op">!</span>horsemen<span class="op">.</span><span class="fu">includes</span>(<span class="st">&quot;debauchery&quot;</span>)<span class="op">;</span></span>
<span id="cb173-7"><a href="#cb173-7" aria-hidden="true" tabindex="-1"></a><span class="kw">true</span></span></code></pre></div>
</section>
<section id="array-methods" class="level2">
<h2>Array methods</h2>
<p>The array <code>concat</code> method combines two arrays into a new
array by concatenating an array to the end of another array:</p>
<div class="sourceCode" id="cb174"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> b <span class="op">=</span> [<span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span>]<span class="op">;</span></span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> c <span class="op">=</span> a<span class="op">.</span><span class="fu">concat</span>(b)<span class="op">;</span></span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a>⠕ c</span>
<span id="cb174-5"><a href="#cb174-5" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span> ]</span></code></pre></div>
<p>Notice that <code>a</code> and <code>b</code> remain unchanged;</p>
<div class="sourceCode" id="cb175"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>⠕ a</span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span> ]</span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a>⠕ b</span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span> ]</span></code></pre></div>
<p><code>push</code> adds elements to the end of an array and returns
the new length of the array. You can pass more than one argument to
<code>push</code> and it will create a new element at the end of the
array for each parameter.</p>
<div class="sourceCode" id="cb176"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>⠕ a</span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span> ]</span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>⠕ a<span class="op">.</span><span class="fu">push</span>(<span class="dv">4</span>)<span class="op">;</span></span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">4</span></span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a>⠕ a</span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true" tabindex="-1"></a>[ <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span> ]</span>
<span id="cb176-7"><a href="#cb176-7" aria-hidden="true" tabindex="-1"></a>⠕ a<span class="op">.</span><span class="fu">push</span>(<span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb176-8"><a href="#cb176-8" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">7</span></span>
<span id="cb176-9"><a href="#cb176-9" aria-hidden="true" tabindex="-1"></a>⠕ a</span>
<span id="cb176-10"><a href="#cb176-10" aria-hidden="true" tabindex="-1"></a>[ <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">1</span> ]</span></code></pre></div>
<p><code>pop()</code> returns the last element in the array and removes
that element from the array. When <code>pop</code> is called on an empty
array, <code>undefined</code> is returned.</p>
<div class="sourceCode" id="cb177"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>⠕ a <span class="op">=</span> [ <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span> ]<span class="op">;</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>⠕ a<span class="op">.</span><span class="fu">pop</span>()<span class="op">;</span></span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">4</span></span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>⠕ a</span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a>[ <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]</span></code></pre></div>
<p><code>shift</code> and <code>unshift</code> are equivalent to
<code>pop</code> and <code>push</code> except they work on the beginning
of an array. <code>a.unshift(-1, 0)</code> puts <code>-1</code> in the
0’th element and <code>0</code> in the 1’th element. <code>shift</code>
returns the 0’th element of the array and removes it from the array. All
other elements are shifted to the left. like <code>pop</code>,
<code>shift</code> returns <code>undefined</code> when called on an
empty array.</p>
<p>There are many other useful array methods that you can <a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">read
about in the documentation</a>.</p>
</section>
<section id="array-slices" class="level2">
<h2>Array slices</h2>
<p>The <code>slice()</code> method of an array returns a new sub-array.
<code>slice</code> is similar to the <code>substring()</code> method of
strings.</p>
<div class="sourceCode" id="cb178"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> t <span class="op">=</span> [<span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;b&quot;</span><span class="op">,</span> <span class="st">&quot;c&quot;</span><span class="op">,</span> <span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;e&quot;</span><span class="op">,</span> <span class="st">&quot;f&quot;</span>]<span class="op">;</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>⠕ t<span class="op">.</span><span class="fu">slice</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="st">&#39;b&#39;</span><span class="op">,</span> <span class="st">&#39;c&#39;</span> ]</span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a>⠕ t<span class="op">.</span><span class="fu">slice</span>(<span class="dv">3</span>)<span class="op">;</span></span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="st">&#39;d&#39;</span><span class="op">,</span> <span class="st">&#39;e&#39;</span><span class="op">,</span> <span class="st">&#39;f&#39;</span> ]</span>
<span id="cb178-6"><a href="#cb178-6" aria-hidden="true" tabindex="-1"></a>⠕ t<span class="op">.</span><span class="fu">slice</span>()<span class="op">;</span></span>
<span id="cb178-7"><a href="#cb178-7" aria-hidden="true" tabindex="-1"></a>[ <span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="st">&#39;b&#39;</span><span class="op">,</span> <span class="st">&#39;c&#39;</span><span class="op">,</span> <span class="st">&#39;d&#39;</span><span class="op">,</span> <span class="st">&#39;e&#39;</span><span class="op">,</span> <span class="st">&#39;f&#39;</span> ]</span></code></pre></div>
<p>The <code>begin</code> and <code>end</code> arguments are optional.
If only <code>begin</code> is supplied, as in <code>t.slice(3);</code>,
<code>slice</code> returns all elements from <code>begin</code> to the
end of the array. If no arguments are provided (<code>t.slice()</code>)
a copy of the entire array is returned.</p>
</section>
<section id="arrays-are-mutable" class="level2">
<h2>Arrays are mutable</h2>
<p>Unlike strings, arrays are <strong>mutable</strong>, which means we
can change their elements. Using the index operator on the left side of
an assignment, we can update one of the elements:</p>
<div class="sourceCode" id="cb179"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> fruit <span class="op">=</span> [<span class="st">&quot;banana&quot;</span><span class="op">,</span> <span class="st">&quot;apple&quot;</span><span class="op">,</span> <span class="st">&quot;quince&quot;</span>]<span class="op">;</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>⠕ fruit[<span class="dv">0</span>] <span class="op">=</span> <span class="st">&quot;pear&quot;</span><span class="op">;</span></span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>⠕ fruit[<span class="dv">2</span>] <span class="op">=</span> <span class="st">&quot;orange&quot;</span><span class="op">;</span></span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>⠕ fruit</span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a>[ <span class="st">&#39;pear&#39;</span><span class="op">,</span> <span class="st">&#39;apple&#39;</span><span class="op">,</span> <span class="st">&#39;orange&#39;</span> ]</span></code></pre></div>
<p>The bracket operator applied to an array can appear anywhere in an
expression. When it appears on the left side of an assignment, it
changes one of the elements in the array, so the first element of
<code>fruit</code> has been changed from <code>"banana"</code> to
<code>"pear"</code>, and the last from <code>"quince"</code> to
<code>"orange"</code>. An assignment to an element of an array is called
<strong>item assignment</strong>. Item assignment does not work for
strings:</p>
<div class="sourceCode" id="cb180"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> myString <span class="op">=</span> <span class="st">&quot;TEST&quot;</span><span class="op">;</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>⠕ myString[<span class="dv">2</span>] <span class="op">=</span> <span class="st">&quot;X&quot;</span><span class="op">;</span></span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;X&#39;</span></span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true" tabindex="-1"></a>⠕ myString</span>
<span id="cb180-5"><a href="#cb180-5" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;TEST&#39;</span></span></code></pre></div>
<p>Javascript just ignores the illegal assignment and we see that
<code>myString</code> remains unchanged. This is not the case for
arrays:</p>
<div class="sourceCode" id="cb181"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> myCharArray <span class="op">=</span> [<span class="st">&quot;T&quot;</span><span class="op">,</span> <span class="st">&quot;E&quot;</span><span class="op">,</span> <span class="st">&quot;S&quot;</span><span class="op">,</span> <span class="st">&quot;T&quot;</span>]<span class="op">;</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>⠕ myCharArray[<span class="dv">2</span>] <span class="op">=</span> <span class="st">&quot;X&quot;</span><span class="op">;</span></span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a>⠕ myCharArray</span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="st">&#39;T&#39;</span><span class="op">,</span> <span class="st">&#39;E&#39;</span><span class="op">,</span> <span class="st">&#39;X&#39;</span><span class="op">,</span> <span class="st">&#39;T&#39;</span> ]</span></code></pre></div>
<p>With the <code>splice</code> method (not to be confused with
<code>slice</code>), we can update, insert, or delete multiple array
elements with a single function call.</p>
<p><code>shift</code> and <code>pop</code> remove single items from the
beginning or end of an array. <code>splice</code> is a more flexible
(and complicated) method that can return and delete items from any array
index, as well as insert or replace multiple items. <code>splice</code>
can operate on more than one element. Here are a few ways to use
<code>splice</code>. The syntax for <code>splice</code> is
<code>splice(index, numDelete, newItems...)</code> where
<code>index</code> indicates where the deletion or insertion should
begin, <code>numDelete</code> (optionally) indicates how many items to
remove. The remaining <code>newItems</code> can be any number of
arguments to be inserted in the array at <code>index</code>.</p>
<p>Delete multiple items from an index:</p>
<div class="sourceCode" id="cb182"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> chars <span class="op">=</span> [<span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;b&quot;</span><span class="op">,</span> <span class="st">&quot;c&quot;</span><span class="op">,</span> <span class="st">&quot;d&quot;</span><span class="op">,</span> <span class="st">&quot;e&quot;</span><span class="op">,</span> <span class="st">&quot;f&quot;</span>]<span class="op">;</span></span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> removedChars <span class="op">=</span> chars<span class="op">.</span><span class="fu">splice</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a>⠕ removedChars</span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="st">&#39;b&#39;</span><span class="op">,</span> <span class="st">&#39;c&#39;</span> ]</span>
<span id="cb182-5"><a href="#cb182-5" aria-hidden="true" tabindex="-1"></a>⠕ chars</span>
<span id="cb182-6"><a href="#cb182-6" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="st">&#39;d&#39;</span><span class="op">,</span> <span class="st">&#39;e&#39;</span><span class="op">,</span> <span class="st">&#39;f&#39;</span> ]</span></code></pre></div>
<p>Because the <code>numDelete</code> argument is zero, this inserts
items in the middle of an array:</p>
<div class="sourceCode" id="cb183"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> numbers <span class="op">=</span> [<span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span>]<span class="op">;</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>⠕ numbers<span class="op">.</span><span class="fu">splice</span>(<span class="dv">2</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">21</span><span class="op">,</span> <span class="dv">22</span>)<span class="op">;</span></span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>⠕ numbers</span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">21</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span> ]</span></code></pre></div>
<p>By passing in the number of items to delete, we can <em>replace</em>
multiple array elements with <code>splice</code>:</p>
<div class="sourceCode" id="cb184"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a>⠕ numbers <span class="op">=</span> [<span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span>]<span class="op">;</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>⠕ numbers<span class="op">.</span><span class="fu">splice</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">8</span>)<span class="op">;</span></span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>⠕ numbers</span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="dv">10</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">40</span> ]</span></code></pre></div>
</section>
<section id="objects-and-references" class="level2">
<h2>Objects and references</h2>
<p>After we execute these assignment statements</p>
<div class="sourceCode" id="cb185"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> <span class="st">&quot;banana&quot;</span><span class="op">;</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> b <span class="op">=</span> <span class="st">&quot;banana&quot;</span><span class="op">;</span></span></code></pre></div>
<p>we know that <code>a</code> and <code>b</code> will refer to a string
object with the letters <code>"banana"</code>. But we don’t know yet
whether they point to the <em>same</em> string object.</p>
<p>There are two possible ways the Javascript interpreter could arrange
its memory:</p>
<p><img src="figs/list1.png" /></p>
<p>In one case, <code>a</code> and <code>b</code> refer to two different
objects that have the same value. In the second case, they refer to the
same object.</p>
<p>When we use the equality operator on strings, tells us if they hold
the same value:</p>
<div class="sourceCode" id="cb186"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>⠕ a <span class="op">===</span> b</span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">true</span></span></code></pre></div>
<p>We cannot tell if they refere to the same object or not. Since
strings are <em>immutable</em>, Javascript can optimize resources by
making two names that refer to the same string value refer to the same
object.</p>
<p>This is not the case with arrays:</p>
<div class="sourceCode" id="cb187"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> b <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a>⠕ a <span class="op">===</span> b</span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">false</span></span></code></pre></div>
<p>The state snapshot here looks like this:</p>
<p><img src="figs/mult_references2.png"
title="State snapshot for equal different lists" /></p>
<p><code>a</code> and <code>b</code> have the same value but do not
refer to the same object.</p>
</section>
<section id="aliasing" class="level2">
<h2>Aliasing</h2>
<p>Since variables refer to objects, if we assign one variable to
another, both variables refer to the same object:</p>
<div class="sourceCode" id="cb188"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> b <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>⠕ a <span class="op">===</span> b</span>
<span id="cb188-4"><a href="#cb188-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">true</span></span></code></pre></div>
<p>In this case, the state snapshot looks like this:</p>
<p><img src="figs/mult_references3.png"
title="State snapshot for multiple references (aliases) to a list" /></p>
<p>Because the same array has two different names, <code>a</code> and
<code>b</code>, we say that it is <strong>aliased</strong>. Changes made
with one alias affect the other:</p>
<div class="sourceCode" id="cb189"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>⠕ b[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>⠕ a</span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="dv">5</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span> ]</span></code></pre></div>
<p>Although this behavior can be useful, it is sometimes unexpected or
undesirable. In general, it is safer to avoid aliasing when you are
working with mutable objects (i.e. arrays at this point in our textbook,
but we’ll meet more mutable objects as we cover classes and objects). Of
course, for immutable objects (i.e. strings), there’s no problem — it is
just not possible to change something and get a surprise when you access
an alias name. That’s why Javascript is free to alias strings (and any
other immutable kinds of data) when it sees an opportunity to
economize.</p>
</section>
<section id="cloning-arrays" class="level2">
<h2>Cloning arrays</h2>
<p>If we want to modify an array and also keep a copy of the original,
we need to be able to make a copy of the array itself, not just the
reference. This process is sometimes called <strong>cloning</strong>, to
avoid the ambiguity of the word copy.</p>
<p>The easiest way to clone an array is to call the <code>slice</code>
method with zero arguments:</p>
<div class="sourceCode" id="cb190"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> b <span class="op">=</span> a<span class="op">.</span><span class="fu">slice</span>()<span class="op">;</span></span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>⠕ b</span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span> ]</span>
<span id="cb190-5"><a href="#cb190-5" aria-hidden="true" tabindex="-1"></a>⠕ a <span class="op">===</span> b</span>
<span id="cb190-6"><a href="#cb190-6" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="kw">false</span></span></code></pre></div>
<p>Calling <code>slice</code> always creates a new array. In this case
the slice happens to consist of the whole array. So now the relationship
is like this:</p>
<p><img src="figs/mult_references2.png"
title="State snapshot for equal different lists" /></p>
<p>Now we are free to make changes to <code>b</code> without worrying
that we’ll inadvertently be changing <code>a</code>:</p>
<div class="sourceCode" id="cb191"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>⠕ b[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a>⠕ a</span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a>[ <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span> ]</span></code></pre></div>
</section>
<section id="array-parameters" class="level2">
<h2>Array parameters</h2>
<p>Passing an array as an argument actually passes a
<strong>reference</strong> to the array, not a copy or clone of the
array. So parameter passing creates an alias for you: the caller has one
variable referencing the array, and the called function has an alias,
but there is only one underlying array object.</p>
<p>For example, the function below takes an array as an argument and
multiplies each element in the array by 2:</p>
<div class="sourceCode" id="cb192"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb192-1"><a href="#cb192-1"></a><span class="co">/**</span></span>
<span id="cb192-2"><a href="#cb192-2"></a><span class="co"> * Overwrite each element in `t` with double its value</span></span>
<span id="cb192-3"><a href="#cb192-3"></a><span class="co"> */</span></span>
<span id="cb192-4"><a href="#cb192-4"></a><span class="kw">function</span> <span class="fu">doubleStuff</span> (t) {</span>
<span id="cb192-5"><a href="#cb192-5"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> t<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb192-6"><a href="#cb192-6"></a>    t[i] <span class="op">=</span> t[i] <span class="op">*</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb192-7"><a href="#cb192-7"></a>  }</span>
<span id="cb192-8"><a href="#cb192-8"></a>}</span></code></pre></div>
<p>If we add the following onto our script:</p>
<div class="sourceCode" id="cb193"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb193-1"><a href="#cb193-1"></a><span class="kw">let</span> things <span class="op">=</span> [<span class="dv">2</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">9</span>]<span class="op">;</span></span>
<span id="cb193-2"><a href="#cb193-2"></a><span class="fu">doubleStuff</span>(things)<span class="op">;</span></span>
<span id="cb193-3"><a href="#cb193-3"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(things)<span class="op">;</span></span></code></pre></div>
<p>When we run it we’ll get:</p>
<div class="sourceCode" id="cb194"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>[ <span class="dv">4</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">18</span> ]</span></code></pre></div>
<p>In the function above, the parameter <code>t</code> and the variable
<code>things</code> are aliases for the same object. So changes to
<code>t</code> or <code>things</code> are reflected in both
<code>t</code> <em>and</em> <code>things</code>.</p>
</section>
<section id="pure-functions-and-modifiers" class="level2">
<h2>Pure functions and modifiers</h2>
<p>Functions which take arrays as arguments and change them during
execution are called <strong>modifiers</strong> and the changes they
make are called <strong>side effects</strong>.</p>
<p>A <strong>pure function</strong> does not produce side effects. It
communicates with the calling program only through parameters, which it
does not modify, and a return value. Here is <code>doubleStuff</code>
written as a pure function:</p>
<div class="sourceCode" id="cb195"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb195-1"><a href="#cb195-1"></a><span class="co">/**</span></span>
<span id="cb195-2"><a href="#cb195-2"></a><span class="co"> * Double the value of each element in array `t`</span></span>
<span id="cb195-3"><a href="#cb195-3"></a><span class="co"> * and return a new array with the doubled values</span></span>
<span id="cb195-4"><a href="#cb195-4"></a><span class="co"> */</span></span>
<span id="cb195-5"><a href="#cb195-5"></a><span class="kw">function</span> <span class="fu">doubleStuff</span> (t) {</span>
<span id="cb195-6"><a href="#cb195-6"></a>  <span class="kw">let</span> tt <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb195-7"><a href="#cb195-7"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> t<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb195-8"><a href="#cb195-8"></a>    tt[i] <span class="op">=</span> t[i] <span class="op">*</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb195-9"><a href="#cb195-9"></a>  }</span>
<span id="cb195-10"><a href="#cb195-10"></a>  <span class="cf">return</span> tt<span class="op">;</span></span>
<span id="cb195-11"><a href="#cb195-11"></a>}</span></code></pre></div>
<p>This version of <code>doubleStuff</code> does not change its
arguments:</p>
<div class="sourceCode" id="cb196"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> things <span class="op">=</span> [<span class="dv">2</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">9</span>]<span class="op">;</span></span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> xs <span class="op">=</span> <span class="fu">doubleStuff</span>(things)<span class="op">;</span></span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a>⠕ things</span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="dv">2</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">9</span> ]</span>
<span id="cb196-5"><a href="#cb196-5" aria-hidden="true" tabindex="-1"></a>⠕ xs</span>
<span id="cb196-6"><a href="#cb196-6" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="dv">4</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">18</span> ]</span></code></pre></div>
<p>An early rule we saw for assignment said “first evaluate the right
hand side, then assign the resulting value to the variable”. So it is
quite safe to assign the function result to the same variable that was
passed to the function:</p>
<div class="sourceCode" id="cb197"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> things <span class="op">=</span> [<span class="dv">2</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">9</span>]<span class="op">;</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>⠕ things <span class="op">=</span> <span class="fu">doubleStuff</span>(things)<span class="op">;</span></span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a>⠕ things</span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="dv">4</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">18</span> ]</span></code></pre></div>
<aside id="pure-functions">
<p><strong>Which style is better?</strong></p>
<p>Anything that can be done with modifiers can also be done with pure
functions. In fact, some programming languages only allow pure
functions. There is some evidence that programs that use pure functions
are faster to develop and less error-prone than programs that use
modifiers. Nevertheless, modifiers are convenient at times, and in some
cases, functional programs are less efficient.</p>
<p>In general, we recommend that you write pure functions whenever it is
reasonable to do so and resort to modifiers only if there is a
compelling advantage. This approach might be called a <em>functional
programming style</em>.</p>
</aside>
</section>
<section id="functions-that-produce-arrays" class="level2">
<h2>Functions that produce arrays</h2>
<p>The pure version of <code>doubleStuff</code> above made use of an
important <strong>pattern</strong> for your toolbox. Whenever you need
to write a function that creates and returns an array, the pattern is
usually:</p>
<div class="sourceCode" id="cb198"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>initialize a result variable to be an empty array</span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>loop</span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a>   create a <span class="kw">new</span> element</span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a>   append it to result</span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> the result</span></code></pre></div>
<p>Let us show another use of this pattern. Assume you already have a
function <code>isPrime(x)</code> that can test if x is prime. Write a
function to return an array of all prime numbers less than n:</p>
<div class="sourceCode" id="cb199"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb199-1"><a href="#cb199-1"></a><span class="co">/**</span></span>
<span id="cb199-2"><a href="#cb199-2"></a><span class="co"> * Return an array of all prime numbers less than n.</span></span>
<span id="cb199-3"><a href="#cb199-3"></a><span class="co"> */</span></span>
<span id="cb199-4"><a href="#cb199-4"></a><span class="kw">function</span> <span class="fu">primesLessThanN</span>(n) {</span>
<span id="cb199-5"><a href="#cb199-5"></a>   <span class="kw">let</span> result <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb199-6"><a href="#cb199-6"></a>   <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb199-7"><a href="#cb199-7"></a>    <span class="cf">if</span> (<span class="fu">isPrime</span>(i)) {</span>
<span id="cb199-8"><a href="#cb199-8"></a>       result<span class="op">.</span><span class="fu">push</span>(i)<span class="op">;</span></span>
<span id="cb199-9"><a href="#cb199-9"></a>     }</span>
<span id="cb199-10"><a href="#cb199-10"></a>   }</span>
<span id="cb199-11"><a href="#cb199-11"></a>   <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb199-12"><a href="#cb199-12"></a> }</span></code></pre></div>
</section>
<section id="strings-and-arrays" class="level2">
<h2>Strings and arrays</h2>
<p>Two of the most useful methods on strings involve conversion to and
from arrays of substrings.<br />
The <code>split</code> method (which we’ve already seen) breaks a string
into an array of words. We have been using the simple regular expression
<code>/\s/</code> to split strings at the whitespace pattern.</p>
<div class="sourceCode" id="cb200"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> song <span class="op">=</span> <span class="st">&quot;The rain in Spain...&quot;</span><span class="op">;</span></span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> words <span class="op">=</span> song<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">\s</span><span class="ss">/</span>)<span class="op">;</span></span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a>⠕ words</span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="st">&#39;The&#39;</span><span class="op">,</span> <span class="st">&#39;rain&#39;</span><span class="op">,</span> <span class="st">&#39;in&#39;</span><span class="op">,</span> <span class="st">&#39;Spain...&#39;</span> ]</span></code></pre></div>
<p>In this example the whitespace regex is the
<strong>delimiter</strong> — the toke used to specify which string to
use as the boundary marker between substrings. The following example
uses the string <code>ai</code> as the delimiter:</p>
<div class="sourceCode" id="cb201"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a>⠕ song<span class="op">.</span><span class="fu">split</span>(<span class="st">&quot;ai&quot;</span>)<span class="op">;</span></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="st">&#39;The r&#39;</span><span class="op">,</span> <span class="st">&#39;n in Sp&#39;</span><span class="op">,</span> <span class="st">&#39;n...&#39;</span> ]</span></code></pre></div>
<p>Notice that the delimiter doesn’t appear in the result.</p>
<p>The inverse of the <code>split</code> method is <code>join</code>.
You choose a desired <strong>separator</strong> string, (often called
the <em>glue</em>) and join the array with the glue between each of the
elements:</p>
<div class="sourceCode" id="cb202"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> glue <span class="op">=</span> <span class="st">&quot;;&quot;</span><span class="op">;</span></span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> s <span class="op">=</span> words<span class="op">.</span><span class="fu">join</span>(glue)<span class="op">;</span></span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a>⠕ s</span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;The;rain;in;Spain...&#39;</span></span></code></pre></div>
<p>The array that you glue together (<code>words</code> in this example)
is not modified. Also, as these next examples show, you can use empty
glue or multi-character strings as glue:</p>
<div class="sourceCode" id="cb203"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a>⠕ words<span class="op">.</span><span class="fu">join</span>(<span class="st">&quot; --- &quot;</span>)<span class="op">;</span></span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;The --- rain --- in --- Spain...&#39;</span></span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a>⠕ words<span class="op">.</span><span class="fu">join</span>(<span class="st">&quot;&quot;</span>)<span class="op">;</span></span>
<span id="cb203-4"><a href="#cb203-4" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="st">&#39;TheraininSpain...&#39;</span></span></code></pre></div>
</section>
<section id="counting-words" class="level2">
<h2>Counting words</h2>
<p>Using the<code>split</code> method of strings, we can write an
elegant solution to counting words in a text by looping through the
array of words. In the code below we look at section [Martin Luther King
Jr’s 1963 “I have a dream …” speech]
(https://www.archives.gov/files/press/exhibits/dream-speech.pdf) in
order to count the number of times the word <em>dream</em> occurs.</p>
<div class="sourceCode" id="cb204"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb204-1"><a href="#cb204-1"></a><span class="kw">let</span> text <span class="op">=</span> <span class="vs">`I say to you today, my friends, so even</span></span>
<span id="cb204-2"><a href="#cb204-2"></a><span class="vs">though we face the difficulties of today and tomorrow,</span></span>
<span id="cb204-3"><a href="#cb204-3"></a><span class="vs">I still have a dream. It is a dream deeply rooted in</span></span>
<span id="cb204-4"><a href="#cb204-4"></a><span class="vs">the American dream. I have a dream that one day this</span></span>
<span id="cb204-5"><a href="#cb204-5"></a><span class="vs">nation will rise up and live out the true meaning of</span></span>
<span id="cb204-6"><a href="#cb204-6"></a><span class="vs">its creed: “We hold these truths to be self-evident:</span></span>
<span id="cb204-7"><a href="#cb204-7"></a><span class="vs">that all men are created equal.” I have a dream that</span></span>
<span id="cb204-8"><a href="#cb204-8"></a><span class="vs">one day on the red hills of Georgia the sons of former</span></span>
<span id="cb204-9"><a href="#cb204-9"></a><span class="vs">and the sons of former slave owners will be able to</span></span>
<span id="cb204-10"><a href="#cb204-10"></a><span class="vs">sit down together at the table of brotherhood.`</span><span class="op">;</span></span>
<span id="cb204-11"><a href="#cb204-11"></a></span>
<span id="cb204-12"><a href="#cb204-12"></a><span class="kw">let</span> words <span class="op">=</span> text<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">\s</span><span class="ss">/</span>)<span class="op">;</span></span>
<span id="cb204-13"><a href="#cb204-13"></a></span>
<span id="cb204-14"><a href="#cb204-14"></a><span class="kw">let</span> counter <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb204-15"><a href="#cb204-15"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> words<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb204-16"><a href="#cb204-16"></a>  <span class="cf">if</span> (words[i]<span class="op">.</span><span class="fu">includes</span>(<span class="st">&quot;dream&quot;</span>)) {</span>
<span id="cb204-17"><a href="#cb204-17"></a>    counter<span class="op">++;</span></span>
<span id="cb204-18"><a href="#cb204-18"></a>  }</span>
<span id="cb204-19"><a href="#cb204-19"></a>}</span>
<span id="cb204-20"><a href="#cb204-20"></a></span>
<span id="cb204-21"><a href="#cb204-21"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`The speech has </span><span class="sc">${</span>words<span class="op">.</span><span class="at">length</span><span class="sc">}</span><span class="vs"> words.</span></span>
<span id="cb204-22"><a href="#cb204-22"></a><span class="vs">We found &quot;dream&quot; </span><span class="sc">${</span>counter<span class="sc">}</span><span class="vs"> times.`</span>)<span class="op">;</span></span></code></pre></div>
<p><strong>code walk through</strong></p>
<div class="embed-responsive embed-responsive-16by9">
<iframe class="embed-responsive-item" src="https://www.youtube.com/embed/CySJma9dBJU?rel=0" allowfullscreen>
</iframe>
</div>
<p>Play with the code live at <a
href="https://repl.it/@mcuringa/DreamWordCount"
class="uri">https://repl.it/@mcuringa/DreamWordCount</a></p>
</section>
<section id="nested-arrays" class="level2">
<h2>Nested arrays</h2>
<p>A nested array is an array that appears as an element in another
array. In this array, the element with index 3 is a nested array:</p>
<div class="sourceCode" id="cb205"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb205-1"><a href="#cb205-1"></a>⠕ <span class="kw">let</span> nested <span class="op">=</span> [<span class="st">&quot;hello&quot;</span><span class="op">,</span> <span class="fl">2.0</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> [<span class="dv">10</span><span class="op">,</span> <span class="dv">20</span>]]<span class="op">;</span></span></code></pre></div>
<p>If we output the element at index 3, we get:</p>
<div class="sourceCode" id="cb206"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(nested[<span class="dv">3</span>])<span class="op">;</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [<span class="dv">10</span><span class="op">,</span> <span class="dv">20</span>]</span></code></pre></div>
<p>To extract an element from the nested array, we can proceed in two
steps:</p>
<div class="sourceCode" id="cb207"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a>⠕ elem <span class="op">=</span> nested[<span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a>⠕ elem[<span class="dv">0</span>]</span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">10</span></span></code></pre></div>
<p>Or we can combine them:</p>
<div class="sourceCode" id="cb208"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a>⠕ nested[<span class="dv">3</span>][<span class="dv">1</span>]</span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">20</span></span></code></pre></div>
<p>Bracket operators evaluate from left to right, so this expression
gets the 3’th element of <code>nested</code> and extracts the 1’th
element from it.</p>
</section>
<section id="matrices" class="level2">
<h2>Matrices</h2>
<p>Nested arrays are often used to represent matrices. For example, the
matrix:</p>
<p><img src="figs/matrix2.png" /></p>
<p>might be represented as:</p>
<div class="sourceCode" id="cb209"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> mx <span class="op">=</span> [[<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]<span class="op">,</span> [<span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span>]<span class="op">,</span> [<span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">9</span>]]<span class="op">;</span></span></code></pre></div>
<p><code>mx</code> is an array with three elements, where each element
is a row of the matrix. We can select an entire row from the matrix in
the usual way:</p>
<div class="sourceCode" id="cb210"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a>⠕ mx[<span class="dv">1</span>]</span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [<span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span>]</span></code></pre></div>
<p>Or we can extract a single element from the matrix using the
double-index form:</p>
<div class="sourceCode" id="cb211"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>⠕ mx[<span class="dv">1</span>][<span class="dv">2</span>]</span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> <span class="dv">6</span></span></code></pre></div>
<p>The first index selects the row, and the second index selects the
column. Although this way of representing matrices is common, it is not
the only possibility.</p>
</section>
<section id="glossary-7" class="level2">
<h2>Glossary</h2>
<dl>
<dt>aliases</dt>
<dd>
Multiple variables that contain references to the same object.
</dd>
<dt>array</dt>
<dd>
A collection of values, each in a fixed position within the array.
</dd>
<dt>clone</dt>
<dd>
To create a new object that has the same value as an existing object.
Copying a reference to an object creates an alias but doesn’t clone the
object.
</dd>
<dt>delimiter</dt>
<dd>
A character or string (sometimes called a token) used to indicate where
a string should be split.
</dd>
<dt>element</dt>
<dd>
One of the values in an array (or other sequence). The bracket operator
selects elements of an array. Also called <em>item</em>.
</dd>
<dt>immutable data value</dt>
<dd>
A data value which cannot be modified.
</dd>
<dt>index</dt>
<dd>
An integer value that indicates the position of an item in an array.
Indexes start from 0.
</dd>
<dt>item</dt>
<dd>
See <em>element</em>.
</dd>
<dt>array traversal</dt>
<dd>
The sequential accessing of each element in an array.
</dd>
<dt>modifier</dt>
<dd>
A function which changes its arguments inside the function body. Only
mutable types can be changed by modifiers.
</dd>
<dt>mutable data value</dt>
<dd>
A data value which can be modified. The types of all mutable values are
compound types. Arrays are mutable; strings are not.
</dd>
<dt>nested array</dt>
<dd>
An array which is an element of another array.
</dd>
<dt>object</dt>
<dd>
A thing to which a variable can refer.
</dd>
<dt>pattern</dt>
<dd>
A sequence of statements, or a style of coding something that has
general applicability in a number of different situations. Part of
becoming a mature Computer Scientist is to learn and establish the
patterns and algorithms that form your toolkit. Patterns often
correspond to your “mental chunking”.
</dd>
<dt>pure function</dt>
<dd>
A function which has no side effects. Pure functions only make changes
to the calling program through their return values.
</dd>
<dt>sequence</dt>
<dd>
Any of the data types that consist of an ordered collection of elements,
with each element identified by an index.
</dd>
<dt>side effect</dt>
<dd>
A change in the state of a program made by calling a function. Side
effects can only be produced by modifiers.
</dd>
<dt>step size</dt>
<dd>
The interval between successive elements of a linear sequence. The third
(and optional argument) to the <code>range</code> function is called the
step size. If not specified, it defaults to 1.
</dd>
</dl>
</section>
<section id="array-examples" class="level2">
<h2>Array Examples</h2>
<section id="example-1-oddcount" class="level3">
<h3>Example 1: oddCount</h3>
<p>Write a function to count how many odd numbers are in an array.</p>
<div class="embed-responsive embed-responsive-16by9">
<iframe class="embed-responsive-item" src="https://www.youtube.com/embed/6OXpp8sV7rs?rel=0" allowfullscreen>
</iframe>
</div>
</section>
<section id="example-2-sumevens" class="level3">
<h3>Example 2: sumEvens</h3>
<p>Sum up all the even numbers in an array.</p>
<div class="embed-responsive embed-responsive-16by9">
<iframe class="embed-responsive-item" src="https://www.youtube.com/embed/PW0don64C0Y?rel=0" allowfullscreen>
</iframe>
</div>
</section>
<section id="example-3-findnegatives" class="level3">
<h3>Example 3: findNegatives</h3>
<p>Return an array with all of the negative numbers in an array. Do not
modify the original array (i.e. write a pure function).</p>
<div class="embed-responsive embed-responsive-16by9">
<iframe class="embed-responsive-item" src="https://www.youtube.com/embed/Ik3ruxUXcZY?rel=0" allowfullscreen>
</iframe>
</div>
</section>
<section id="example-4-sumuptoeven" class="level3">
<h3>Example 4: sumUpToEven</h3>
<p>Sum all the elements in an array up to but not including the first
even number. (What if there is no even number?)</p>
<div class="embed-responsive embed-responsive-16by9">
<iframe class="embed-responsive-item" src="https://www.youtube.com/embed/X9zaB18o2-g?rel=0" allowfullscreen>
</iframe>
</div>
</section>
<section id="example-5-olympicscores" class="level3">
<h3>Example 5: olympicScores</h3>
<p>Write a function that takes an array of numbers and returns the an
array of numbers with the highest and lowest scores removed. Do not
modify the original array parameter.</p>
<div class="embed-responsive embed-responsive-16by9">
<iframe class="embed-responsive-item" src="https://www.youtube.com/embed/a_2M9uZ37L0?rel=0" allowfullscreen>
</iframe>
</div>
<p><strong>Check out the live code here: <a
href="https://repl.it/@mcuringa/Array-Examples"
class="uri">https://repl.it/@mcuringa/Array-Examples</a></strong></p>
</section>
</section>
<section id="array-exercises" class="level2">
<h2>Array Exercises</h2>
<ol type="1">
<li><p>Write a function called <code>filterWord</code> which takes an
array of strings and a <code>word</code> to filter as arguments and
returns a new array with all instances of <code>word</code> removed.
This function should not modify the original array.</p></li>
<li><p>Count how many words in an array have length 5 (i.e. are 5
characters long).</p></li>
<li><p>Write a function that finds and returns the average of an array
of numbers.</p></li>
<li><p>Write a function called <code>removeDuplicates</code> that takes
an array and returns a new array with only the unique elements from the
original. <em>Hint:</em> they don’t have to be in the same order.
<em>Hint hint:</em> remember the <code>includes</code> method of
array.</p></li>
<li><p>Write a function called <code>combine</code> that takes 2 arrays
of strings as parameters and returns a new array of strings which
concatenates the items from the first array with the item from the
second. If the array are not equal in length, the new array will end
with the item from the longer array. For example:</p>
<div class="sourceCode" id="cb212"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> a <span class="op">=</span> [<span class="st">&quot;cat&quot;</span><span class="op">,</span> <span class="st">&quot;dog&quot;</span><span class="op">,</span> <span class="st">&quot;bird&quot;</span>]<span class="op">;</span></span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> b <span class="op">=</span> [<span class="st">&quot;lion&quot;</span><span class="op">,</span> <span class="st">&quot;wolf&quot;</span><span class="op">,</span> <span class="st">&quot;eagle&quot;</span>]<span class="op">;</span></span>
<span id="cb212-3"><a href="#cb212-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> c <span class="op">=</span> <span class="fu">combine</span>(a<span class="op">,</span> b)<span class="op">;</span></span>
<span id="cb212-4"><a href="#cb212-4" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(c)<span class="op">;</span></span>
<span id="cb212-5"><a href="#cb212-5" aria-hidden="true" tabindex="-1"></a>[<span class="st">&quot;catlion&quot;</span><span class="op">,</span> <span class="st">&quot;dogwolf&quot;</span><span class="op">,</span> <span class="st">&quot;birdeagle&quot;</span>]</span></code></pre></div></li>
<li><p>Write a function called <code>isSorted</code> which takes an
array (of number) as a parameter. It should return <code>true</code> if
the array is already sorted (ascending order) or <code>false</code> if
the array is not sorted.</p>
<p>You can use this function to test your code:</p>
<div class="sourceCode" id="cb213"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb213-1"><a href="#cb213-1"></a><span class="kw">function</span> <span class="fu">test_isSorted</span>() {</span>
<span id="cb213-2"><a href="#cb213-2"></a></span>
<span id="cb213-3"><a href="#cb213-3"></a>  <span class="kw">let</span> n1 <span class="op">=</span> [<span class="dv">4</span><span class="op">,</span> <span class="dv">77</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">4567</span><span class="op">,</span> <span class="dv">12</span>]<span class="op">;</span></span>
<span id="cb213-4"><a href="#cb213-4"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">assert</span>(<span class="op">!</span><span class="fu">isSorted</span>(n1)<span class="op">,</span> <span class="st">&quot;n1 is not sorted, isSorted(n1) failed&quot;</span>)<span class="op">;</span></span>
<span id="cb213-5"><a href="#cb213-5"></a>  <span class="kw">let</span> n2 <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">;</span></span>
<span id="cb213-6"><a href="#cb213-6"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">assert</span>(<span class="fu">isSorted</span>(n2)<span class="op">,</span> <span class="st">&quot;n2 is not sorted, isSorted(n2) failed&quot;</span>)<span class="op">;</span></span>
<span id="cb213-7"><a href="#cb213-7"></a>}</span>
<span id="cb213-8"><a href="#cb213-8"></a><span class="fu">test_isSorted</span>()<span class="op">;</span></span></code></pre></div></li>
</ol>
</section>
<section id="array-lab" class="level2">
<h2>Array Lab</h2>
<p><strong>Sentiment Analysis</strong> is a technique in computer
science text analysis which tries to determine the sentiment or
<em>mood</em> expressed in a text. Some “sentiments” are easy to detect.
Given the text “I love dogs so much!”, we can confidently say it is
<strong>positive</strong>. “I hate you and never want to talk to you
again” is clearly <strong>negative</strong>. “The car is silver.” would
express a <strong>neutral</strong> sentiment.</p>
<p>Unfortunately, language is often much trickier to classify. Consider,
“I have too much homework” (negative) and “I don’t have too much
homework” (positive).</p>
<p>For this lab, you are going to write the best sentiment function that
you can. It won’t handle all cases, but try to handle as many as you can
think of. You should use the string and array functions that we have
been working with in the last two chapters.</p>
<p>Your function has a single string parameter, and returns
<code>1</code> for a positive sentiment, <code>-1</code> for a negative
sentiment, and <code>0</code> for a neutral sentiments.</p>
<p>Use this repl to get started: <a
href="https://repl.it/@mcuringa/Sentiment"
class="uri">https://repl.it/@mcuringa/Sentiment</a></p>
<p>You can read the <a
href="https://en.wikipedia.org/wiki/Sentiment_analysis">Wikipedia
article on sentiment analysis</a> to get a better sense of this lab.</p>
</section>
<section id="code-listing-2-school-test-data-report"
class="level2 codeListing">
<h2 class="codeListing">Code Listing 2: School Test Data Report</h2>
<section id="new-york-city-schools-data" class="level3">
<h3>New York City Schools Data</h3>
<p>The New York City public school system, run by the NYC Department of
Education (DOE). Is the largest public school system in the United
States, with over 1 million students in more than 2,000 schools. The
schools are tasked with educating a diverse population, with almost 75%
of students coming from economically disadvantaged families.</p>
<p>It is home to some of the best schools in the country, with selective
schools like Stuyvesant High School and Bronx Science, but also faces
chronically low performance in many of its schools. The schools face
criticism and controversy surrounding a variety of issues. Black and
Latinx students face the highest levels of segregation in the country;
contributing to significant inequity within schools in New York City and
with other New York State public schools in the wealthy suburbs that
ring the city.</p>
<p>Some of the initiatives meant to address these challenges have proven
as controversial as the underlying problems. Charter schools — public
schools with fewer restrictions, operated by private organizations —
were introduced to address some of these issues by providing “school
choice.” Charters, however, have been criticized for failing to meet
students with disabilities and English Language Learners; they are seen
by some as more of an attack on public unions than as education
initiatives, and as fundamentally flawed by pitting schools against each
other.</p>
<p>Recent desegregation attempts in NYC’s top performing schools has
been criticized for unfairly impacting Asian American students, who are
well represented in the top schools, but themselves often come from
poorer, immigrant families.</p>
<p>Data analysis, data science, and data-driven decision making has been
gaining momentum as one tool in improving the NYC educational system
through greater insight and accountability. As part of a larger open
data initiative, the City publishes a lot of data about its schools and
its students. Among other data, the City releases <strong>school-level
test results</strong> for Math and English Language Arts (ELA). These
results can be analyzed for different demographic groups, including by
race/ethnicity, gender, income, students with disabilities, and English
Language Learners. The data analyzed in this case study reports on the
ELA test results for the years 2013-2017, for “all students”, at the
school level. The results reported at New York State statewide
assessments given in grades 3-8 (to, generally, students age 8-13). The
data file (<code>ela-all-2013_18.js</code>) is based on <a
href="https://infohub.nyced.org/reports-and-policies/citywide-information-and-data/test-results">data
released on the NYC DOE website</a>. The Math and ELA exams are aligned
to the Common Core standards. The ELA exam includes reading passages and
multiple choice, short answer, and extended answer (essay) responses.
Student results are categorized as a 1, 2, 3, or 4 where 1 is the lowest
result and 4 is the highest result. Students scoring 3 or 4 are
considered proficient in the subject area.</p>
<p>Lastly, while the tests are administered to every student in the
public schools there has been a significant resistant to the tests in
some schools and districts, statewide, in the form of “opting out” where
students and parents choose not to participate in the testing due to
concerns about how test results are used to punish schools, teachers,
and students; questions over the validity of the measures; and beliefs
that high stakes testing corrupts learning and siphons resources from
more authentic and valuable educational goals.</p>
<p>The functions annotated in <code>school-report.js</code> demonstrate
some common programming patterns for working with arrays of data, and
array traversal — using a <code>for</code> loop to iterate over each
item in an array. Notice that all of the functions that work with the
<code>testData</code> are <strong>pure functions</strong>. They do not
have <strong>side effects</strong> — they don’t modify any variables
outside of the function, only communicating through input function
parameters and output with the return statement. To make it easier to
understand these pure functions, each function has a comment header
which indicates what values and types of data are expected for the
function parameters and are returned by the return statement.</p>
<p>The set of reporting functions at the end of program, however, are
not pure functions. They provide user output using
<code>console.log</code>. This printing to the console is a side effect
of the function.</p>
<p><a href="https://repl.it/@mcuringa/SchoolData">View the “School Data
Report” repl</a></p>
</section>
<section id="case-study-school-report.js"
class="level3 schoolReport codeNotes">
<h3 class="schoolReport codeNotes">Case Study: school-report.js</h3>
<aside data-line-number="1">
<p>The extensive header comment at the top of this program describes the
type of data that’s being analyzed. The program analyzes an array of
objects, where each element in the array represents the test test
results for a single grade level, for a single school, in a given school
year. During <strong>array traversal</strong>, properties of the data
object are accessed with the <strong>dot operator</strong>. If the
example data in the header were accessed at element <code>i</code> of
variable <code>data</code>, then <code>data[i].name</code> would produce
“P.S. 009 Teunis G. Bergen”</p>
</aside>
<aside data-line-number="33">
<p>This is our first introduction to creating our own Javascript
<strong>objects</strong>. The object literal notation used here creates
a new object with <em>curly braces</em> (<code>{}</code>). Objects
consist of <strong>key-value pairs</strong>. The <strong>key</strong>,
on the left side must be a string or valid Javascript identifier. The
<strong>value</strong>, after the colon (<code>:</code>), can be a value
of any Javascript type – a number or string, an object like
<code>Date</code>, an array, even a function. We’ll learn more about
objects and <strong>Object Oriented Programming</strong> (OOP) later in
the book.</p>
</aside>
<aside data-line-number="49">
<p>The <code>import</code> keyword allows a Javascript file to import
functions and variables from another Javascript file.
<code>import</code> helps us write modular code and reusable <em>code
libraries</em>.</p>
</aside>
<aside data-line-number="56">
<p><code>totalTested</code> returns the number of students who were
administered an exam in the total data set. This is a simple example of
the <strong>counter pattern</strong> — which works like this:</p>
<ol type="1">
<li>initialize the counter variable to zero (line 62)</li>
<li>traverse the array and increment the counter during each loop (line
74)</li>
<li>return the total (line 77)</li>
</ol>
</aside>
<aside data-line-number="73">
<p><code>totalTestedGrade</code> gives an example of the <strong>counter
pattern</strong> with a conditional check. In this case the
<code>total</code> is only incremented if a condition is met in the loop
body during array traversal. This pattern is good to count things that
match a given set of criteria — in this case it would allow us to find
the number of 4th grade students who sat for the ELA exam in the data
set.</p>
</aside>
<aside data-line-number="98">
<p><code>averageTestScores</code> uses the <strong>counter
pattern</strong> with 2 counters to enable us to find the average for
test scores. To make a real example, we also have a <strong>compound
Boolean expression</strong> as our criteria for when to increment the
counters. Because this case study works with real data (not a simplified
data set curated for the book), we need to add the condition
<code>&amp;&amp; testResults.avg !== NaN</code> to our test. Some of the
records in our data set do not have valid averages, indicated by
<code>NaN</code> rather than a float. In those cases, we just skip the
record, even if the <code>grade</code> and <code>year</code> match our
targets.</p>
<p>The basic algorithm for finding the mean average of a <em>set of
numbers</em> is to (1) sum the numbers, (2) divide the sum by the number
of items, <code>n</code>.</p>
<p>In this function, the <em>set of numbers</em> to sum up are all of
the <code>testResults</code> that match the target <code>grade</code>
and <code>year</code> specified by the function parameters. We keep
track of this sum in the counter variable, <code>sum</code>. Since we
don’t know how many test results meet our criteria before we begin the
array traversal, we declare a second counter, <code>numResults</code>.
<code>numResults</code> tracks how many items <code>n</code> we’ve
summed up.</p>
<p>When the loop completes, we find the average by dividing the sum by
the number of rest results, <code>sum / numResults</code>.</p>
</aside>
<aside data-line-number="124">
<p>We move away from the counter pattern to look at a <strong>search
pattern</strong>. <code>findHighestAvgScore</code> searches through the
array of data to locate the highest average test score in the set.
Before the loop begins, we must declare a result variable
(<code>highestResult</code> here) that will hold the best match for our
search term. We iterate through the elements of the array looking for
the best match for our search result. In this case (and this often
works), we initialize the result variable to the first item in our array
(<code>data[0]</code>). When we traverse the array, we start at element
1 rather than 0. If, by chance, the zeroeth element had the highest
score, it will still be return at the end of our <code>for</code>
loop.</p>
<p><code>if</code> the current element in the array
(<code>data[i]</code>) is a better match for our search than the current
value of the result variable (<code>highestResult</code>), then that
element becomes the new best match for our search result. Finally, we
return our result.</p>
<p>Notice that in this case of working with school data, it’s possible
that several schools test results will be tied for the highest average
score, especially if they scored an average of <code>4</code>. The way
our algorithm is coded the “best match” here will be the first one
found. If we changed line 139 to be
<code>data[i].avg &gt;= highestResult.avg</code>, we would return the
<em>last</em> match found instead. We can’t do an <strong>realy
return</strong> in this search pattern because we must test every
element in <code>data</code> to see if any has a higher score than the
current best match.</p>
</aside>
<aside data-line-number="157">
<p><code>filterBetterThanLimit</code> represents a <strong>filter
pattern</strong>. The array filter patterns works like this:</p>
<ol type="1">
<li>initialize the results array to be an empty array</li>
<li>iterate through the search array and add any items matching the
filter criteria to the results array</li>
<li>return the results after the loop completes</li>
</ol>
<p>In this example, we call the results array
<code>matchingResults</code>, and we use the <code>limit</code> function
parameter as the condition to see if a data item should be included in
the results <code>data[i].avg &gt; limit</code>.</p>
</aside>
<aside data-line-number="181">
<p><code>reportAveragesForFirstCohort</code> demonstrates how one
function can be used multiple times with different arguments. This
function reports the test results of a single cohort of students as they
travel through the New York City school system. It reports the 4th grade
results from 2013, the first year the current test format was
administered, and then reports the results for the same group of
students in each subsequent year through the 2017-18 academic year.</p>
<p>When the program is run, it indicates that the students improved over
the time analyzed, scoring on average 2.02 in 2013 and 2.40 in 2017.</p>
</aside>
<aside data-line-number="204">
<p><code>topPerformers</code> reports the results of our filtering
funcion. It uses 3.9 as the argument to <code>limit</code>, so the
results only includes schools that had test results greater than 2.9.
Because the <code>results</code> are an array, we traverse the
(filtered) array to report the results. The <code>console.log</code>
statement uses a template string with backticks to easily format the
output. Because we use the current <code>results</code> element so often
in the report, we created an <strong>alias</strong> of the object on
line 210, with the code <code>let r = results[i];</code>. This allows us
to insert the short variable name <code>r</code> (for result) easily
into our template string.</p>
</aside>
<aside data-line-number="217">
<p>Finally, we define and then call our <code>main</code> function to
begin the program. <code>main</code> outputs some of the results
directly, and divides some of the more complex reporting into distinct
functions.</p>
</aside>
<div class="listingSrcCode">
<div class="sourceCode" id="cb214"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb214-1"><a href="#cb214-1"></a><span class="co">/**</span></span>
<span id="cb214-2"><a href="#cb214-2"></a><span class="co"> * File: school-report.js</span></span>
<span id="cb214-3"><a href="#cb214-3"></a><span class="co"> * Demonstrates common patterns for using for loops</span></span>
<span id="cb214-4"><a href="#cb214-4"></a><span class="co"> * and arrays, using the NYC school data file and the</span></span>
<span id="cb214-5"><a href="#cb214-5"></a><span class="co"> * school data object.</span></span>
<span id="cb214-6"><a href="#cb214-6"></a><span class="co"> *</span></span>
<span id="cb214-7"><a href="#cb214-7"></a><span class="co"> * Properties of TestResult objects:</span></span>
<span id="cb214-8"><a href="#cb214-8"></a><span class="co"> *</span></span>
<span id="cb214-9"><a href="#cb214-9"></a><span class="co"> * - id: string, a unique id that has the school district`, boro,</span></span>
<span id="cb214-10"><a href="#cb214-10"></a><span class="co"> *   and school number,  ex: &quot;01M015&quot;</span></span>
<span id="cb214-11"><a href="#cb214-11"></a><span class="co"> * - name: string, the full school name, ex:&quot;P.S. 015 Roberto Clemente&quot;</span></span>
<span id="cb214-12"><a href="#cb214-12"></a><span class="co"> * - grade: integer, the grade level for the test results, grades 3-8</span></span>
<span id="cb214-13"><a href="#cb214-13"></a><span class="co"> * - year: integer, the year the test was taken. The data includes all</span></span>
<span id="cb214-14"><a href="#cb214-14"></a><span class="co"> *   results from  2013-2017</span></span>
<span id="cb214-15"><a href="#cb214-15"></a><span class="co"> * - numTested: integer, the number of students taking the test at this</span></span>
<span id="cb214-16"><a href="#cb214-16"></a><span class="co"> *   school-grade-year</span></span>
<span id="cb214-17"><a href="#cb214-17"></a><span class="co"> * - level1: integer, the number of students scoring a one (1), lowest</span></span>
<span id="cb214-18"><a href="#cb214-18"></a><span class="co"> * - level2: integer, the number of students scoring a two (2)</span></span>
<span id="cb214-19"><a href="#cb214-19"></a><span class="co"> * - level3: integer, the number of students scoring a three (3)</span></span>
<span id="cb214-20"><a href="#cb214-20"></a><span class="co"> * - level4: integer, the number of students scoring a four (4), highest</span></span>
<span id="cb214-21"><a href="#cb214-21"></a><span class="co"> * - district: integer, the NYC DOE school district, districts are smaller</span></span>
<span id="cb214-22"><a href="#cb214-22"></a><span class="co"> *   geographic areas consisting of several schools, with their own, more</span></span>
<span id="cb214-23"><a href="#cb214-23"></a><span class="co"> *   local administration. They are numbered 1-32, with disctrict 75 as a</span></span>
<span id="cb214-24"><a href="#cb214-24"></a><span class="co"> *   citywide special district designed to help students with disabilities</span></span>
<span id="cb214-25"><a href="#cb214-25"></a><span class="co"> *   and special needs</span></span>
<span id="cb214-26"><a href="#cb214-26"></a><span class="co"> *   boro: string, one of the five boroughs:</span></span>
<span id="cb214-27"><a href="#cb214-27"></a><span class="co"> *   Manhattan, Bronx, Brooklyn, Queens, Staten Island</span></span>
<span id="cb214-28"><a href="#cb214-28"></a><span class="co"> * - avg: float, the average score for this school, for the given year</span></span>
<span id="cb214-29"><a href="#cb214-29"></a><span class="co"> *   and grade level.  is NaN if the results are not valid</span></span>
<span id="cb214-30"><a href="#cb214-30"></a><span class="co"> *</span></span>
<span id="cb214-31"><a href="#cb214-31"></a><span class="co"> * The functions in this program work on test data stored as an array</span></span>
<span id="cb214-32"><a href="#cb214-32"></a><span class="co"> * of TestResult data objects. An example of a single object:</span></span>
<span id="cb214-33"><a href="#cb214-33"></a><span class="co"> * {</span></span>
<span id="cb214-34"><a href="#cb214-34"></a><span class="co"> *   &quot;id&quot;: &quot;13K009&quot;,</span></span>
<span id="cb214-35"><a href="#cb214-35"></a><span class="co"> *   &quot;name&quot;: &quot;P.S. 009 Teunis G. Bergen&quot;,</span></span>
<span id="cb214-36"><a href="#cb214-36"></a><span class="co"> *   &quot;grade&quot;: 4,</span></span>
<span id="cb214-37"><a href="#cb214-37"></a><span class="co"> *   &quot;year&quot;: 2016,</span></span>
<span id="cb214-38"><a href="#cb214-38"></a><span class="co"> *   &quot;numTested&quot;: 107,</span></span>
<span id="cb214-39"><a href="#cb214-39"></a><span class="co"> *   &quot;level1&quot;: 20,</span></span>
<span id="cb214-40"><a href="#cb214-40"></a><span class="co"> *   &quot;level2&quot;: 28,</span></span>
<span id="cb214-41"><a href="#cb214-41"></a><span class="co"> *   &quot;level3&quot;: 22,</span></span>
<span id="cb214-42"><a href="#cb214-42"></a><span class="co"> *   &quot;level4&quot;: 37,</span></span>
<span id="cb214-43"><a href="#cb214-43"></a><span class="co"> *   &quot;district&quot;: 13,</span></span>
<span id="cb214-44"><a href="#cb214-44"></a><span class="co"> *   &quot;boro&quot;: &quot;Brooklyn&quot;,</span></span>
<span id="cb214-45"><a href="#cb214-45"></a><span class="co"> *   &quot;avg&quot;: 2.710280373831776</span></span>
<span id="cb214-46"><a href="#cb214-46"></a><span class="co"> * },</span></span>
<span id="cb214-47"><a href="#cb214-47"></a><span class="co"> */</span></span>
<span id="cb214-48"><a href="#cb214-48"></a></span>
<span id="cb214-49"><a href="#cb214-49"></a><span class="im">import</span> testData <span class="im">from</span> <span class="st">&quot;./data/ela-all-2013_18.js&quot;</span><span class="op">;</span></span>
<span id="cb214-50"><a href="#cb214-50"></a></span>
<span id="cb214-51"><a href="#cb214-51"></a></span>
<span id="cb214-52"><a href="#cb214-52"></a></span>
<span id="cb214-53"><a href="#cb214-53"></a><span class="co">/**</span></span>
<span id="cb214-54"><a href="#cb214-54"></a><span class="co"> * totalTested finds the total number of students</span></span>
<span id="cb214-55"><a href="#cb214-55"></a><span class="co"> * tested in data set `data`</span></span>
<span id="cb214-56"><a href="#cb214-56"></a><span class="co"> * This is an example of the counter pattern.</span></span>
<span id="cb214-57"><a href="#cb214-57"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">data</span><span class="co">, an array of data objects where each</span></span>
<span id="cb214-58"><a href="#cb214-58"></a><span class="co"> *        objcect _must_ have a property `numTested`</span></span>
<span id="cb214-59"><a href="#cb214-59"></a><span class="co"> * </span><span class="an">@return</span><span class="co"> int, the sum of all test takers</span></span>
<span id="cb214-60"><a href="#cb214-60"></a><span class="co"> */</span></span>
<span id="cb214-61"><a href="#cb214-61"></a><span class="kw">function</span> <span class="fu">totalTested</span>(data) {</span>
<span id="cb214-62"><a href="#cb214-62"></a>  <span class="kw">let</span> total <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb214-63"><a href="#cb214-63"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> data<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb214-64"><a href="#cb214-64"></a>    total <span class="op">+=</span> data[i]<span class="op">.</span><span class="at">numTested</span><span class="op">;</span></span>
<span id="cb214-65"><a href="#cb214-65"></a>  }</span>
<span id="cb214-66"><a href="#cb214-66"></a>  <span class="cf">return</span> total<span class="op">;</span></span>
<span id="cb214-67"><a href="#cb214-67"></a>}</span>
<span id="cb214-68"><a href="#cb214-68"></a></span>
<span id="cb214-69"><a href="#cb214-69"></a><span class="co">/**</span></span>
<span id="cb214-70"><a href="#cb214-70"></a><span class="co"> * totalTestedGrade finds the total number of students</span></span>
<span id="cb214-71"><a href="#cb214-71"></a><span class="co"> * tested in the data set in a give grade level.</span></span>
<span id="cb214-72"><a href="#cb214-72"></a><span class="co"> * This is an example of the counter pattern</span></span>
<span id="cb214-73"><a href="#cb214-73"></a><span class="co"> * with a conditional check.</span></span>
<span id="cb214-74"><a href="#cb214-74"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">data</span><span class="co">, an array of data objects where each</span></span>
<span id="cb214-75"><a href="#cb214-75"></a><span class="co"> *        objcect _must_ have the properties</span></span>
<span id="cb214-76"><a href="#cb214-76"></a><span class="co"> *        `numTested` and `grade`</span></span>
<span id="cb214-77"><a href="#cb214-77"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">grade</span><span class="co">, an int in the range 3..8 to indicate</span></span>
<span id="cb214-78"><a href="#cb214-78"></a><span class="co"> *        which grade to search for</span></span>
<span id="cb214-79"><a href="#cb214-79"></a><span class="co"> * </span><span class="an">@return</span><span class="co"> int, the total number students of students tested</span></span>
<span id="cb214-80"><a href="#cb214-80"></a><span class="co"> *         in the given grade</span></span>
<span id="cb214-81"><a href="#cb214-81"></a><span class="co"> */</span></span>
<span id="cb214-82"><a href="#cb214-82"></a><span class="kw">function</span> <span class="fu">totalTestedGrade</span>(data<span class="op">,</span> grade) {</span>
<span id="cb214-83"><a href="#cb214-83"></a>  <span class="kw">let</span> total <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb214-84"><a href="#cb214-84"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> data<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb214-85"><a href="#cb214-85"></a>    <span class="cf">if</span> (data[i]<span class="op">.</span><span class="at">grade</span> <span class="op">===</span> grade) {</span>
<span id="cb214-86"><a href="#cb214-86"></a>      total <span class="op">+=</span> data[i]<span class="op">.</span><span class="at">numTested</span><span class="op">;</span></span>
<span id="cb214-87"><a href="#cb214-87"></a>    }</span>
<span id="cb214-88"><a href="#cb214-88"></a>  }</span>
<span id="cb214-89"><a href="#cb214-89"></a>  <span class="cf">return</span> total<span class="op">;</span></span>
<span id="cb214-90"><a href="#cb214-90"></a>}</span>
<span id="cb214-91"><a href="#cb214-91"></a></span>
<span id="cb214-92"><a href="#cb214-92"></a><span class="co">/**</span></span>
<span id="cb214-93"><a href="#cb214-93"></a><span class="co"> * averageTestScores finds the average test scores</span></span>
<span id="cb214-94"><a href="#cb214-94"></a><span class="co"> * in the dataset `data` for a single `grade`</span></span>
<span id="cb214-95"><a href="#cb214-95"></a><span class="co"> * in a single test `year`.</span></span>
<span id="cb214-96"><a href="#cb214-96"></a><span class="co"> * It&#39;s a more complex example of a real solution</span></span>
<span id="cb214-97"><a href="#cb214-97"></a><span class="co"> * programmed using the counter pattern.</span></span>
<span id="cb214-98"><a href="#cb214-98"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">data</span><span class="co">, an array of data objects where each</span></span>
<span id="cb214-99"><a href="#cb214-99"></a><span class="co"> *        objcect _must_ have the properties</span></span>
<span id="cb214-100"><a href="#cb214-100"></a><span class="co"> *        `numTested` and `grade`</span></span>
<span id="cb214-101"><a href="#cb214-101"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">grade</span><span class="co">, an int in the range 3..8 to indicate</span></span>
<span id="cb214-102"><a href="#cb214-102"></a><span class="co"> *        which grade to search for</span></span>
<span id="cb214-103"><a href="#cb214-103"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">year</span><span class="co">, an int</span></span>
<span id="cb214-104"><a href="#cb214-104"></a><span class="co"> * </span><span class="an">@return</span><span class="co"> float, the mean average test result</span></span>
<span id="cb214-105"><a href="#cb214-105"></a><span class="co"> *         (in the range 0..4) of all results that match</span></span>
<span id="cb214-106"><a href="#cb214-106"></a><span class="co"> *         the `grade` and `year` criteria</span></span>
<span id="cb214-107"><a href="#cb214-107"></a><span class="co"> */</span></span>
<span id="cb214-108"><a href="#cb214-108"></a><span class="kw">function</span> <span class="fu">averageTestScores</span>(data<span class="op">,</span> grade<span class="op">,</span> year) {</span>
<span id="cb214-109"><a href="#cb214-109"></a>  <span class="kw">let</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb214-110"><a href="#cb214-110"></a>  <span class="kw">let</span> numResults <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb214-111"><a href="#cb214-111"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> data<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb214-112"><a href="#cb214-112"></a>    <span class="kw">let</span> testResults <span class="op">=</span> data[i]<span class="op">;</span></span>
<span id="cb214-113"><a href="#cb214-113"></a>    <span class="cf">if</span> (testResults<span class="op">.</span><span class="at">grade</span> <span class="op">===</span> grade</span>
<span id="cb214-114"><a href="#cb214-114"></a>        <span class="op">&amp;&amp;</span> testResults<span class="op">.</span><span class="at">year</span> <span class="op">===</span> year</span>
<span id="cb214-115"><a href="#cb214-115"></a>        <span class="op">&amp;&amp;</span> testResults<span class="op">.</span><span class="at">avg</span> <span class="op">!==</span> <span class="kw">NaN</span>) {</span>
<span id="cb214-116"><a href="#cb214-116"></a>      sum <span class="op">+=</span> testResults<span class="op">.</span><span class="at">avg</span><span class="op">;</span></span>
<span id="cb214-117"><a href="#cb214-117"></a>      numResults<span class="op">++;</span></span>
<span id="cb214-118"><a href="#cb214-118"></a>    }</span>
<span id="cb214-119"><a href="#cb214-119"></a>  }</span>
<span id="cb214-120"><a href="#cb214-120"></a></span>
<span id="cb214-121"><a href="#cb214-121"></a>  <span class="cf">return</span> sum <span class="op">/</span> numResults<span class="op">;</span></span>
<span id="cb214-122"><a href="#cb214-122"></a>}</span>
<span id="cb214-123"><a href="#cb214-123"></a></span>
<span id="cb214-124"><a href="#cb214-124"></a><span class="co">/**</span></span>
<span id="cb214-125"><a href="#cb214-125"></a><span class="co"> * findHighestAvgScore searches through</span></span>
<span id="cb214-126"><a href="#cb214-126"></a><span class="co"> * the test results in `data` and returns</span></span>
<span id="cb214-127"><a href="#cb214-127"></a><span class="co"> * the test result data object with the highest</span></span>
<span id="cb214-128"><a href="#cb214-128"></a><span class="co"> * number in the `avg` property.</span></span>
<span id="cb214-129"><a href="#cb214-129"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">data</span><span class="co">, an array of data objects where each</span></span>
<span id="cb214-130"><a href="#cb214-130"></a><span class="co"> *        object _must_ have the property</span></span>
<span id="cb214-131"><a href="#cb214-131"></a><span class="co"> *        `avg` to indicate the average test</span></span>
<span id="cb214-132"><a href="#cb214-132"></a><span class="co"> *        score for that data record</span></span>
<span id="cb214-133"><a href="#cb214-133"></a><span class="co"> * </span><span class="an">@return</span><span class="co"> object, the test result data object with</span></span>
<span id="cb214-134"><a href="#cb214-134"></a><span class="co"> *         the highest average score in the dataset</span></span>
<span id="cb214-135"><a href="#cb214-135"></a><span class="co"> */</span></span>
<span id="cb214-136"><a href="#cb214-136"></a><span class="kw">function</span> <span class="fu">findHighestAvgScore</span>(data) {</span>
<span id="cb214-137"><a href="#cb214-137"></a>  <span class="kw">let</span> highestResult <span class="op">=</span> data[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb214-138"><a href="#cb214-138"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> data<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb214-139"><a href="#cb214-139"></a>    <span class="cf">if</span> (data[i]<span class="op">.</span><span class="at">avg</span> <span class="op">&gt;</span> highestResult<span class="op">.</span><span class="at">avg</span>) {</span>
<span id="cb214-140"><a href="#cb214-140"></a>      highestResult <span class="op">=</span> data[i]<span class="op">;</span></span>
<span id="cb214-141"><a href="#cb214-141"></a>    }</span>
<span id="cb214-142"><a href="#cb214-142"></a>  }</span>
<span id="cb214-143"><a href="#cb214-143"></a>  <span class="cf">return</span> highestResult<span class="op">;</span></span>
<span id="cb214-144"><a href="#cb214-144"></a>}</span>
<span id="cb214-145"><a href="#cb214-145"></a></span>
<span id="cb214-146"><a href="#cb214-146"></a><span class="co">/**</span></span>
<span id="cb214-147"><a href="#cb214-147"></a><span class="co"> * filterBetterThanLimit returns a sub-array</span></span>
<span id="cb214-148"><a href="#cb214-148"></a><span class="co"> * based on array `data`, with only the test result</span></span>
<span id="cb214-149"><a href="#cb214-149"></a><span class="co"> * elements of data where the average test score</span></span>
<span id="cb214-150"><a href="#cb214-150"></a><span class="co"> * is higher than `limit`.</span></span>
<span id="cb214-151"><a href="#cb214-151"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">data</span><span class="co">, an array of data objects where each</span></span>
<span id="cb214-152"><a href="#cb214-152"></a><span class="co"> *        object _must_ have the property</span></span>
<span id="cb214-153"><a href="#cb214-153"></a><span class="co"> *        `avg` to indicate the average test</span></span>
<span id="cb214-154"><a href="#cb214-154"></a><span class="co"> *        score for that data record</span></span>
<span id="cb214-155"><a href="#cb214-155"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">limit</span><span class="co">, a float in the range 0..4 to indicate</span></span>
<span id="cb214-156"><a href="#cb214-156"></a><span class="co"> *        the lower limit for test results to return</span></span>
<span id="cb214-157"><a href="#cb214-157"></a><span class="co"> * </span><span class="an">@return</span><span class="co"> array, an array of test result objects, all of</span></span>
<span id="cb214-158"><a href="#cb214-158"></a><span class="co"> *         which will have a higher average test score</span></span>
<span id="cb214-159"><a href="#cb214-159"></a><span class="co"> *         than `limit`</span></span>
<span id="cb214-160"><a href="#cb214-160"></a><span class="co"> */</span></span>
<span id="cb214-161"><a href="#cb214-161"></a><span class="kw">function</span> <span class="fu">filterBetterThanLimit</span>(data<span class="op">,</span> limit) {</span>
<span id="cb214-162"><a href="#cb214-162"></a>  <span class="kw">let</span> matchingResults <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb214-163"><a href="#cb214-163"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> data<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb214-164"><a href="#cb214-164"></a>    <span class="cf">if</span> (data[i]<span class="op">.</span><span class="at">avg</span> <span class="op">&gt;</span> limit) {</span>
<span id="cb214-165"><a href="#cb214-165"></a>      matchingResults<span class="op">.</span><span class="fu">push</span>(data[i])<span class="op">;</span></span>
<span id="cb214-166"><a href="#cb214-166"></a>    }</span>
<span id="cb214-167"><a href="#cb214-167"></a>  }</span>
<span id="cb214-168"><a href="#cb214-168"></a>  <span class="cf">return</span> matchingResults<span class="op">;</span></span>
<span id="cb214-169"><a href="#cb214-169"></a>}</span>
<span id="cb214-170"><a href="#cb214-170"></a></span>
<span id="cb214-171"><a href="#cb214-171"></a><span class="co">// _________________________________________________</span></span>
<span id="cb214-172"><a href="#cb214-172"></a><span class="co">// ============================= REPORTING FUNCTIONS</span></span>
<span id="cb214-173"><a href="#cb214-173"></a><span class="co">// ‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾</span></span>
<span id="cb214-174"><a href="#cb214-174"></a></span>
<span id="cb214-175"><a href="#cb214-175"></a><span class="kw">function</span> <span class="fu">header</span>(title) {</span>
<span id="cb214-176"><a href="#cb214-176"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">------------------------------------&quot;</span>)<span class="op">;</span></span>
<span id="cb214-177"><a href="#cb214-177"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(title)<span class="op">;</span></span>
<span id="cb214-178"><a href="#cb214-178"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;------------------------------------</span><span class="sc">\n</span><span class="st">&quot;</span>)<span class="op">;</span></span>
<span id="cb214-179"><a href="#cb214-179"></a>}</span>
<span id="cb214-180"><a href="#cb214-180"></a></span>
<span id="cb214-181"><a href="#cb214-181"></a><span class="kw">function</span> <span class="fu">reportAveragesForFirstCohort</span>() {</span>
<span id="cb214-182"><a href="#cb214-182"></a></span>
<span id="cb214-183"><a href="#cb214-183"></a>  <span class="kw">let</span> r13 <span class="op">=</span> <span class="fu">averageTestScores</span>(testData<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2013</span>)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb214-184"><a href="#cb214-184"></a>  <span class="kw">let</span> r14 <span class="op">=</span> <span class="fu">averageTestScores</span>(testData<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">2014</span>)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb214-185"><a href="#cb214-185"></a>  <span class="kw">let</span> r15 <span class="op">=</span> <span class="fu">averageTestScores</span>(testData<span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">2015</span>)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb214-186"><a href="#cb214-186"></a>  <span class="kw">let</span> r16 <span class="op">=</span> <span class="fu">averageTestScores</span>(testData<span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">2016</span>)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb214-187"><a href="#cb214-187"></a>  <span class="kw">let</span> r17 <span class="op">=</span> <span class="fu">averageTestScores</span>(testData<span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">2017</span>)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb214-188"><a href="#cb214-188"></a></span>
<span id="cb214-189"><a href="#cb214-189"></a>  <span class="fu">header</span>(<span class="st">&quot;TREND OF SCORES FOR 2013 4TH GRADE&quot;</span>)<span class="op">;</span></span>
<span id="cb214-190"><a href="#cb214-190"></a></span>
<span id="cb214-191"><a href="#cb214-191"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`</span></span>
<span id="cb214-192"><a href="#cb214-192"></a><span class="vs">Reporting on the ELA test result trend for the</span></span>
<span id="cb214-193"><a href="#cb214-193"></a><span class="vs">cohort of who were in 4th grade in 2013.</span></span>
<span id="cb214-194"><a href="#cb214-194"></a><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb214-195"><a href="#cb214-195"></a></span>
<span id="cb214-196"><a href="#cb214-196"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Average ELA 2013:&quot;</span><span class="op">,</span> r13)<span class="op">;</span></span>
<span id="cb214-197"><a href="#cb214-197"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Average ELA 2014:&quot;</span><span class="op">,</span> r14)<span class="op">;</span></span>
<span id="cb214-198"><a href="#cb214-198"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Average ELA 2015:&quot;</span><span class="op">,</span> r15)<span class="op">;</span></span>
<span id="cb214-199"><a href="#cb214-199"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Average ELA 2016:&quot;</span><span class="op">,</span> r16)<span class="op">;</span></span>
<span id="cb214-200"><a href="#cb214-200"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Average ELA 2017:&quot;</span><span class="op">,</span> r17)<span class="op">;</span></span>
<span id="cb214-201"><a href="#cb214-201"></a></span>
<span id="cb214-202"><a href="#cb214-202"></a>}</span>
<span id="cb214-203"><a href="#cb214-203"></a></span>
<span id="cb214-204"><a href="#cb214-204"></a><span class="kw">function</span> <span class="fu">topPerformers</span>() {</span>
<span id="cb214-205"><a href="#cb214-205"></a>  <span class="fu">header</span>(<span class="st">&quot;TOP PERFORMING SCHOOLS (AVG &gt; 3.9)&quot;</span>)<span class="op">;</span></span>
<span id="cb214-206"><a href="#cb214-206"></a></span>
<span id="cb214-207"><a href="#cb214-207"></a>  <span class="kw">let</span> results <span class="op">=</span> <span class="fu">filterBetterThanLimit</span>(testData<span class="op">,</span> <span class="fl">3.9</span>)<span class="op">;</span></span>
<span id="cb214-208"><a href="#cb214-208"></a>  <span class="cf">for</span>(<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> results<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb214-209"><a href="#cb214-209"></a>    <span class="kw">let</span> r <span class="op">=</span> results[i]<span class="op">;</span></span>
<span id="cb214-210"><a href="#cb214-210"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`</span></span>
<span id="cb214-211"><a href="#cb214-211"></a><span class="sc">${</span>i <span class="op">+</span> <span class="dv">1</span><span class="sc">}</span><span class="vs">. </span><span class="sc">${</span>r<span class="op">.</span><span class="at">name</span><span class="sc">}</span></span>
<span id="cb214-212"><a href="#cb214-212"></a><span class="vs">   average score: </span><span class="sc">${</span>r<span class="op">.</span><span class="at">avg</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span></span>
<span id="cb214-213"><a href="#cb214-213"></a><span class="vs">   </span><span class="sc">${</span>r<span class="op">.</span><span class="at">numTested</span><span class="sc">}</span><span class="vs"> students in grade </span><span class="sc">${</span>r<span class="op">.</span><span class="at">grade</span><span class="sc">}</span><span class="vs"> in </span><span class="sc">${</span>r<span class="op">.</span><span class="at">year</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb214-214"><a href="#cb214-214"></a>  }</span>
<span id="cb214-215"><a href="#cb214-215"></a>}</span>
<span id="cb214-216"><a href="#cb214-216"></a></span>
<span id="cb214-217"><a href="#cb214-217"></a><span class="kw">function</span> <span class="fu">main</span>() {</span>
<span id="cb214-218"><a href="#cb214-218"></a>  <span class="fu">header</span>(<span class="st">&quot;SCHOOL TEST DATA REPORT&quot;</span>)<span class="op">;</span></span>
<span id="cb214-219"><a href="#cb214-219"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Total students tested:&quot;</span><span class="op">,</span> <span class="fu">totalTested</span>(testData))<span class="op">;</span></span>
<span id="cb214-220"><a href="#cb214-220"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Total tested, 4th grade:&quot;</span><span class="op">,</span> <span class="fu">totalTestedGrade</span>(testData<span class="op">,</span> <span class="dv">4</span>))<span class="op">;</span></span>
<span id="cb214-221"><a href="#cb214-221"></a></span>
<span id="cb214-222"><a href="#cb214-222"></a>  <span class="fu">header</span>(<span class="st">&quot;BEST TEST RESULTS&quot;</span>)<span class="op">;</span></span>
<span id="cb214-223"><a href="#cb214-223"></a>  <span class="kw">let</span> highest <span class="op">=</span> <span class="fu">findHighestAvgScore</span>(testData)<span class="op">;</span></span>
<span id="cb214-224"><a href="#cb214-224"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`</span></span>
<span id="cb214-225"><a href="#cb214-225"></a><span class="vs">The highest average score results were for the students</span></span>
<span id="cb214-226"><a href="#cb214-226"></a><span class="vs">in grade </span><span class="sc">${</span>highest<span class="op">.</span><span class="at">grade</span><span class="sc">}</span><span class="vs"> at </span><span class="sc">${</span>highest<span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs"> in </span><span class="sc">${</span>highest<span class="op">.</span><span class="at">year</span><span class="sc">}</span><span class="vs">.</span></span>
<span id="cb214-227"><a href="#cb214-227"></a></span>
<span id="cb214-228"><a href="#cb214-228"></a><span class="sc">${</span>highest<span class="op">.</span><span class="at">numTested</span><span class="sc">}</span><span class="vs"> students had an average score of </span><span class="sc">${</span>highest<span class="op">.</span><span class="at">avg</span><span class="sc">}</span><span class="vs">.</span></span>
<span id="cb214-229"><a href="#cb214-229"></a><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb214-230"><a href="#cb214-230"></a></span>
<span id="cb214-231"><a href="#cb214-231"></a>  <span class="fu">reportAveragesForFirstCohort</span>()<span class="op">;</span></span>
<span id="cb214-232"><a href="#cb214-232"></a>  <span class="fu">topPerformers</span>()<span class="op">;</span></span>
<span id="cb214-233"><a href="#cb214-233"></a></span>
<span id="cb214-234"><a href="#cb214-234"></a>  <span class="fu">header</span>(<span class="st">&quot;REPORT COMPLETE&quot;</span>)<span class="op">;</span></span>
<span id="cb214-235"><a href="#cb214-235"></a>}</span>
<span id="cb214-236"><a href="#cb214-236"></a></span>
<span id="cb214-237"><a href="#cb214-237"></a><span class="fu">main</span>()<span class="op">;</span></span></code></pre></div>
</div>
</section>
</section>
<section id="school-data-exercises" class="level2">
<h2>School Data Exercises</h2>
<p>Fork the <a href="https://repl.it/@mcuringa/SchoolData">SchoolData
repl</a> <a href="https://repl.it/@mcuringa/SchoolData"
class="uri">https://repl.it/@mcuringa/SchoolData</a> to complete these
exrcises.</p>
<ol type="1">
<li>Write a function using the <strong>search</strong> pattern that
finds the finds the highest average test score for a result where at
least a minimum number of students took the exam. You can modify
<code>findHighestAvgScore</code> so that it has a second parameter,
<code>minStudents</code>.</li>
<li>Using the same <strong>search pattern</strong> write a function that
finds the lowest test result, it should also have a parameter for
<code>minStudents</code>.</li>
<li>Use the <strong>filter pattern</strong> to write a function
<code>findByBorough(data, boro)</code> that returns an array of test
results for schools in borough <code>boro</code>.</li>
<li>Consider the data given. Write a reporting function (and other
necessary code) that explores a problem and reports an interesting
result. You may use <code>reportAveragesForFirstCohort</code> as an
example for the type of report.</li>
</ol>
<section id="bonus-questions-for-1-point-of-extra-credit-each"
class="level3">
<h3>Bonus questions (for 1 point of extra credit each)</h3>
<ol type="1">
<li><p>Find the 5 best test results in the data set. Return an array of
the test result objects for these schools. There should be a minimum
number of students tested to qualify (specified by a function
parameter).</p></li>
<li><p>Write a function <code>schoolAverages(data)</code> that returns
an array of test report objects with exactly one object for each school.
<code>grade</code> and <code>year</code> should be set to
<code>null</code> because they don’t make sense in this summary.
<code>numTested</code> should be the total students tested for that
school in the given <code>data</code>. <code>level[1-4]</code> should
represent the total students score at that level across years and
grades. And <code>avg</code> should have the average (1..4) score for
all years and grades.</p></li>
<li><p>Write a function <code>boroAverages(data, year)</code> that
returns an array of objects. The objects must have the following
properties:</p>
<ul>
<li><code>avg</code>: the average test score for the borough (1..4)</li>
<li><code>numTested</code>: the total of all students tested</li>
<li><code>boro</code>: the name of the borough</li>
</ul></li>
</ol>
</section>
</section>
</section>
<section id="objects-maps" class="level1">
<h1>Objects &amp; Maps</h1>
<section id="keyvalue-pairs" class="level2">
<h2>Key:Value Pairs</h2>
<p>So far we have looked at sequential data types — strings and arrays —
which use integers as indices to access the values they contain.</p>
<p><strong>Maps</strong> are yet another kind of compound type. It is
conventional to use Objects as the <strong>mapping type</strong> in
Javascript, as we have seen in the <em>School Data</em> case study.
Javascript also offers a built-in [Map data type]
(https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map),
but we will stick with the Object convention for this chapter.</p>
<p>Mapped data structures <em>map</em> <strong>keys</strong> to
<strong>values</strong>. Values can be any type (heterogeneous), just
like the elements of an array. Sometimes maps are called <em>associative
arrays</em> since they associate a key with a value. When using objects
as maps (as we will for most of this chapter), <em>keys</em> should be
strings. The <code>Map</code> object in Javascript allows keys to be of
any type.</p>
<p>As an example, we will create a map to translate English words into
Spanish. For this map, the keys are strings.</p>
<p>One way to create a map is to start with the empty object and add
<strong>key:value pairs</strong>. The empty object is denoted by
<code>{}</code>:</p>
<div class="sourceCode" id="cb215"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> eng2sp <span class="op">=</span> {}<span class="op">;</span></span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a>⠕ eng2sp[<span class="st">&quot;one&quot;</span>] <span class="op">=</span> <span class="st">&quot;uno&quot;</span><span class="op">;</span></span>
<span id="cb215-3"><a href="#cb215-3" aria-hidden="true" tabindex="-1"></a>⠕ eng2sp[<span class="st">&quot;two&quot;</span>] <span class="op">=</span> <span class="st">&quot;dos&quot;</span><span class="op">;</span></span></code></pre></div>
<p>The first assignment creates a map named <code>eng2sp</code>; the
other assignments add new key:value pairs to the map. We can print the
current value of the map in the usual way:</p>
<div class="sourceCode" id="cb216"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(eng2sp)<span class="op">;</span></span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a>{ <span class="dt">one</span><span class="op">:</span> <span class="st">&#39;uno&#39;</span><span class="op">,</span> <span class="dt">two</span><span class="op">:</span> <span class="st">&#39;dos&#39;</span> }</span></code></pre></div>
<p>The key:value pairs of the map are separated by commas. Each pair
contains a key and a value separated by a colon.</p>
<aside id="hashing">
<p><strong>Hashing</strong></p>
<p>The order of the pairs may not be what was expected. Javascript
objects don’t guarantee the that keys are returned in the same order
they’re inserted (<code>Maps</code>’s do, however). Javascript uses
complex algorithms, designed for very fast access, to determine where
the key:value pairs are stored in a map. For our purposes we can think
of this ordering as unpredictable.</p>
<p>You also might wonder why we use maps at all when the same concept of
mapping a key to a value could be implemented using an array of arrays
with key:value pairs:</p>
<div class="sourceCode" id="cb217"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> eng2spArray <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a>⠕ eng2sp[<span class="dv">0</span>] <span class="op">=</span> [<span class="st">&quot;one&quot;</span><span class="op">,</span> <span class="st">&quot;uno&quot;</span>]<span class="op">;</span></span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true" tabindex="-1"></a>⠕ eng2sp[<span class="dv">1</span>] <span class="op">=</span> [<span class="st">&quot;two&quot;</span><span class="op">,</span> <span class="st">&quot;dos&quot;</span>]<span class="op">;</span></span></code></pre></div>
<p>In this example, the zeroeth element of the nested arrays contains
the key and the first element contains the value. We could retrieve the
key:value pair by iterating through the array and searching for a
key.</p>
<p>Maps provide very fast lookup by keys by implementing a technique
called hashing, which allows us to access a value very quickly. By
contrast, the “array of arrays” implementation above is slow. If we
wanted to find a value associated with a key, we would have to iterate
over every element, checking the 0th element. What if the key wasn’t
even in the list? We would have to get to the end of it to find out.</p>
</aside>
<p>Another way to create a map is to provide a list of key:value pairs
using the same syntax as the previous output:</p>
<div class="sourceCode" id="cb218"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> eng2sp <span class="op">=</span> {<span class="st">&quot;one&quot;</span><span class="op">:</span> <span class="st">&quot;uno&quot;</span><span class="op">,</span> <span class="st">&quot;two&quot;</span><span class="op">:</span> <span class="st">&quot;dos&quot;</span><span class="op">,</span> <span class="st">&quot;three&quot;</span><span class="op">:</span> <span class="st">&quot;tres&quot;</span>}<span class="op">;</span></span></code></pre></div>
<p>It doesn’t matter what order we write the pairs. The values in a map
are accessed with keys, not with indices, so there is no need to care
about ordering.</p>
<p>Here is how we use a key to look up the corresponding value:</p>
<div class="sourceCode" id="cb219"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(eng2sp[<span class="st">&quot;two&quot;</span>])<span class="op">;</span></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a>dos</span></code></pre></div>
<p>The key <code>"two"</code> yields the value <code>"dos"</code>.</p>
<p>Arrays and strings have been called <em>sequences</em>, because their
items occur in order. The map is the first compound type that we’ve seen
that is not a sequence, so we can’t index or slice a map.</p>
</section>
<section id="map-operations" class="level2">
<h2>Map operations</h2>
<p>The <code>delete</code> statement removes a key:value pair from a
map. For example, the following map contains the names of various fruits
and the number of each fruit in stock:</p>
<div class="sourceCode" id="cb220"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> inventory <span class="op">=</span> {<span class="st">&quot;apples&quot;</span><span class="op">:</span> <span class="dv">430</span><span class="op">,</span> <span class="st">&quot;bananas&quot;</span><span class="op">:</span> <span class="dv">312</span><span class="op">,</span> <span class="st">&quot;oranges&quot;</span><span class="op">:</span> <span class="dv">525</span><span class="op">,</span> <span class="st">&quot;pears&quot;</span><span class="op">:</span> <span class="dv">217</span>}<span class="op">;</span>   </span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(inventory)<span class="op">;</span></span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true" tabindex="-1"></a>{ <span class="dt">apples</span><span class="op">:</span> <span class="dv">430</span><span class="op">,</span> <span class="dt">bananas</span><span class="op">:</span> <span class="dv">312</span><span class="op">,</span> <span class="dt">oranges</span><span class="op">:</span> <span class="dv">525</span><span class="op">,</span> <span class="dt">pears</span><span class="op">:</span> <span class="dv">217</span> }</span></code></pre></div>
<p>If someone buys all of the pears, we can remove the entry from the
map:</p>
<div class="sourceCode" id="cb221"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">delete</span> inventory[<span class="st">&quot;pears&quot;</span>]<span class="op">;</span></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(inventory)<span class="op">;</span></span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a>{ <span class="dt">apples</span><span class="op">:</span> <span class="dv">430</span><span class="op">,</span> <span class="dt">bananas</span><span class="op">:</span> <span class="dv">312</span><span class="op">,</span> <span class="dt">oranges</span><span class="op">:</span> <span class="dv">525</span> }</span></code></pre></div>
<p>Or if we’re expecting more pears soon, we might just change the value
associated with pears:</p>
<div class="sourceCode" id="cb222"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a>⠕ inventory[<span class="st">&quot;pears&quot;</span>] <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(inventory)<span class="op">;</span></span>
<span id="cb222-3"><a href="#cb222-3" aria-hidden="true" tabindex="-1"></a>{ <span class="dt">apples</span><span class="op">:</span> <span class="dv">430</span><span class="op">,</span> <span class="dt">bananas</span><span class="op">:</span> <span class="dv">312</span><span class="op">,</span> <span class="dt">oranges</span><span class="op">:</span> <span class="dv">525</span><span class="op">,</span> <span class="dt">pears</span><span class="op">:</span> <span class="dv">0</span> }</span></code></pre></div>
<p>A new shipment of bananas arriving could be handled like this:</p>
<div class="sourceCode" id="cb223"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a>⠕ inventory[<span class="st">&quot;bananas&quot;</span>] <span class="op">+=</span> <span class="dv">200</span><span class="op">;</span></span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(inventory)<span class="op">;</span></span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a>inventory[<span class="st">&quot;bananas&quot;</span>] <span class="op">+=</span> <span class="dv">200</span></span></code></pre></div>
<aside id="map-dot-notation">
<p><strong>Dot Notation</strong></p>
<p>All objects in Javascript are mapped data types (associative arrays),
and the functions and properties of the object are <em>values</em>
associated with the object by its <em>keys</em>. So,
<code>inventory.bananas</code> is equivalent to
<code>inventory["bananas"]</code>. Often, it is easier to read and write
Javascript using “dot notation” — accessing the function or property by
the <code>.</code> symbol. Note, however that only valid Javascript
identifiers can be used via dot notation, where as any string can be
used as a key using bracket notation.</p>
<p><code>inventory.date of next delivery</code> produces an error, where
<code>inventory["date of next delivery"]</code> is valid Javascript
code.</p>
</aside>
</section>
<section id="object-utility-functions" class="level2">
<h2>Object utility functions</h2>
<p>The built in <code>Object</code> library contains many useful
functions for working with objects as map datatypes.</p>
<p>We can use <code>Object.keys()</code> to return an array of all of
the keys in a map. Using the keys, we can <em>iterate</em> through the
keys and values in our map.</p>
<div class="sourceCode" id="cb224"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb224-1"><a href="#cb224-1"></a><span class="kw">let</span> eng2sp <span class="op">=</span> {<span class="st">&quot;one&quot;</span><span class="op">:</span> <span class="st">&quot;uno&quot;</span><span class="op">,</span> <span class="st">&quot;two&quot;</span><span class="op">:</span> <span class="st">&quot;dos&quot;</span><span class="op">,</span> <span class="st">&quot;three&quot;</span><span class="op">:</span> <span class="st">&quot;tres&quot;</span>}<span class="op">;</span></span>
<span id="cb224-2"><a href="#cb224-2"></a><span class="kw">let</span> keys <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">keys</span>(eng2sp)<span class="op">;</span></span>
<span id="cb224-3"><a href="#cb224-3"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> keys<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb224-4"><a href="#cb224-4"></a>  <span class="kw">let</span> k <span class="op">=</span> keys[i]<span class="op">;</span></span>
<span id="cb224-5"><a href="#cb224-5"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Got key&quot;</span><span class="op">,</span> k<span class="op">,</span> <span class="st">&quot;which maps to value&quot;</span><span class="op">,</span> eng2sp[k])<span class="op">;</span></span>
<span id="cb224-6"><a href="#cb224-6"></a>}</span>
<span id="cb224-7"><a href="#cb224-7"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(keys)<span class="op">;</span></span></code></pre></div>
<p>This produces this output:</p>
<div class="sourceCode" id="cb225"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a>Got key one which maps to value uno</span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a>Got key two which maps to value dos</span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a>Got key three which maps to value tres</span>
<span id="cb225-4"><a href="#cb225-4" aria-hidden="true" tabindex="-1"></a>[ <span class="st">&#39;one&#39;</span><span class="op">,</span> <span class="st">&#39;two&#39;</span><span class="op">,</span> <span class="st">&#39;three&#39;</span> ]</span></code></pre></div>
<p>It is so common to iterate over the keys in a map that Javascript
provides a special syntax for this loop.</p>
<div class="sourceCode" id="cb226"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb226-1"><a href="#cb226-1"></a><span class="cf">for</span> (<span class="kw">let</span> k <span class="kw">in</span> eng2sp) {</span>
<span id="cb226-2"><a href="#cb226-2"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;Got key&quot;</span><span class="op">,</span> k)<span class="op">;</span></span>
<span id="cb226-3"><a href="#cb226-3"></a>}</span></code></pre></div>
<p>The <code>Object.values()</code> function is similar to
<code>keys()</code>; it returns an array containing all of the map’s
objects:</p>
<div class="sourceCode" id="cb227"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Object</span><span class="op">.</span><span class="fu">values</span>(eng2sp)<span class="op">;</span></span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a><span class="kw">=&gt;</span> [ <span class="st">&#39;uno&#39;</span><span class="op">,</span> <span class="st">&#39;dos&#39;</span><span class="op">,</span> <span class="st">&#39;tres&#39;</span> ]</span></code></pre></div>
<p>The <code>Object.entries()</code> function returns an array of
key:value pair arrays.</p>
<div class="sourceCode" id="cb228"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="bu">Object</span><span class="op">.</span><span class="fu">entries</span>(eng2sp)<span class="op">;</span></span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a>[ [ <span class="st">&#39;one&#39;</span><span class="op">,</span> <span class="st">&#39;uno&#39;</span> ]<span class="op">,</span> [ <span class="st">&#39;two&#39;</span><span class="op">,</span> <span class="st">&#39;dos&#39;</span> ]<span class="op">,</span> [ <span class="st">&#39;three&#39;</span><span class="op">,</span> <span class="st">&#39;tres&#39;</span> ] ]</span></code></pre></div>
<p>Combining <code>Object.entries()</code> with a Javascript syntax for
<a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">destructuring
assignment</a>, we can easily iterate over the keys and values of a
map.</p>
<div class="sourceCode" id="cb229"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb229-1"><a href="#cb229-1"></a><span class="cf">for</span> (<span class="kw">let</span> [k<span class="op">,</span> v] <span class="kw">of</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">entries</span>(eng2sp)) {</span>
<span id="cb229-2"><a href="#cb229-2"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(k<span class="op">,</span> v)<span class="op">;</span></span>
<span id="cb229-3"><a href="#cb229-3"></a>}</span></code></pre></div>
<p>This produces:</p>
<div class="sourceCode" id="cb230"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a>one uno</span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a>two dos</span>
<span id="cb230-3"><a href="#cb230-3" aria-hidden="true" tabindex="-1"></a>three tres</span></code></pre></div>
<p>This simple example introduces two new Javascript structures.
<strong>Destructuring</strong> takes the values of an array on the right
hand of the assignment operator and assigns them to multiple individual
variables on the left hand side of the operation.
<code>let [a, b] = [1, 2]</code> creates two new variables,
<code>a</code> and <code>b</code> with the values <code>1</code> and
<code>2</code> respectively.</p>
<p>We also use the special <strong>for…of</strong> syntax for this loop.
This is a compact form of our usual array iteration loop that doesn’t
require (or afford) a loop index. Other than iterating through key:value
pairs of maps, we will use the standard for loop for array iteration. <a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of">You
can read more about for…of in the docs.</a></p>
<p>If we try to access a key that isn’t in our map, Javascript yields
the special <code>undefined</code> value. Javascript offers the
<code>in</code> operator specifically to allow us to test if a key
exists in a map. <code>in</code> will always return a boolean result
(<code>true</code> or <code>false</code>) indicating the existence of a
key.</p>
<div class="sourceCode" id="cb231"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a>⠕ eng2sp[<span class="st">&quot;one&quot;</span>]</span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;uno&#39;</span></span>
<span id="cb231-3"><a href="#cb231-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="st">&quot;six&quot;</span> <span class="kw">in</span> eng2sp</span>
<span id="cb231-4"><a href="#cb231-4" aria-hidden="true" tabindex="-1"></a><span class="kw">false</span></span></code></pre></div>
<p>Later in the chapter we will see some examples where we use this
technique to determine if we should update an existing entry in a map or
create a new entry.</p>
<p>Have a look at this video if you want to see some of the map basics
in action.</p>
<div class="embed-responsive embed-responsive-16by9">
<iframe class="embed-responsive-item" src="https://www.youtube.com/embed/YKgKhPm-2JE" allowfullscreen>
</iframe>
</div>
</section>
<section id="aliasing-and-copying" class="level2">
<h2>Aliasing and copying</h2>
<p>As in the case of arrays, because maps are mutable, we need to be
aware of aliasing. Whenever two variables refer to the same object,
changes to one affect the other.</p>
<p>If we want to modify a map and keep a copy of the original, use the
<code>copy</code> method. For example, <code>opposites</code> is a map
that contains pairs of opposites:</p>
<div class="sourceCode" id="cb232"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> opposites <span class="op">=</span> {<span class="st">&quot;up&quot;</span><span class="op">:</span> <span class="st">&quot;down&quot;</span><span class="op">,</span> <span class="st">&quot;right&quot;</span><span class="op">:</span> <span class="st">&quot;wrong&quot;</span><span class="op">,</span> <span class="st">&quot;yes&quot;</span><span class="op">:</span> <span class="st">&quot;no&quot;</span>}<span class="op">;</span></span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> alias <span class="op">=</span> opposites<span class="op">;</span></span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a>⠕ <span class="kw">let</span> copy <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">assign</span>(opposites)<span class="op">;</span>  <span class="co">// a shallow copy</span></span></code></pre></div>
<p><code>alias</code> and <code>opposites</code> refer to the same
object; <code>copy</code> refers to a fresh copy of the same map. If we
modify <code>alias</code>, <code>opposites</code> is also changed:</p>
<div class="sourceCode" id="cb233"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a>⠕ alias[<span class="st">&quot;right&quot;</span>] <span class="op">=</span> <span class="st">&quot;left&quot;</span><span class="op">;</span></span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a>⠕ opposites[<span class="st">&quot;right&quot;</span>]<span class="op">;</span></span>
<span id="cb233-3"><a href="#cb233-3" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;left&#39;</span></span></code></pre></div>
<p>If we modify <code>copy</code>, <code>opposites</code> is
unchanged:</p>
<div class="sourceCode" id="cb234"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a>⠕ copy[<span class="st">&quot;right&quot;</span>] <span class="op">=</span> <span class="st">&quot;privilege&quot;</span><span class="op">;</span></span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a>⠕ opposites[<span class="st">&quot;right&quot;</span>]<span class="op">;</span></span>
<span id="cb234-3"><a href="#cb234-3" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;left&#39;</span></span></code></pre></div>
</section>
<section id="counting-letters" class="level2">
<h2>Counting letters</h2>
<p>In the exercises in in the Strings chapter, we wrote a function that
counted the number of occurrences of vowels in a string. A more general
version of this problem is to form a frequency table of the letters in
the string, that is, how many times each letter appears.</p>
<p>Such a frequency table might be useful for compressing a text file.
Because different letters appear with different frequencies, we can
compress a file by using shorter codes for common letters and longer
codes for letters that appear less frequently.</p>
<p>Maps provide an elegant way to generate a frequency table:</p>
<div class="sourceCode" id="cb235"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb235-1"><a href="#cb235-1"></a><span class="kw">let</span> letterCounts <span class="op">=</span> {}<span class="op">;</span></span>
<span id="cb235-2"><a href="#cb235-2"></a><span class="kw">let</span> word <span class="op">=</span> <span class="st">&quot;Mississippi&quot;</span><span class="op">;</span></span>
<span id="cb235-3"><a href="#cb235-3"></a>word <span class="op">=</span> word<span class="op">.</span><span class="fu">toLowerCase</span>()<span class="op">;</span></span>
<span id="cb235-4"><a href="#cb235-4"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> word<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb235-5"><a href="#cb235-5"></a>  <span class="kw">let</span> letter <span class="op">=</span> word[i]<span class="op">;</span></span>
<span id="cb235-6"><a href="#cb235-6"></a>  <span class="cf">if</span> (letter <span class="kw">in</span> letterCounts) {</span>
<span id="cb235-7"><a href="#cb235-7"></a>    letterCounts[letter]<span class="op">++;</span></span>
<span id="cb235-8"><a href="#cb235-8"></a>  }</span>
<span id="cb235-9"><a href="#cb235-9"></a>  <span class="cf">else</span> {</span>
<span id="cb235-10"><a href="#cb235-10"></a>    letterCounts[letter] <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb235-11"><a href="#cb235-11"></a>  }</span>
<span id="cb235-12"><a href="#cb235-12"></a>}</span>
<span id="cb235-13"><a href="#cb235-13"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(letterCounts)<span class="op">;</span></span></code></pre></div>
<p>Outputs:</p>
<div class="sourceCode" id="cb236"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a>{ <span class="dt">M</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">i</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span> <span class="dt">s</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span> <span class="dt">p</span><span class="op">:</span> <span class="dv">2</span> }</span></code></pre></div>
<p>We start with an empty map. For each letter in the string, we find
the current count (possibly zero) and increment it. At the end, the map
contains pairs of letters and their frequencies. We use a Boolean
<code>if</code>/<code>else</code> to determine if the key exists in our
map. _If the key is already <code>in</code> the <em>map</em> we
increment the count, <em>else</em> we assign an initial value of 1 to
that key. Note that we call <code>toLowerCase()</code> on our string
because keys, as you should expect, are <em>case-sensitive</em>.</p>
<p>It might be more appealing to display the frequency table in
alphabetical order. We can do that with the <code>Object.keys()</code>
function in the Object library and then calling <code>sort()</code> on
our array of keys. We can add this code to our example above in order to
print out the frequency map of letters in alphabetical order.</p>
<div class="sourceCode" id="cb237" data-startFrom="15"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript" style="counter-reset: source-line 14;"><span id="cb237-15"><a href="#cb237-15"></a><span class="kw">let</span> keys <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">keys</span>(letterCounts)<span class="op">;</span></span>
<span id="cb237-16"><a href="#cb237-16"></a>keys<span class="op">.</span><span class="fu">sort</span>()<span class="op">;</span></span>
<span id="cb237-17"><a href="#cb237-17"></a><span class="cf">for</span>(<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> keys<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb237-18"><a href="#cb237-18"></a>  <span class="kw">let</span> letter <span class="op">=</span> keys[i]<span class="op">;</span></span>
<span id="cb237-19"><a href="#cb237-19"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`</span><span class="sc">${</span>letter<span class="sc">}</span><span class="vs">: </span><span class="sc">${</span>letterCounts[letter]<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb237-20"><a href="#cb237-20"></a>}</span></code></pre></div>
<p>See the interactive example online at <a
href="https://repl.it/@mcuringa/MapLetterFrequency"
class="uri">https://repl.it/@mcuringa/MapLetterFrequency</a>.</p>
</section>
<section id="glossary-8" class="level2">
<h2>Glossary</h2>
<dl>
<dt>map</dt>
<dd>
A collection of key:value pairs that maps from keys to values. The keys
should be a string, and the associated value can be of any type.
</dd>
<dt>immutable data value</dt>
<dd>
A data value which cannot be modified. Assignments to immutable
datatypes have no effect or cause a runtime error.
</dd>
<dt>key</dt>
<dd>
A data item that is <em>mapped to</em> a value in a map. Keys are used
to look up values in a map. Each key must be unique across the map.
</dd>
<dt>key:value pair</dt>
<dd>
One of the pairs of items in a map. Values are looked up in a map by
key.
</dd>
<dt>mapping type</dt>
<dd>
A mapping type is a data type comprised of a collection of keys and
associated values. Javascript’s objects are used as mapping types in
this chapter. Objects implement the <a
href="http://en.wikipedia.org/wiki/Associative_array">associative
array</a> abstract data type.
</dd>
<dt>mutable data value</dt>
<dd>
A data value which can be modified. The types of all mutable values are
compound types. Arrays and maps are mutable; strings and numbers are
not.
</dd>
</dl>
</section>
</section>
<section id="web-guis" class="level1">
<h1>Web GUIs</h1>
<section id="gui-graphical-user-interface" class="level2">
<h2>GUI: Graphical User Interface</h2>
<p>A GUI or <em>graphical user interface</em> is the main way that most
of us interact with computers most of the time. The standards for
graphical computing are well known: clicking buttons and icons,
scrolling windows, reading images and text, etc. When we created our
Turtle programs, we were programming GUIs.</p>
<p>Most of the examples in this text, however have used <em>text
interfaces</em> or Command Line Interfaces (CLI). With a CLI, the user
receives computer output through text on the screen, and sends input to
the program by entering text. In this chapter, we introduce a
Javascript-based library for creating GUIs web applications.</p>
</section>
<section id="how-the-web-works-the-super-brief-version" class="level2">
<h2>How the web works (the super brief version)</h2>
<p>There are three computer languages that form the base for any web
page. They are HTML, CSS, and Javascript. Hypertext markup language
(HTML) describes the type of content on a web page. HTML describes many
different types of content. You are familiar with most of them: - text:
titles, paragraphs, lists, etc - media: images, videos, audio, animation
graphics - links: that allow navigation to different areas of the web -
form elements: buttons, input boxes, checkboxes, and other elements that
users to input information - tables: that display grids of
information</p>
<p>Other HTML elements are more structural, they divide web pages into
sections (like headers and footers).</p>
<p>Cascading style sheets (CSS), control the layout of the content
described by the HTML. CSS can be used to change the font or text size,
add background images to elements, space and size different containers,
and, generally create useful and aesthetic interfaces. A single HTML
document can work with different CSS styles, allowing it to adapt to
different use cases. One set of styles can control layout for mobile
phones, another for laptops, and yet another for print.</p>
<p>Javascript is the only <strong>programming language</strong> of the
three languages discussed here. It’s the only of the group that uses
variables and controls the flow of execution with loops and Boolean
conditions. At this point in the book, we are familiar with many of the
programming aspects of Javascript. For the web, Javascript can interact
with user input, and dynamically change the content and HTML structure
on a page. While some, small websites are <strong>static</strong> —
meaning that all of the content and HTML is written by hand in a text
editor like the one in repl.it — most website pull the content from
databases or other data files. We have begun to see how Javascript can
interact with larger sets of data, now we will see how Javascript can be
used to display this data on the web, to create <strong>dynamic</strong>
websites that change when the data is changed.</p>
</section>
<section id="js-gui" class="level2">
<h2>JS GUI</h2>
<p>JS GUI is a Javascript library or module that is being written to
accompany the examples in this book. There are many powerful Javascript
frameworks, like React (developed by Facebook) and Angular (developed by
Google), used by professional software developers to create complex,
interactive web applications. However, these professional frameworks
aren’t necessarily the best or easiest to start with.</p>
<p>To use JS GUI, you need the following:</p>
<ul>
<li>a website <a href="https://repl.it/@mcuringa/JSGuiDemo">like this
demo repl</a></li>
<li>an html page that runs your Javascript file
(e.g. <code>index.html</code>)</li>
<li>a local version of the <code>jsgui.js</code> library</li>
</ul>
<p>The following code examples assume such a set-up.</p>
</section>
<section id="basic-elements" class="level2">
<h2>Basic Elements</h2>
<p>JS GUI provides a series of functions for creating and adding
graphical elements to a web page. After importing the library, you can
easily start adding elements. The following code creates a web site with
the text, <em>Hello, world</em>.</p>
<div class="sourceCode" id="cb238"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb238-1"><a href="#cb238-1"></a><span class="im">import</span> jsgui <span class="im">from</span> <span class="st">&quot;./lib/jsgui.js&quot;</span><span class="op">;</span></span>
<span id="cb238-2"><a href="#cb238-2"></a></span>
<span id="cb238-3"><a href="#cb238-3"></a>jsgui<span class="op">.</span><span class="fu">add</span>(<span class="st">&quot;Hello, world&quot;</span>)<span class="op">;</span></span></code></pre></div>
<p>JS GUI provides functions to create titles, (level 1-6), images, and
paragraphs of text. New lines can be created with <code>br()</code> and
horizontal rules with <code>hr()</code>. This code uses titles, text,
images, breaks, and rules.</p>
<div class="sourceCode" id="cb239"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb239-1"><a href="#cb239-1"></a><span class="im">import</span> jsgui <span class="im">from</span> <span class="st">&quot;./lib/jsgui.js&quot;</span><span class="op">;</span></span>
<span id="cb239-2"><a href="#cb239-2"></a></span>
<span id="cb239-3"><a href="#cb239-3"></a><span class="kw">let</span> catPic <span class="op">=</span> jsgui<span class="op">.</span><span class="fu">img</span>(<span class="st">&quot;cat.jpg&quot;</span><span class="op">,</span> <span class="st">&quot;a black cat&quot;</span>)<span class="op">;</span></span>
<span id="cb239-4"><a href="#cb239-4"></a><span class="kw">let</span> dogPic <span class="op">=</span> jsgui<span class="op">.</span><span class="fu">img</span>(<span class="st">&quot;dog.jpg&quot;</span><span class="op">,</span> <span class="st">&quot;a shaggy Newfoundland dog&quot;</span>)<span class="op">;</span></span>
<span id="cb239-5"><a href="#cb239-5"></a></span>
<span id="cb239-6"><a href="#cb239-6"></a>jsgui<span class="op">.</span><span class="fu">add</span>(jsgui<span class="op">.</span><span class="fu">h1</span>(<span class="st">&quot;Cats and Dogs&quot;</span>))<span class="op">;</span></span>
<span id="cb239-7"><a href="#cb239-7"></a>jsgui<span class="op">.</span><span class="fu">add</span>(jsgui<span class="op">.</span><span class="fu">p</span>(<span class="st">&quot;Do you prefer cats or dogs?&quot;</span>))<span class="op">;</span></span>
<span id="cb239-8"><a href="#cb239-8"></a></span>
<span id="cb239-9"><a href="#cb239-9"></a>jsgui<span class="op">.</span><span class="fu">add</span>(jsgui<span class="op">.</span><span class="fu">h4</span>(<span class="st">&quot;Cat people&quot;</span>))<span class="op">;</span></span>
<span id="cb239-10"><a href="#cb239-10"></a>jsgui<span class="op">.</span><span class="fu">add</span>(catPic)<span class="op">;</span></span>
<span id="cb239-11"><a href="#cb239-11"></a>jsgui<span class="op">.</span><span class="fu">add</span>(jsgui<span class="op">.</span><span class="fu">br</span>())<span class="op">;</span></span>
<span id="cb239-12"><a href="#cb239-12"></a>jsgui<span class="op">.</span><span class="fu">add</span>(<span class="st">&quot;Some people like cats. Cats are quiet, playful, soft, and sweet.&quot;</span>)<span class="op">;</span></span>
<span id="cb239-13"><a href="#cb239-13"></a></span>
<span id="cb239-14"><a href="#cb239-14"></a>jsgui<span class="op">.</span><span class="fu">add</span>(jsgui<span class="op">.</span><span class="fu">br</span>())<span class="op">;</span></span>
<span id="cb239-15"><a href="#cb239-15"></a>jsgui<span class="op">.</span><span class="fu">add</span>(jsgui<span class="op">.</span><span class="fu">hr</span>())<span class="op">;</span></span>
<span id="cb239-16"><a href="#cb239-16"></a>jsgui<span class="op">.</span><span class="fu">add</span>(jsgui<span class="op">.</span><span class="fu">br</span>())<span class="op">;</span></span>
<span id="cb239-17"><a href="#cb239-17"></a></span>
<span id="cb239-18"><a href="#cb239-18"></a>jsgui<span class="op">.</span><span class="fu">add</span>(jsgui<span class="op">.</span><span class="fu">h4</span>(<span class="st">&quot;Dog people&quot;</span>))<span class="op">;</span></span>
<span id="cb239-19"><a href="#cb239-19"></a>jsgui<span class="op">.</span><span class="fu">add</span>(dogPic)<span class="op">;</span></span>
<span id="cb239-20"><a href="#cb239-20"></a>jsgui<span class="op">.</span><span class="fu">add</span>(jsgui<span class="op">.</span><span class="fu">br</span>())<span class="op">;</span></span>
<span id="cb239-21"><a href="#cb239-21"></a>jsgui<span class="op">.</span><span class="fu">add</span>(<span class="vs">`Some people like dogs. Dogs are loyal friends and</span></span>
<span id="cb239-22"><a href="#cb239-22"></a><span class="vs">companions, sad to see you leave and ecstatic when you get home.``);</span></span></code></pre></div>
<figure class="figure border">
<img src="figs/cats1.png" class="figure-img img-fluid" alt="Screenshot of a web page with an image of a cat and a dog with some text.">
<figcaption class="figure-caption">
<p>The web page produced by this code example.</p>
<a href="https://repl.it/@mcuringa/JSGuiDemo">See the repl with this
code in <code>cats1.js</code></a>
</figcaption>
</figure>
<p>The <code>img(url, alt)</code> function has two parameters, the first
is the URL of the image. In this case, it’s in the same location as our
code, so we only need the file name: <code>cat.jpg</code>. If it was on
another server, we could put the full URL, something like
<code>https://www.example.com/img/cat.jpg</code>. THe <code>alt</code>
parameter is a short text description of the image that makes the web
more useful for users with disabilities, such as visual impairment. For
the <code>catPic</code> and <code>dogPic</code> we save the image into a
variable before calling <code>add()</code> to place it on the web
page.</p>
<p>Th rest of the <strong>html elements</strong> in this code example
are composed directly with the <code>add()</code> function.
<code>h1()</code> and <code>h4()</code> create a level 1 header and
level 4 header respectively. <code>p()</code> creates a paragraph of
text. <code>br()</code> is a line break that forces a new line. Vertical
whitespace in HTML is (usually) ignored when the web browser lays out a
page. <code>hr()</code> creates a horizontal rule (line) across the
page.</p>
</section>
<section id="js-gui-arrays-and-objects" class="level2">
<h2>JS GUI, Arrays, and Objects</h2>
<p>JS GUI has some helper functions that makes it easy to display mapped
data and arrays of data. For the key-value pairs in a map, JS GUI uses
the HTML definition list element. A definition list
(<code>&lt;dl&gt;</code>) describes contents that have a <em>term</em>
and a <em>definition</em>. The <code>dl()</code> function maps the
<em>keys</em> to terms and the <em>values</em> to definitions.</p>
<div class="sourceCode" id="cb240"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb240-1"><a href="#cb240-1"></a><span class="co">// ...</span></span>
<span id="cb240-2"><a href="#cb240-2"></a></span>
<span id="cb240-3"><a href="#cb240-3"></a><span class="kw">let</span> pet <span class="op">=</span> {</span>
<span id="cb240-4"><a href="#cb240-4"></a>  <span class="dt">name</span><span class="op">:</span> <span class="st">&quot;Sparkle Swan Fireworks&quot;</span><span class="op">,</span></span>
<span id="cb240-5"><a href="#cb240-5"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">&quot;Cat&quot;</span><span class="op">,</span></span>
<span id="cb240-6"><a href="#cb240-6"></a>  <span class="dt">age</span><span class="op">:</span> <span class="st">&quot;3&quot;</span><span class="op">,</span></span>
<span id="cb240-7"><a href="#cb240-7"></a>  <span class="dt">breed</span><span class="op">:</span> <span class="st">&quot;American Short Hair&quot;</span></span>
<span id="cb240-8"><a href="#cb240-8"></a>}</span>
<span id="cb240-9"><a href="#cb240-9"></a>jsgui<span class="op">.</span><span class="fu">add</span>(jsgui<span class="op">.</span><span class="fu">dl</span>(pet))<span class="op">;</span></span></code></pre></div>
<figure class="figure border">
<img src="figs/jsgui-dl.png" class="figure-img img-fluid" alt="Screenshot of a web page with a definition list with the keys on the left and terms on the right.">
<figcaption class="figure-caption">
The keys are in a column on the left, right aligned and bold. The values
are on the right.
</figcaption>
</figure>
<p>Arrays of data can be quickly laid out as tables. The example below
uses an array of arrays, where each element of
<code>animalsOnScreen</code> is an array.
<code>jsgui.table(data, header)</code> takes the data as the first
argument. If an array is passed for the <code>header</code> argument,
<code>table()</code> will use that data to make bold column headers.
Although not used here, <code>data</code> can also be an array of data
maps. If this is the case, only the <code>values</code> from the map are
displayed in the table rows.</p>
<div class="sourceCode" id="cb241"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb241-1"><a href="#cb241-1"></a><span class="co">// ...</span></span>
<span id="cb241-2"><a href="#cb241-2"></a></span>
<span id="cb241-3"><a href="#cb241-3"></a><span class="kw">let</span> animalsOnScreen <span class="op">=</span> [</span>
<span id="cb241-4"><a href="#cb241-4"></a>  [<span class="st">&quot;Name&quot;</span><span class="op">,</span> <span class="st">&quot;Type&quot;</span><span class="op">,</span> <span class="st">&quot;Breed&quot;</span><span class="op">,</span> <span class="st">&quot;Film/Show&quot;</span>]<span class="op">,</span></span>
<span id="cb241-5"><a href="#cb241-5"></a>  [<span class="st">&quot;Rin Tin Tin&quot;</span><span class="op">,</span> <span class="st">&quot;Dog&quot;</span><span class="op">,</span> <span class="st">&quot;German Shepherd&quot;</span><span class="op">,</span> <span class="st">&quot;Various&quot;</span>]<span class="op">,</span></span>
<span id="cb241-6"><a href="#cb241-6"></a>  [<span class="st">&quot;Lassie&quot;</span><span class="op">,</span> <span class="st">&quot;Dog&quot;</span><span class="op">,</span> <span class="st">&quot;Collie&quot;</span><span class="op">,</span> <span class="st">&quot;Lassie&quot;</span>]<span class="op">,</span></span>
<span id="cb241-7"><a href="#cb241-7"></a>  [<span class="st">&quot;Mrs. Norris&quot;</span><span class="op">,</span> <span class="st">&quot;Cat&quot;</span><span class="op">,</span> <span class="st">&quot;Maine Coon&quot;</span><span class="op">,</span> <span class="st">&quot;Harry Potter&quot;</span>]<span class="op">,</span></span>
<span id="cb241-8"><a href="#cb241-8"></a>  [<span class="st">&quot;Flipper&quot;</span><span class="op">,</span> <span class="st">&quot;Dolphin&quot;</span><span class="op">,</span> <span class="st">&quot;bottlenose&quot;</span><span class="op">,</span> <span class="st">&quot;Flipper&quot;</span>]</span>
<span id="cb241-9"><a href="#cb241-9"></a>]<span class="op">;</span></span>
<span id="cb241-10"><a href="#cb241-10"></a><span class="kw">let</span> table <span class="op">=</span> jsgui<span class="op">.</span><span class="fu">table</span>(animalsOnScreen<span class="op">.</span><span class="fu">slice</span>(<span class="dv">1</span>)<span class="op">,</span> animalsOnScreen[<span class="dv">0</span>])<span class="op">;</span></span>
<span id="cb241-11"><a href="#cb241-11"></a>jsgui<span class="op">.</span><span class="fu">add</span>(table)<span class="op">;</span></span></code></pre></div>
<p>This example creates an array with 4 columns and 5 elements. Since
the 0-th element contains the header data, <code>slice(1)</code> is used
to exclude that row when <code>table()</code> is called, and the array
at <code>animalsOnScreen[0]</code> is passed as the <code>header</code>
argument.</p>
<figure class="figure border">
<img src="figs/jsgui-table.png" class="figure-img img-fluid" alt="Screenshot of a web page with a data presented in a table.">
<figcaption class="figure-caption">
The <strong>double scripted</strong> array gets presented as a table,
where each array element becomes a row, and each element of the
sub-array becomes a column.
</figcaption>
</figure>
</section>
<section id="code-listing-js-gui-demo" class="level2 codeListing">
<h2 class="codeListing">Code Listing: JS GUI Demo</h2>
<section id="complex-compositions-with-containers" class="level3">
<h3>Complex compositions with containers</h3>
<p>Web pages, like software programs, can be made more flexible using
the <strong>decomposition</strong> strategy of breaking the problem (the
page layout) into smaller parts. HTML offers a number of <strong>block
elements</strong> that contain other elements (including blocks). Using
Javascript, we can write functions that return a group of elements in
one of these containers. We can make our code more abstract, where
functions can use the same layout for different content. Alternatively,
we can make functions that are re-usable, such as returning headers,
footers, and navigation elements that can be used across several web
pages.</p>
<p>The examples in this code listing use many, but not all of the layout
features of JS GUI.</p>
<ul>
<li><a href="https://repl.it/@mcuringa/JSGuiDemo">View the “JS GUI Demo”
repl</a></li>
<li><a href="https://jsguidemo.mcuringa.repl.co/">View the “JS GUI Demo”
website</a></li>
</ul>
</section>
<section id="case-study-jsgui-demo" class="level3 jsguidemo codeNotes">
<h3 class="jsguidemo codeNotes">Case Study: JSGUI Demo</h3>
<aside data-line-number="4">
<p><code>import</code> the JS GUI module (aka package or library) into a
variable called <code>jsgui</code>. We could call this something else.
Perhaps a shorter name like <code>gui</code> or even <code>g</code>
would also make sense, since we use the package name in so many nested
calls below. <code>"./lib/jsgui.js"</code> tells JS to look for the
library in a <strong>directory</strong> (folder) called <code>lib</code>
and a file named <code>jsgui.js</code>.</p>
</aside>
<aside data-line-number="11">
<p>The <code>animalDetail()</code> function creates a consistent layout
of all of the content passed in to its parameters. The
<code>&lt;div&gt;</code> element created with <code>div()</code> is a
generic HTML container.</p>
</aside>
<aside data-line-number="21">
<p>Create a <code>&lt;section&gt;</code> container, <code>sec</code> to
hold all of the elements in the cats and dogs section.</p>
</aside>
<aside data-line-number="19">
<p>Create images for the cat and dog pictures. The first argument to
<code>img()</code> is the path or url of the image file. Web images
should be of type png, gif, or svg. Types like psd, bmp, tiff, might not
show up on the web.</p>
<p>We call <code>animalDetail()</code> twice, with different
arguments.</p>
</aside>
<aside data-line-number="32">
<p><code>grid()</code> makes a special grid layout container. A grid can
have between 1-12 columns. Add elements to a specific grid column with
<code>addToGrid(grid, colNumber, ...items)</code></p>
<p>After creating the grid, we append all of the items to our section
container and then return it.</p>
</aside>
<aside data-line-number="50">
<p>First, we create <code>animalsOnScreen</code>, a regular Javascript
array with a set of data. Each item of the array is an array (of
strings).</p>
<p>Call <code>table(data, cols)</code>:
<code>animalsOnScreen[1-4]</code> are the data and
<code>animalsOnScreen[0]</code> contains the column header
information.</p>
</aside>
<aside data-line-number="69">
<p>A <code>&lt;header&gt;</code> is a type of HTML container that
typically contains the content for a page or section header.</p>
</aside>
<aside data-line-number="79">
<p><code>about</code> is a string that contains special formatting marks
in a format called <strong>markdown</strong>. Markdown allows us to
easily turn plain text into Javascript. <code>jsgui</code> converts a
markdown formatted string to html with <code>md()</code> <a
href="https://guides.github.com/features/mastering-markdown/">Learn how
to write markdown here</a>.</p>
</aside>
<aside data-line-number="88">
<p><code>main</code> pulls all of our sections together in the order
they will be displayed on the page. <code>add()</code> takes multiple
arguments of elements to display, separated by commas (kind of like the
built in <code>console.log()</code>)</p>
</aside>
<div class="listingSrcCode">
<div class="sourceCode" id="cb242"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb242-1"><a href="#cb242-1"></a><span class="co">/**</span></span>
<span id="cb242-2"><a href="#cb242-2"></a><span class="co"> * index.js is the default script for the JSGUI Demo Site</span></span>
<span id="cb242-3"><a href="#cb242-3"></a><span class="co"> * It demonstrates some of the main layout functions included</span></span>
<span id="cb242-4"><a href="#cb242-4"></a><span class="co"> * in the js gui package.</span></span>
<span id="cb242-5"><a href="#cb242-5"></a><span class="co"> */</span></span>
<span id="cb242-6"><a href="#cb242-6"></a><span class="im">import</span> jsgui <span class="im">from</span> <span class="st">&quot;./lib/jsgui.js&quot;</span><span class="op">;</span></span>
<span id="cb242-7"><a href="#cb242-7"></a></span>
<span id="cb242-8"><a href="#cb242-8"></a><span class="co">/**</span></span>
<span id="cb242-9"><a href="#cb242-9"></a><span class="co"> * create a panel about an animal with a title, img, and caption</span></span>
<span id="cb242-10"><a href="#cb242-10"></a><span class="co"> */</span></span>
<span id="cb242-11"><a href="#cb242-11"></a><span class="kw">function</span> <span class="fu">animalDetail</span>(title<span class="op">,</span> img<span class="op">,</span> text) {</span>
<span id="cb242-12"><a href="#cb242-12"></a>  <span class="kw">let</span> container <span class="op">=</span> jsgui<span class="op">.</span><span class="fu">div</span>()<span class="op">;</span></span>
<span id="cb242-13"><a href="#cb242-13"></a>  jsgui<span class="op">.</span><span class="fu">append</span>(container<span class="op">,</span> jsgui<span class="op">.</span><span class="fu">h4</span>(title)<span class="op">,</span> img<span class="op">,</span> jsgui<span class="op">.</span><span class="fu">br</span>()<span class="op">,</span> text)<span class="op">;</span></span>
<span id="cb242-14"><a href="#cb242-14"></a>  <span class="cf">return</span> container<span class="op">;</span></span>
<span id="cb242-15"><a href="#cb242-15"></a>}</span>
<span id="cb242-16"><a href="#cb242-16"></a></span>
<span id="cb242-17"><a href="#cb242-17"></a><span class="co">/**</span></span>
<span id="cb242-18"><a href="#cb242-18"></a><span class="co"> * create a section with all of the elements for Cats or Dogs</span></span>
<span id="cb242-19"><a href="#cb242-19"></a><span class="co"> */</span></span>
<span id="cb242-20"><a href="#cb242-20"></a><span class="kw">function</span> <span class="fu">catsOrDogs</span>() {</span>
<span id="cb242-21"><a href="#cb242-21"></a>  <span class="kw">let</span> sec <span class="op">=</span> jsgui<span class="op">.</span><span class="fu">section</span>()<span class="op">;</span></span>
<span id="cb242-22"><a href="#cb242-22"></a></span>
<span id="cb242-23"><a href="#cb242-23"></a>  <span class="kw">let</span> catPic <span class="op">=</span> jsgui<span class="op">.</span><span class="fu">img</span>(<span class="st">&quot;cat.jpg&quot;</span><span class="op">,</span> <span class="st">&quot;a black cat&quot;</span>)<span class="op">;</span></span>
<span id="cb242-24"><a href="#cb242-24"></a>  <span class="kw">let</span> dogPic <span class="op">=</span> jsgui<span class="op">.</span><span class="fu">img</span>(<span class="st">&quot;dog.jpg&quot;</span><span class="op">,</span> <span class="st">&quot;a shaggy Newfoundland dog&quot;</span>)<span class="op">;</span></span>
<span id="cb242-25"><a href="#cb242-25"></a></span>
<span id="cb242-26"><a href="#cb242-26"></a>  <span class="kw">let</span> catPeople <span class="op">=</span> <span class="fu">animalDetail</span>(<span class="st">&quot;Cat people&quot;</span><span class="op">,</span> catPic<span class="op">,</span></span>
<span id="cb242-27"><a href="#cb242-27"></a>    <span class="st">&quot;Some people like cats. Cats are quiet, playful, soft, and sweet.&quot;</span>)<span class="op">;</span></span>
<span id="cb242-28"><a href="#cb242-28"></a></span>
<span id="cb242-29"><a href="#cb242-29"></a>  <span class="kw">let</span> dogPeople <span class="op">=</span> <span class="fu">animalDetail</span>(<span class="st">&quot;Dog people&quot;</span><span class="op">,</span> dogPic<span class="op">,</span></span>
<span id="cb242-30"><a href="#cb242-30"></a>    <span class="st">&quot;Some people like dogs: loyal friends and quick with a trick.&quot;</span>)<span class="op">;</span></span>
<span id="cb242-31"><a href="#cb242-31"></a></span>
<span id="cb242-32"><a href="#cb242-32"></a>  <span class="kw">let</span> grid <span class="op">=</span> jsgui<span class="op">.</span><span class="fu">grid</span>(<span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb242-33"><a href="#cb242-33"></a>  jsgui<span class="op">.</span><span class="fu">addToGrid</span>(grid<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> catPeople)<span class="op">;</span></span>
<span id="cb242-34"><a href="#cb242-34"></a>  jsgui<span class="op">.</span><span class="fu">addToGrid</span>(grid<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> dogPeople)<span class="op">;</span></span>
<span id="cb242-35"><a href="#cb242-35"></a>  jsgui<span class="op">.</span><span class="fu">append</span>(sec<span class="op">,</span></span>
<span id="cb242-36"><a href="#cb242-36"></a>    jsgui<span class="op">.</span><span class="fu">h2</span>(<span class="st">&quot;Cats and Dogs&quot;</span>)<span class="op">,</span></span>
<span id="cb242-37"><a href="#cb242-37"></a>    jsgui<span class="op">.</span><span class="fu">p</span>(<span class="st">&quot;Do you prefer cats or dogs?&quot;</span>)<span class="op">,</span></span>
<span id="cb242-38"><a href="#cb242-38"></a>    grid<span class="op">,</span></span>
<span id="cb242-39"><a href="#cb242-39"></a>    jsgui<span class="op">.</span><span class="fu">hr</span>())<span class="op">;</span></span>
<span id="cb242-40"><a href="#cb242-40"></a></span>
<span id="cb242-41"><a href="#cb242-41"></a>  <span class="cf">return</span> sec<span class="op">;</span></span>
<span id="cb242-42"><a href="#cb242-42"></a></span>
<span id="cb242-43"><a href="#cb242-43"></a>}</span>
<span id="cb242-44"><a href="#cb242-44"></a></span>
<span id="cb242-45"><a href="#cb242-45"></a><span class="co">/**</span></span>
<span id="cb242-46"><a href="#cb242-46"></a><span class="co"> * create the Animals on Screen section</span></span>
<span id="cb242-47"><a href="#cb242-47"></a><span class="co"> */</span></span>
<span id="cb242-48"><a href="#cb242-48"></a><span class="kw">function</span> <span class="fu">animalActors</span>() {</span>
<span id="cb242-49"><a href="#cb242-49"></a>  <span class="kw">let</span> sec <span class="op">=</span> jsgui<span class="op">.</span><span class="fu">section</span>()<span class="op">;</span></span>
<span id="cb242-50"><a href="#cb242-50"></a>  <span class="kw">let</span> animalsOnScreen <span class="op">=</span> [</span>
<span id="cb242-51"><a href="#cb242-51"></a>    [<span class="st">&quot;Name&quot;</span><span class="op">,</span> <span class="st">&quot;Type&quot;</span><span class="op">,</span> <span class="st">&quot;Breed&quot;</span><span class="op">,</span> <span class="st">&quot;Film/Show&quot;</span>]<span class="op">,</span></span>
<span id="cb242-52"><a href="#cb242-52"></a>    [<span class="st">&quot;Rin Tin Tin&quot;</span><span class="op">,</span> <span class="st">&quot;Dog&quot;</span><span class="op">,</span> <span class="st">&quot;German Shepherd&quot;</span><span class="op">,</span> <span class="st">&quot;Various&quot;</span>]<span class="op">,</span></span>
<span id="cb242-53"><a href="#cb242-53"></a>    [<span class="st">&quot;Lassie&quot;</span><span class="op">,</span> <span class="st">&quot;Dog&quot;</span><span class="op">,</span> <span class="st">&quot;Collie&quot;</span><span class="op">,</span> <span class="st">&quot;Lassie&quot;</span>]<span class="op">,</span></span>
<span id="cb242-54"><a href="#cb242-54"></a>    [<span class="st">&quot;Mrs. Norris&quot;</span><span class="op">,</span> <span class="st">&quot;Cat&quot;</span><span class="op">,</span> <span class="st">&quot;Maine Coon&quot;</span><span class="op">,</span> <span class="st">&quot;Harry Potter&quot;</span>]<span class="op">,</span></span>
<span id="cb242-55"><a href="#cb242-55"></a>    [<span class="st">&quot;Flipper&quot;</span><span class="op">,</span> <span class="st">&quot;Dolphin&quot;</span><span class="op">,</span> <span class="st">&quot;Bottlenose&quot;</span><span class="op">,</span> <span class="st">&quot;Flipper&quot;</span>]</span>
<span id="cb242-56"><a href="#cb242-56"></a>  ]<span class="op">;</span></span>
<span id="cb242-57"><a href="#cb242-57"></a>  <span class="kw">let</span> table <span class="op">=</span> jsgui<span class="op">.</span><span class="fu">table</span>(animalsOnScreen<span class="op">.</span><span class="fu">slice</span>(<span class="dv">1</span>)<span class="op">,</span> animalsOnScreen[<span class="dv">0</span>])<span class="op">;</span></span>
<span id="cb242-58"><a href="#cb242-58"></a>  jsgui<span class="op">.</span><span class="fu">append</span>(sec<span class="op">,</span></span>
<span id="cb242-59"><a href="#cb242-59"></a>    jsgui<span class="op">.</span><span class="fu">h2</span>(<span class="st">&quot;Animals on the Screen&quot;</span>)<span class="op">,</span></span>
<span id="cb242-60"><a href="#cb242-60"></a>    table<span class="op">,</span></span>
<span id="cb242-61"><a href="#cb242-61"></a>    jsgui<span class="op">.</span><span class="fu">hr</span>())<span class="op">;</span></span>
<span id="cb242-62"><a href="#cb242-62"></a>  <span class="cf">return</span> sec<span class="op">;</span></span>
<span id="cb242-63"><a href="#cb242-63"></a>}</span>
<span id="cb242-64"><a href="#cb242-64"></a></span>
<span id="cb242-65"><a href="#cb242-65"></a><span class="co">/**</span></span>
<span id="cb242-66"><a href="#cb242-66"></a><span class="co"> * create a page header</span></span>
<span id="cb242-67"><a href="#cb242-67"></a><span class="co"> */</span></span>
<span id="cb242-68"><a href="#cb242-68"></a><span class="kw">function</span> <span class="fu">header</span>() {</span>
<span id="cb242-69"><a href="#cb242-69"></a>  <span class="kw">let</span> h <span class="op">=</span> jsgui<span class="op">.</span><span class="fu">header</span>()<span class="op">;</span></span>
<span id="cb242-70"><a href="#cb242-70"></a>  jsgui<span class="op">.</span><span class="fu">append</span>(h<span class="op">,</span> jsgui<span class="op">.</span><span class="fu">h1</span>(<span class="st">&quot;Animals On Screen&quot;</span>))<span class="op">;</span></span>
<span id="cb242-71"><a href="#cb242-71"></a>  jsgui<span class="op">.</span><span class="fu">append</span>(h<span class="op">,</span> jsgui<span class="op">.</span><span class="fu">h5</span>(<span class="st">&quot;A demo of the JS GUI library&quot;</span>))<span class="op">;</span></span>
<span id="cb242-72"><a href="#cb242-72"></a>  <span class="kw">let</span> about <span class="op">=</span> <span class="st">&quot;JS GUI is [Free Open Source Software](https://fsf.org)&quot;</span></span>
<span id="cb242-73"><a href="#cb242-73"></a>    <span class="op">+</span> <span class="st">&quot;for teaching and learning to program web-based JS guis. &quot;</span></span>
<span id="cb242-74"><a href="#cb242-74"></a>    <span class="op">+</span> <span class="st">&quot;It was created by Robby Lucia and Matt Curinga to accompany &quot;</span></span>
<span id="cb242-75"><a href="#cb242-75"></a>    <span class="op">+</span> <span class="st">&quot;the open textbook, _Think JS_. &quot;</span></span>
<span id="cb242-76"><a href="#cb242-76"></a>    <span class="op">+</span> <span class="st">&quot;[[read online](http://mcuringa.github.com/think-js)] &quot;</span></span>
<span id="cb242-77"><a href="#cb242-77"></a>    <span class="op">+</span> <span class="st">&quot;[[source](https://github.com/mcuringa/think-js)].&quot;</span><span class="op">;</span></span>
<span id="cb242-78"><a href="#cb242-78"></a></span>
<span id="cb242-79"><a href="#cb242-79"></a>  about <span class="op">=</span> jsgui<span class="op">.</span><span class="fu">md</span>(about)<span class="op">;</span></span>
<span id="cb242-80"><a href="#cb242-80"></a>  jsgui<span class="op">.</span><span class="fu">append</span>(h<span class="op">,</span> about)<span class="op">;</span></span>
<span id="cb242-81"><a href="#cb242-81"></a>  jsgui<span class="op">.</span><span class="fu">append</span>(h<span class="op">,</span> jsgui<span class="op">.</span><span class="fu">hr</span>())<span class="op">;</span></span>
<span id="cb242-82"><a href="#cb242-82"></a></span>
<span id="cb242-83"><a href="#cb242-83"></a>  <span class="cf">return</span> h<span class="op">;</span></span>
<span id="cb242-84"><a href="#cb242-84"></a></span>
<span id="cb242-85"><a href="#cb242-85"></a>}</span>
<span id="cb242-86"><a href="#cb242-86"></a></span>
<span id="cb242-87"><a href="#cb242-87"></a><span class="co">// start our program</span></span>
<span id="cb242-88"><a href="#cb242-88"></a><span class="kw">function</span> <span class="fu">main</span>() {</span>
<span id="cb242-89"><a href="#cb242-89"></a>  jsgui<span class="op">.</span><span class="fu">add</span>(</span>
<span id="cb242-90"><a href="#cb242-90"></a>    <span class="fu">header</span>()<span class="op">,</span></span>
<span id="cb242-91"><a href="#cb242-91"></a>    <span class="fu">catsOrDogs</span>()<span class="op">,</span></span>
<span id="cb242-92"><a href="#cb242-92"></a>    <span class="fu">animalActors</span>()</span>
<span id="cb242-93"><a href="#cb242-93"></a>  )<span class="op">;</span></span>
<span id="cb242-94"><a href="#cb242-94"></a>}</span>
<span id="cb242-95"><a href="#cb242-95"></a></span>
<span id="cb242-96"><a href="#cb242-96"></a><span class="fu">main</span>()<span class="op">;</span></span></code></pre></div>
</div>
</section>
</section>
</section>
<section id="react-web-programming" class="level1">
<h1>React Web Programming</h1>
<section id="code-listing-spellcaster" class="level2 codeListing">
<h2 class="codeListing">Code Listing: SpellCaster</h2>
<section id="reacting-to-user-interaction" class="level3">
<h3>Reacting to user interaction</h3>
<p>This code listing steps through the process of making a moderately
complex web user interface that <em>reacts</em> to user actions. It
presents a list of spells and allows the user to <em>filter</em> the
list by checking/unchecking a series of checkbox form elements. The code
must keep track of which boxes are checked in the React Object
<strong>state</strong>. The list of spells must update dynamically when
changes are detected. This is what we mean by a <em>reactive
interface</em>.</p>
<ul>
<li><a href="https://repl.it/@mcuringa/SpellBookv2">View the SpellBook
repl</a></li>
<li><a href="https://spellbookv2--mcuringa.repl.co/">View the SpellBook
live website</a></li>
</ul>
</section>
<section id="case-study-spellcaster-spells"
class="level3 jsguidemo codeNotes">
<h3 class="jsguidemo codeNotes">Case Study: SpellCaster Spells</h3>
<aside data-line-number="1">
<p>We see a new <code>import</code> here from the <code>lodash</code>
library. <a href="https://lodash.com/docs/4.17.11">lodash</a> has many
useful functions for working with arrays, maps, collections, objects,
and functions. In this code, we are going to use it primarily for
<em>sorting</em> our data more easily.</p>
</aside>
<aside data-line-number="11">
<p>An objects <strong>constructor</strong> is called once, when the
object is first created or <em>instantiated</em>. For
<code>React Component</code> objects, we call <code>super()</code> to
trigger the generic <code>Component</code> constructor, then initialize
our default values for the <strong>state</strong>.</p>
<p><code>filters</code> will let us know which spells to display, based
on the character classes that are active (e.g. show only spells that
clerics and druids can use). All of the items are <code>true</code> to
start so that all spells are shown.</p>
</aside>
<aside data-line-number="29">
<p>Our objects methods (aka member functions) share data and communicate
with each other through the special <code>this</code> object.
<code>this</code> refers to this instance of <code>SpellTable</code>. If
we don’t <code>bind()</code> this to each of our functions, those
functions can’t access object data such as <code>state</code>,
<code>props</code>, or other methods.</p>
</aside>
<aside data-line-number="34">
<p>The <code>componentWillMount()</code> method is inherited from React
<code>Component</code>. It is called before the component is displayed.
It’s the best place to load the data that our component will need. Here
we take the spell objects that we imported from
<code>"./data/spells.json"</code> and we sort them by level. We call the
<code>setState()</code> function that is part of
<code>React Component</code> in order to update the state and trigger
our <code>render()</code> function if needed.</p>
</aside>
<aside data-line-number="39">
<p><code>toggleFilter()</code> gets called when one of our filter
checkboxes is checked or unchecked. It changes the <code>state</code> of
the entry in the <code>filters</code> map to <code>true</code> or
<code>false</code> (the logical opposite of whatever it currently
is).</p>
</aside>
<aside data-line-number="45">
<p><code>clearFilters()</code> sets all of the filters to
<code>false</code>. No spells will be shown, but it makes it easier for
the user to select just one character class.</p>
</aside>
<aside data-line-number="53">
<p><code>allCharClasses()</code> sets all of the filters to
<code>true</code> so that all spells are shown.</p>
</aside>
<aside data-line-number="61">
<p>All React Components <em>must</em> define a <code>render()</code>
method. This returns the JSX/string component that is rendered to the
screen (or <code>null</code> if nothing is to be displayed.) Our render
method is building an HTML table (with Bootstrap css classes) that shows
all of the spells that are active. It defines <code>th()</code> as an
internal function to map html <code>th</code> elements to an array of
strings. This creates the table header.</p>
</aside>
<aside data-line-number="75">
We look up the list of active filters from the <code>state</code> and
then call <code>filterSpellsByCharClass()</code> (see below) to find the
<code>spells</code> which should be active. We map those spells to
<code>SpellRow</code> components calling <code>spells.map()</code>
</aside>
<aside data-line-number="85">
<p>We have two buttons that make it easier to <em>clear</em> or
<em>check all</em> of the filters. They call
<code>this.clearFilters()</code> and <code>this.allCharClasses()</code>
(see above).</p>
<p>We call the <code>IconCheckBox</code> Component function (below) to
create a checkbox for each D&amp;D character class. When any of these
boxes are changed (checked or unchecked), passing
<code>toggleFilter()</code>, the active status, and the character class
as properties.</p>
</aside>
<aside data-line-number="100">
<p>Finally, we display the HTML table, with headers and rows.</p>
</aside>
<aside data-line-number="108">
On line 108 we close <code>SpellTable</code>, the only React class
Component in this code.
</aside>
<aside data-line-number="111">
<code>filterSpellsByCharClass()</code> is a plain old filter function
(and a pure one at that), which follows our well-known pattern from the
Arrays and Maps sections of this textbook. It takes the entire list of
spells and the list of active character classes as inputs and returns
the filtered list of spells that belonging to one of the active
character classes.
</aside>
<aside data-line-number="135">
<code>IconCheckBox()</code> is a reusable React component function that
returns a form checkbox element the corresponding character class icon.
The inner function, <code>toggle()</code> <em>wraps</em> the
<code>onChange</code> property function and passes the correct character
class string argument so <code>onChange</code> knows which class to
toggle.
</aside>
<aside data-line-number="151">
<p><code>SpellRow()</code> is a reusable React component function that
returns the JSX for an HTML table row. Note that <code>SpellRow</code>
doesn’t use a <code>properties</code> function parameter, but rather
takes the <code>spell</code> data object as its only argument. This
makes it easier to use with <code>Array.map()</code>.</p>
The inner <code>check()</code> function returns the
<code>ClassIcon</code> for a character class, or <code>null</code> if
this spell isn’t available to the class.
</aside>
<aside data-line-number="186">
The <code>SpellTable</code> is exported so it can be used as a Route
component by the navigation system (see the full code from the link
above).
</aside>
<div class="listingSrcCode">
<div class="sourceCode" id="cb243"><pre
class="sourceCode numberSource javascript numberLines"><code class="sourceCode javascript"><span id="cb243-1"><a href="#cb243-1"></a><span class="im">import</span> React<span class="op">,</span> { Component } <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></span>
<span id="cb243-2"><a href="#cb243-2"></a><span class="im">import</span> { Link } <span class="im">from</span> <span class="st">&quot;react-router-dom&quot;</span><span class="op">;</span></span>
<span id="cb243-3"><a href="#cb243-3"></a><span class="im">import</span> _ <span class="im">from</span> <span class="st">&quot;lodash&quot;</span><span class="op">;</span></span>
<span id="cb243-4"><a href="#cb243-4"></a></span>
<span id="cb243-5"><a href="#cb243-5"></a><span class="im">import</span> { ClassIcon } <span class="im">from</span> <span class="st">&quot;./Icons&quot;</span><span class="op">;</span></span>
<span id="cb243-6"><a href="#cb243-6"></a><span class="im">import</span> spells <span class="im">from</span> <span class="st">&quot;./data/spells.json&quot;</span><span class="op">;</span></span>
<span id="cb243-7"><a href="#cb243-7"></a><span class="im">import</span> details <span class="im">from</span> <span class="st">&quot;./res/wireframes/spell-detail.png&quot;</span><span class="op">;</span></span>
<span id="cb243-8"><a href="#cb243-8"></a></span>
<span id="cb243-9"><a href="#cb243-9"></a></span>
<span id="cb243-10"><a href="#cb243-10"></a><span class="kw">class</span> SpellTable <span class="kw">extends</span> Component {</span>
<span id="cb243-11"><a href="#cb243-11"></a>  <span class="fu">constructor</span>(props) {</span>
<span id="cb243-12"><a href="#cb243-12"></a>    <span class="kw">super</span>(props)<span class="op">;</span></span>
<span id="cb243-13"><a href="#cb243-13"></a>    <span class="kw">let</span> filters <span class="op">=</span> {</span>
<span id="cb243-14"><a href="#cb243-14"></a>      <span class="dt">bard</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb243-15"><a href="#cb243-15"></a>      <span class="dt">cleric</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb243-16"><a href="#cb243-16"></a>      <span class="dt">druid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb243-17"><a href="#cb243-17"></a>      <span class="dt">monk</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb243-18"><a href="#cb243-18"></a>      <span class="dt">paladin</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb243-19"><a href="#cb243-19"></a>      <span class="dt">ranger</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb243-20"><a href="#cb243-20"></a>      <span class="dt">sorcerer</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb243-21"><a href="#cb243-21"></a>      <span class="dt">warlock</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb243-22"><a href="#cb243-22"></a>      <span class="dt">wizard</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb243-23"><a href="#cb243-23"></a>    }</span>
<span id="cb243-24"><a href="#cb243-24"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">state</span> <span class="op">=</span> {</span>
<span id="cb243-25"><a href="#cb243-25"></a>      <span class="dt">spells</span><span class="op">:</span> []<span class="op">,</span></span>
<span id="cb243-26"><a href="#cb243-26"></a>      <span class="dt">charClassFilters</span><span class="op">:</span> filters</span>
<span id="cb243-27"><a href="#cb243-27"></a>    }<span class="op">;</span></span>
<span id="cb243-28"><a href="#cb243-28"></a></span>
<span id="cb243-29"><a href="#cb243-29"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">toggleFilter</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">toggleFilter</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>)<span class="op">;</span></span>
<span id="cb243-30"><a href="#cb243-30"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">clearFilters</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">clearFilters</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>)<span class="op">;</span></span>
<span id="cb243-31"><a href="#cb243-31"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">allCharClasses</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">allCharClasses</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>)<span class="op">;</span></span>
<span id="cb243-32"><a href="#cb243-32"></a>  }</span>
<span id="cb243-33"><a href="#cb243-33"></a></span>
<span id="cb243-34"><a href="#cb243-34"></a>  <span class="fu">componentWillMount</span>() {</span>
<span id="cb243-35"><a href="#cb243-35"></a>    <span class="kw">let</span> spellList <span class="op">=</span> _<span class="op">.</span><span class="fu">sortBy</span>(spells<span class="op">,</span> <span class="st">&quot;level_int&quot;</span>)<span class="op">;</span></span>
<span id="cb243-36"><a href="#cb243-36"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({ <span class="dt">spells</span><span class="op">:</span> spellList })<span class="op">;</span></span>
<span id="cb243-37"><a href="#cb243-37"></a>  }</span>
<span id="cb243-38"><a href="#cb243-38"></a></span>
<span id="cb243-39"><a href="#cb243-39"></a>  <span class="fu">toggleFilter</span>(charClass) {</span>
<span id="cb243-40"><a href="#cb243-40"></a>    <span class="kw">let</span> filters <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">charClassFilters</span><span class="op">;</span></span>
<span id="cb243-41"><a href="#cb243-41"></a>    filters[charClass] <span class="op">=</span> <span class="op">!</span>filters[charClass]<span class="op">;</span> <span class="co">//toggle the filter</span></span>
<span id="cb243-42"><a href="#cb243-42"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({<span class="dt">charClassFilters</span><span class="op">:</span> filters})<span class="op">;</span></span>
<span id="cb243-43"><a href="#cb243-43"></a>  }</span>
<span id="cb243-44"><a href="#cb243-44"></a></span>
<span id="cb243-45"><a href="#cb243-45"></a>  <span class="fu">clearFilters</span>() {</span>
<span id="cb243-46"><a href="#cb243-46"></a>    <span class="kw">let</span> filters <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">charClassFilters</span><span class="op">;</span></span>
<span id="cb243-47"><a href="#cb243-47"></a>    <span class="cf">for</span>(<span class="kw">let</span> k <span class="kw">in</span> filters) {</span>
<span id="cb243-48"><a href="#cb243-48"></a>      filters[k] <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb243-49"><a href="#cb243-49"></a>    }</span>
<span id="cb243-50"><a href="#cb243-50"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({<span class="dt">charClassFilters</span><span class="op">:</span> filters})<span class="op">;</span></span>
<span id="cb243-51"><a href="#cb243-51"></a>  }</span>
<span id="cb243-52"><a href="#cb243-52"></a></span>
<span id="cb243-53"><a href="#cb243-53"></a>  <span class="fu">allCharClasses</span>() {</span>
<span id="cb243-54"><a href="#cb243-54"></a>    <span class="kw">let</span> filters <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">charClassFilters</span><span class="op">;</span></span>
<span id="cb243-55"><a href="#cb243-55"></a>    <span class="cf">for</span>(<span class="kw">let</span> k <span class="kw">in</span> filters) {</span>
<span id="cb243-56"><a href="#cb243-56"></a>      filters[k] <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb243-57"><a href="#cb243-57"></a>    }</span>
<span id="cb243-58"><a href="#cb243-58"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({<span class="dt">charClassFilters</span><span class="op">:</span> filters})<span class="op">;</span></span>
<span id="cb243-59"><a href="#cb243-59"></a>  }</span>
<span id="cb243-60"><a href="#cb243-60"></a></span>
<span id="cb243-61"><a href="#cb243-61"></a>  <span class="fu">render</span>() {</span>
<span id="cb243-62"><a href="#cb243-62"></a>    <span class="kw">const</span> th <span class="op">=</span> (header<span class="op">,</span> index) <span class="kw">=&gt;</span> {</span>
<span id="cb243-63"><a href="#cb243-63"></a>      <span class="cf">return</span> (<span class="op">&lt;</span>th key<span class="op">=</span>{index}<span class="op">&gt;</span>{header}<span class="op">&lt;/</span>th<span class="op">&gt;</span>)</span>
<span id="cb243-64"><a href="#cb243-64"></a>    }<span class="op">;</span></span>
<span id="cb243-65"><a href="#cb243-65"></a></span>
<span id="cb243-66"><a href="#cb243-66"></a>    <span class="kw">let</span> headers <span class="op">=</span> [</span>
<span id="cb243-67"><a href="#cb243-67"></a>      <span class="st">&quot;Spell&quot;</span><span class="op">,</span></span>
<span id="cb243-68"><a href="#cb243-68"></a>      <span class="st">&quot;Level&quot;</span><span class="op">,</span></span>
<span id="cb243-69"><a href="#cb243-69"></a>      <span class="st">&quot;School&quot;</span><span class="op">,</span></span>
<span id="cb243-70"><a href="#cb243-70"></a>      <span class="st">&quot;Casting Classes&quot;</span></span>
<span id="cb243-71"><a href="#cb243-71"></a>    ]<span class="op">;</span></span>
<span id="cb243-72"><a href="#cb243-72"></a>    headers <span class="op">=</span> headers<span class="op">.</span><span class="fu">map</span>(th)<span class="op">;</span></span>
<span id="cb243-73"><a href="#cb243-73"></a></span>
<span id="cb243-74"><a href="#cb243-74"></a></span>
<span id="cb243-75"><a href="#cb243-75"></a>    <span class="kw">let</span> filters <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">charClassFilters</span><span class="op">;</span></span>
<span id="cb243-76"><a href="#cb243-76"></a>    <span class="kw">let</span> spells <span class="op">=</span> <span class="fu">filterSpellsByCharClass</span>(<span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">spells</span><span class="op">,</span> filters)<span class="op">;</span></span>
<span id="cb243-77"><a href="#cb243-77"></a></span>
<span id="cb243-78"><a href="#cb243-78"></a>    <span class="kw">const</span> rows <span class="op">=</span> spells<span class="op">.</span><span class="fu">map</span>(SpellRow)<span class="op">;</span></span>
<span id="cb243-79"><a href="#cb243-79"></a></span>
<span id="cb243-80"><a href="#cb243-80"></a>    <span class="cf">return</span> (</span>
<span id="cb243-81"><a href="#cb243-81"></a>      <span class="op">&lt;</span>section id<span class="op">=</span><span class="st">&quot;Spells&quot;</span><span class="op">&gt;</span></span>
<span id="cb243-82"><a href="#cb243-82"></a>        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Spells<span class="op">&lt;/</span>h2<span class="op">&gt;</span></span>
<span id="cb243-83"><a href="#cb243-83"></a>        <span class="op">&lt;</span>h5 className<span class="op">=</span><span class="st">&quot;text-primary&quot;</span><span class="op">&gt;</span></span>
<span id="cb243-84"><a href="#cb243-84"></a>          Filter list</span>
<span id="cb243-85"><a href="#cb243-85"></a>          <span class="op">&lt;</span>button type<span class="op">=</span><span class="st">&quot;button&quot;</span> className<span class="op">=</span><span class="st">&quot;btn btn-link btn-sm&quot;</span> onClick<span class="op">=</span>{<span class="kw">this</span><span class="op">.</span><span class="at">clearFilters</span>}<span class="op">&gt;</span>[clear]<span class="op">&lt;/</span>button<span class="op">&gt;</span></span>
<span id="cb243-86"><a href="#cb243-86"></a>          <span class="op">&lt;</span>button type<span class="op">=</span><span class="st">&quot;button&quot;</span> className<span class="op">=</span><span class="st">&quot;btn btn-link btn-sm&quot;</span> onClick<span class="op">=</span>{<span class="kw">this</span><span class="op">.</span><span class="at">allCharClasses</span>}<span class="op">&gt;</span>[all]<span class="op">&lt;/</span>button<span class="op">&gt;</span></span>
<span id="cb243-87"><a href="#cb243-87"></a>        <span class="op">&lt;/</span>h5<span class="op">&gt;</span></span>
<span id="cb243-88"><a href="#cb243-88"></a>        <span class="op">&lt;</span>form<span class="op">&gt;</span></span>
<span id="cb243-89"><a href="#cb243-89"></a>          <span class="op">&lt;</span>IconCheckBox onChange<span class="op">=</span>{<span class="kw">this</span><span class="op">.</span><span class="at">toggleFilter</span>} isActive<span class="op">=</span>{filters[<span class="st">&quot;bard&quot;</span>]} charClass<span class="op">=</span><span class="st">&quot;bard&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb243-90"><a href="#cb243-90"></a>          <span class="op">&lt;</span>IconCheckBox onChange<span class="op">=</span>{<span class="kw">this</span><span class="op">.</span><span class="at">toggleFilter</span>} isActive<span class="op">=</span>{filters[<span class="st">&quot;cleric&quot;</span>]} charClass<span class="op">=</span><span class="st">&quot;cleric&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb243-91"><a href="#cb243-91"></a>          <span class="op">&lt;</span>IconCheckBox onChange<span class="op">=</span>{<span class="kw">this</span><span class="op">.</span><span class="at">toggleFilter</span>} isActive<span class="op">=</span>{filters[<span class="st">&quot;druid&quot;</span>]} charClass<span class="op">=</span><span class="st">&quot;druid&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb243-92"><a href="#cb243-92"></a>          <span class="op">&lt;</span>IconCheckBox onChange<span class="op">=</span>{<span class="kw">this</span><span class="op">.</span><span class="at">toggleFilter</span>} isActive<span class="op">=</span>{filters[<span class="st">&quot;monk&quot;</span>]} charClass<span class="op">=</span><span class="st">&quot;monk&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb243-93"><a href="#cb243-93"></a>          <span class="op">&lt;</span>IconCheckBox onChange<span class="op">=</span>{<span class="kw">this</span><span class="op">.</span><span class="at">toggleFilter</span>} isActive<span class="op">=</span>{filters[<span class="st">&quot;paladin&quot;</span>]} charClass<span class="op">=</span><span class="st">&quot;paladin&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb243-94"><a href="#cb243-94"></a>          <span class="op">&lt;</span>IconCheckBox onChange<span class="op">=</span>{<span class="kw">this</span><span class="op">.</span><span class="at">toggleFilter</span>} isActive<span class="op">=</span>{filters[<span class="st">&quot;ranger&quot;</span>]} charClass<span class="op">=</span><span class="st">&quot;ranger&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb243-95"><a href="#cb243-95"></a>          <span class="op">&lt;</span>IconCheckBox onChange<span class="op">=</span>{<span class="kw">this</span><span class="op">.</span><span class="at">toggleFilter</span>} isActive<span class="op">=</span>{filters[<span class="st">&quot;sorcerer&quot;</span>]} charClass<span class="op">=</span><span class="st">&quot;sorcerer&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb243-96"><a href="#cb243-96"></a>          <span class="op">&lt;</span>IconCheckBox onChange<span class="op">=</span>{<span class="kw">this</span><span class="op">.</span><span class="at">toggleFilter</span>} isActive<span class="op">=</span>{filters[<span class="st">&quot;warlock&quot;</span>]} charClass<span class="op">=</span><span class="st">&quot;warlock&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb243-97"><a href="#cb243-97"></a>          <span class="op">&lt;</span>IconCheckBox onChange<span class="op">=</span>{<span class="kw">this</span><span class="op">.</span><span class="at">toggleFilter</span>} isActive<span class="op">=</span>{filters[<span class="st">&quot;wizard&quot;</span>]} charClass<span class="op">=</span><span class="st">&quot;wizard&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb243-98"><a href="#cb243-98"></a>        <span class="op">&lt;/</span>form<span class="op">&gt;</span></span>
<span id="cb243-99"><a href="#cb243-99"></a></span>
<span id="cb243-100"><a href="#cb243-100"></a>        <span class="op">&lt;</span>table className<span class="op">=</span><span class="st">&quot;table table-hover table-sm&quot;</span><span class="op">&gt;</span></span>
<span id="cb243-101"><a href="#cb243-101"></a>          <span class="op">&lt;</span>thead<span class="op">&gt;&lt;</span>tr<span class="op">&gt;</span>{headers}<span class="op">&lt;/</span>tr<span class="op">&gt;&lt;/</span>thead<span class="op">&gt;</span></span>
<span id="cb243-102"><a href="#cb243-102"></a>          <span class="op">&lt;</span>tbody<span class="op">&gt;</span>{rows}<span class="op">&lt;/</span>tbody<span class="op">&gt;</span></span>
<span id="cb243-103"><a href="#cb243-103"></a>        <span class="op">&lt;/</span>table<span class="op">&gt;</span></span>
<span id="cb243-104"><a href="#cb243-104"></a></span>
<span id="cb243-105"><a href="#cb243-105"></a>      <span class="op">&lt;/</span>section<span class="op">&gt;</span></span>
<span id="cb243-106"><a href="#cb243-106"></a>    )</span>
<span id="cb243-107"><a href="#cb243-107"></a>  }</span>
<span id="cb243-108"><a href="#cb243-108"></a>}</span>
<span id="cb243-109"><a href="#cb243-109"></a></span>
<span id="cb243-110"><a href="#cb243-110"></a></span>
<span id="cb243-111"><a href="#cb243-111"></a><span class="kw">function</span> <span class="fu">filterSpellsByCharClass</span>(spells<span class="op">,</span> classes) {</span>
<span id="cb243-112"><a href="#cb243-112"></a>  <span class="kw">let</span> t <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb243-113"><a href="#cb243-113"></a>  <span class="kw">function</span> <span class="fu">isActive</span>(spellCasters) {</span>
<span id="cb243-114"><a href="#cb243-114"></a>    <span class="cf">for</span>(<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> spellCasters<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb243-115"><a href="#cb243-115"></a>      <span class="kw">let</span> charClass <span class="op">=</span> spellCasters[i]<span class="op">.</span><span class="fu">toLowerCase</span>()<span class="op">;</span></span>
<span id="cb243-116"><a href="#cb243-116"></a>      <span class="cf">if</span>(classes[charClass]) {</span>
<span id="cb243-117"><a href="#cb243-117"></a>        <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb243-118"><a href="#cb243-118"></a>      }</span>
<span id="cb243-119"><a href="#cb243-119"></a>    }</span>
<span id="cb243-120"><a href="#cb243-120"></a>    <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb243-121"><a href="#cb243-121"></a>  }</span>
<span id="cb243-122"><a href="#cb243-122"></a></span>
<span id="cb243-123"><a href="#cb243-123"></a>  <span class="cf">for</span>(<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> spells<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb243-124"><a href="#cb243-124"></a>    <span class="kw">const</span> spell <span class="op">=</span> spells[i]<span class="op">;</span></span>
<span id="cb243-125"><a href="#cb243-125"></a>    <span class="kw">const</span> spellCasters <span class="op">=</span> spell[<span class="st">&quot;class&quot;</span>]<span class="op">.</span><span class="fu">split</span>(<span class="st">&quot;, &quot;</span>)<span class="op">;</span></span>
<span id="cb243-126"><a href="#cb243-126"></a>    <span class="cf">if</span>(<span class="fu">isActive</span>(spellCasters)) {</span>
<span id="cb243-127"><a href="#cb243-127"></a>      t<span class="op">.</span><span class="fu">push</span>(spell)<span class="op">;</span></span>
<span id="cb243-128"><a href="#cb243-128"></a>    }</span>
<span id="cb243-129"><a href="#cb243-129"></a>  }</span>
<span id="cb243-130"><a href="#cb243-130"></a>  <span class="cf">return</span> t<span class="op">;</span></span>
<span id="cb243-131"><a href="#cb243-131"></a>}</span>
<span id="cb243-132"><a href="#cb243-132"></a></span>
<span id="cb243-133"><a href="#cb243-133"></a></span>
<span id="cb243-134"><a href="#cb243-134"></a></span>
<span id="cb243-135"><a href="#cb243-135"></a><span class="kw">function</span> <span class="fu">IconCheckBox</span>(props) {</span>
<span id="cb243-136"><a href="#cb243-136"></a>  <span class="kw">function</span> <span class="fu">toggle</span>() {</span>
<span id="cb243-137"><a href="#cb243-137"></a>    props<span class="op">.</span><span class="fu">onChange</span>(props<span class="op">.</span><span class="at">charClass</span>)<span class="op">;</span></span>
<span id="cb243-138"><a href="#cb243-138"></a>  }</span>
<span id="cb243-139"><a href="#cb243-139"></a></span>
<span id="cb243-140"><a href="#cb243-140"></a>  <span class="cf">return</span> (</span>
<span id="cb243-141"><a href="#cb243-141"></a>    <span class="op">&lt;</span>span key<span class="op">=</span>{<span class="vs">`toggle_</span><span class="sc">${</span>props<span class="op">.</span><span class="at">charClass</span><span class="sc">}</span><span class="vs">`</span>} className<span class="op">=</span><span class="st">&quot;form-check form-check-inline&quot;</span><span class="op">&gt;</span></span>
<span id="cb243-142"><a href="#cb243-142"></a>      <span class="op">&lt;</span>input className<span class="op">=</span><span class="st">&quot;form-check-input&quot;</span></span>
<span id="cb243-143"><a href="#cb243-143"></a>        type<span class="op">=</span><span class="st">&quot;checkbox&quot;</span></span>
<span id="cb243-144"><a href="#cb243-144"></a>        checked<span class="op">=</span>{props<span class="op">.</span><span class="at">isActive</span>}</span>
<span id="cb243-145"><a href="#cb243-145"></a>        onChange<span class="op">=</span>{toggle} <span class="op">/&gt;</span></span>
<span id="cb243-146"><a href="#cb243-146"></a>      <span class="op">&lt;</span>ClassIcon charClass<span class="op">=</span>{props<span class="op">.</span><span class="at">charClass</span>} <span class="op">/&gt;</span> {props<span class="op">.</span><span class="at">charClass</span>}</span>
<span id="cb243-147"><a href="#cb243-147"></a>    <span class="op">&lt;/</span>span<span class="op">&gt;</span></span>
<span id="cb243-148"><a href="#cb243-148"></a>  )</span>
<span id="cb243-149"><a href="#cb243-149"></a>}</span>
<span id="cb243-150"><a href="#cb243-150"></a></span>
<span id="cb243-151"><a href="#cb243-151"></a><span class="kw">function</span> <span class="fu">SpellRow</span>(spell) {</span>
<span id="cb243-152"><a href="#cb243-152"></a></span>
<span id="cb243-153"><a href="#cb243-153"></a>  <span class="kw">const</span> check <span class="op">=</span> (casterClass) <span class="kw">=&gt;</span> {</span>
<span id="cb243-154"><a href="#cb243-154"></a>    <span class="kw">const</span> spellCasters <span class="op">=</span> spell[<span class="st">&quot;class&quot;</span>]<span class="op">.</span><span class="fu">split</span>(<span class="st">&quot;, &quot;</span>)<span class="op">;</span></span>
<span id="cb243-155"><a href="#cb243-155"></a>    <span class="cf">if</span> (_<span class="op">.</span><span class="fu">includes</span>(spellCasters<span class="op">,</span> casterClass)) {</span>
<span id="cb243-156"><a href="#cb243-156"></a>      <span class="cf">return</span> (</span>
<span id="cb243-157"><a href="#cb243-157"></a>        <span class="op">&lt;</span>abbr title<span class="op">=</span>{casterClass}<span class="op">&gt;</span></span>
<span id="cb243-158"><a href="#cb243-158"></a>          <span class="op">&lt;</span>ClassIcon charClass<span class="op">=</span>{casterClass<span class="op">.</span><span class="fu">toLowerCase</span>()} <span class="op">/&gt;</span></span>
<span id="cb243-159"><a href="#cb243-159"></a>        <span class="op">&lt;/</span>abbr<span class="op">&gt;</span></span>
<span id="cb243-160"><a href="#cb243-160"></a>      )</span>
<span id="cb243-161"><a href="#cb243-161"></a>    }</span>
<span id="cb243-162"><a href="#cb243-162"></a>    <span class="cf">return</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb243-163"><a href="#cb243-163"></a>  }</span>
<span id="cb243-164"><a href="#cb243-164"></a></span>
<span id="cb243-165"><a href="#cb243-165"></a>  <span class="kw">const</span> level <span class="op">=</span> spell<span class="op">.</span><span class="at">level_int</span> <span class="op">||</span> <span class="st">&quot;C&quot;</span><span class="op">;</span></span>
<span id="cb243-166"><a href="#cb243-166"></a>  <span class="cf">return</span> (</span>
<span id="cb243-167"><a href="#cb243-167"></a></span>
<span id="cb243-168"><a href="#cb243-168"></a>    <span class="op">&lt;</span>tr key<span class="op">=</span>{spell<span class="op">.</span><span class="at">_id</span>}<span class="op">&gt;</span></span>
<span id="cb243-169"><a href="#cb243-169"></a>      <span class="op">&lt;</span>td<span class="op">&gt;&lt;</span>Link to<span class="op">=</span><span class="st">&quot;/spells/detail&quot;</span><span class="op">&gt;</span>{spell<span class="op">.</span><span class="at">name</span>}<span class="op">&lt;/</span>Link<span class="op">&gt;&lt;/</span>td<span class="op">&gt;</span></span>
<span id="cb243-170"><a href="#cb243-170"></a>      <span class="op">&lt;</span>td<span class="op">&gt;</span>{level}<span class="op">&lt;/</span>td<span class="op">&gt;</span></span>
<span id="cb243-171"><a href="#cb243-171"></a>      <span class="op">&lt;</span>td<span class="op">&gt;</span>{spell<span class="op">.</span><span class="at">school</span>}<span class="op">&lt;/</span>td<span class="op">&gt;</span></span>
<span id="cb243-172"><a href="#cb243-172"></a>      <span class="op">&lt;</span>td<span class="op">&gt;</span></span>
<span id="cb243-173"><a href="#cb243-173"></a>        {<span class="fu">check</span>(<span class="st">&quot;Bard&quot;</span>)}</span>
<span id="cb243-174"><a href="#cb243-174"></a>        {<span class="fu">check</span>(<span class="st">&quot;Cleric&quot;</span>)}</span>
<span id="cb243-175"><a href="#cb243-175"></a>        {<span class="fu">check</span>(<span class="st">&quot;Druid&quot;</span>)}</span>
<span id="cb243-176"><a href="#cb243-176"></a>        {<span class="fu">check</span>(<span class="st">&quot;Paladin&quot;</span>)}</span>
<span id="cb243-177"><a href="#cb243-177"></a>        {<span class="fu">check</span>(<span class="st">&quot;Ranger&quot;</span>)}</span>
<span id="cb243-178"><a href="#cb243-178"></a>        {<span class="fu">check</span>(<span class="st">&quot;Sorcerer&quot;</span>)}</span>
<span id="cb243-179"><a href="#cb243-179"></a>        {<span class="fu">check</span>(<span class="st">&quot;Warlock&quot;</span>)}</span>
<span id="cb243-180"><a href="#cb243-180"></a>        {<span class="fu">check</span>(<span class="st">&quot;Wizard&quot;</span>)}</span>
<span id="cb243-181"><a href="#cb243-181"></a>      <span class="op">&lt;/</span>td<span class="op">&gt;</span></span>
<span id="cb243-182"><a href="#cb243-182"></a>    <span class="op">&lt;/</span>tr<span class="op">&gt;</span></span>
<span id="cb243-183"><a href="#cb243-183"></a>  )<span class="op">;</span></span>
<span id="cb243-184"><a href="#cb243-184"></a>}</span>
<span id="cb243-185"><a href="#cb243-185"></a></span>
<span id="cb243-186"><a href="#cb243-186"></a><span class="im">export</span> { SpellTable }<span class="op">;</span></span>
<span id="cb243-187"><a href="#cb243-187"></a></span>
<span id="cb243-188"><a href="#cb243-188"></a></span>
<span id="cb243-189"><a href="#cb243-189"></a> </span></code></pre></div>
</div>
</section>
</section>
</section>
<section id="appendices" class="level1">
<h1>Appendices</h1>
<section id="code-templates-solutions-and-examples" class="level2">
<h2>Code templates, solutions, and examples</h2>
<section id="using-repl.it" class="level3">
<h3>Using repl.it</h3>
<p>Online code examples in this book are hosted on <a
href="https://repl.it" class="uri">https://repl.it</a>. Called “repls”,
these source files and programs can be edited and run online, and can be
easily <strong>forked</strong> (remixed) and shared. Several types of
repls are available: blank templates for working on practice exercises
and labs, solutions to exercise problems, and longer code listings that
appear in the book.</p>
<p>We recommend that you make a free account on repl.it to fully work
with the examples, however, you can run and edit the programs as an
anonymous user. You cannot save your work without an account.</p>
</section>
<section id="turtle-graphics-1" class="level3">
<h3>Turtle Graphics</h3>
<ul>
<li><a href="https://repl.it/@mcuringa/turtle-template">Starter
Project</a> (with docs)</li>
<li><a href="https://repl.it/@mcuringa/turtle-exercises">Getting Started
Exercises</a></li>
<li><a
href="https://repl.it/@mcuringa/turtle-getting-started-solutions">Getting
Started Exercises Solutions</a></li>
<li><a href="https://repl.it/@mcuringa/csc-602-lab1">Lab 1</a></li>
<li><a href="https://repl.it/@mcuringa/turtle-functions">Function
Examples</a></li>
<li><a href="https://repl.it/@mcuringa/week2-exercises">Function
Exercises</a></li>
<li><a
href="https://repl.it/@mcuringa/week2-exercises-solutions">Function
Exercise Solutions</a></li>
<li><a href="https://repl.it/@mcuringa/csc-602-lab2">Lab 2</a></li>
</ul>
</section>
<section id="variables-and-expressions" class="level3">
<h3>Variables and expressions</h3>
<ul>
<li><a href="https://repl.it/@mcuringa/ES6-shell">Javascript
Shell</a></li>
<li><a href="https://repl.it/@mcuringa/Variable-Examples">Variable
Examples</a></li>
<li><a href="https://repl.it/@mcuringa/csc-602-lab3">Variable
Exercises</a></li>
<li><a href="https://repl.it/@mcuringa/csc-602-lab3">Variable Exercise
Solutions</a></li>
</ul>
</section>
<section id="functions-3" class="level3">
<h3>Functions</h3>
<ul>
<li><a href="https://repl.it/@mcuringa/function-exercises">Function
Exercises</a></li>
<li><a
href="https://repl.it/@mcuringa/function-exercise-solutions">Function
Exercise Solutions</a></li>
<li><a href="https://repl.it/@mcuringa/tip-calculator">Tip Calculator
Example</a></li>
<li><a href="https://repl.it/@mcuringa/lemonade-lab-solution">Lemonade
Lab Solution</a></li>
</ul>
</section>
<section id="conditionals-1" class="level3">
<h3>Conditionals</h3>
<ul>
<li><a href="https://repl.it/@mcuringa/conditionals-exercises">Boolean
and Conditional Exercises</a></li>
<li><a
href="https://repl.it/@mcuringa/conditionals-exercise-solutions">Exercise
Solutions</a></li>
<li>Conditionals Labs
<ul>
<li><a href="https://repl.it/@mcuringa/conditionals-lab5-bmi">BMI
Lab</a></li>
<li><a href="https://repl.it/@mcuringa/conditionals-lab5-bmi">Animal
Year Lab</a></li>
<li><a href="https://repl.it/@mcuringa/turtle-bounce">Turtle Bounce
Lab</a></li>
</ul></li>
</ul>
</section>
<section id="iteration-with-for" class="level3">
<h3>Iteration with <code>for</code></h3>
<ul>
<li><a href="https://repl.it/@mcuringa/for-loop-exercises">For loop
exercises</a></li>
<li><a href="https://repl.it/@mcuringa/for-loop-turtle-lab">Iteration
Lab Template</a></li>
</ul>
</section>
</section>
</section>
<section id="preface" class="level1">
<h1>Preface</h1>
<section id="preface-to-previous-edition" class="level2">
<h2>Preface to previous edition</h2>
<p>By Jeffrey Elkner</p>
<p>This book owes its existence to the collaboration made possible by
the Internet and the free software movement. Its three authors—a college
professor, a high school teacher, and a professional programmer—never
met face to face to work on it, but we have been able to collaborate
closely, aided by many other folks who have taken the time and energy to
send us their feedback.</p>
<p>We think this book is a testament to the benefits and future
possibilities of this kind of collaboration, the framework for which has
been put in place by Richard Stallman and the Free Software
Foundation.</p>
</section>
<section id="how-and-why-i-came-to-use-python" class="level2">
<h2>How and why I came to use Python</h2>
<p>In 1999, the College Board’s Advanced Placement (AP) Computer Science
exam was given in C++ for the first time. As in many high schools
throughout the country, the decision to change languages had a direct
impact on the computer science curriculum at Yorktown High School in
Arlington, Virginia, where I teach. Up to this point, Pascal was the
language of instruction in both our first-year and AP courses. In
keeping with past practice of giving students two years of exposure to
the same language, we made the decision to switch to C++ in the first
year course for the 1997-98 school year so that we would be in step with
the College Board’s change for the AP course the following year.</p>
<p>Two years later, I was convinced that C++ was a poor choice to use
for introducing students to computer science. While it is certainly a
very powerful programming language, it is also an extremely difficult
language to learn and teach. I found myself constantly fighting with
C++’s difficult syntax and multiple ways of doing things, and I was
losing many students unnecessarily as a result. Convinced there had to
be a better language choice for our first-year class, I went looking for
an alternative to C++.</p>
<p>I needed a language that would run on the machines in our GNU/Linux
lab as well as on the Windows and Macintosh platforms most students have
at home. I wanted it to be free software, so that students could use it
at home regardless of their income. I wanted a language that was used by
professional programmers, and one that had an active developer community
around it. It had to support both procedural and object-oriented
programming. And most importantly, it had to be easy to learn and teach.
When I investigated the choices with these goals in mind, Python stood
out as the best candidate for the job.</p>
<p>I asked one of Yorktown’s talented students, Matt Ahrens, to give
Python a try. In two months he not only learned the language but wrote
an application called pyTicket that enabled our staff to report
technology problems via the Web. I knew that Matt could not have
finished an application of that scale in so short a time in C++, and
this accomplishment, combined with Matt’s positive assessment of Python,
suggested that Python was the solution I was looking for.</p>
</section>
<section id="finding-a-textbook" class="level2">
<h2>Finding a textbook</h2>
<p>Having decided to use Python in both of my introductory computer
science classes the following year, the most pressing problem was the
lack of an available textbook.</p>
<p>Free documents came to the rescue. Earlier in the year, Richard
Stallman had introduced me to Allen Downey. Both of us had written to
Richard expressing an interest in developing free educational materials.
Allen had already written a first-year computer science textbook,
<em>How to Think Like a Computer Scientist</em>. When I read this book,
I knew immediately that I wanted to use it in my class. It was the
clearest and most helpful computer science text I had seen. It
emphasized the processes of thought involved in programming rather than
the features of a particular language. Reading it immediately made me a
better teacher.</p>
<p><em>How to Think Like a Computer Scientist</em> was not just an
excellent book, but it had been released under the GNU public license,
which meant it could be used freely and modified to meet the needs of
its user. Once I decided to use Python, it occurred to me that I could
translate Allen’s original Java version of the book into the new
language. While I would not have been able to write a textbook on my
own, having Allen’s book to work from made it possible for me to do so,
at the same time demonstrating that the cooperative development model
used so well in software could also work for educational materials.</p>
<p>Working on this book for the last two years has been rewarding for
both my students and me, and my students played a big part in the
process. Since I could make instant changes whenever someone found a
spelling error or difficult passage, I encouraged them to look for
mistakes in the book by giving them a bonus point each time they made a
suggestion that resulted in a change in the text. This had the double
benefit of encouraging them to read the text more carefully and of
getting the text thoroughly reviewed by its most important critics,
students using it to learn computer science.</p>
<p>For the second half of the book on object-oriented programming, I
knew that someone with more real programming experience than I had would
be needed to do it right. The book sat in an unfinished state for the
better part of a year until the open source community once again
provided the needed means for its completion.</p>
<p>I received an email from Chris Meyers expressing interest in the
book. Chris is a professional programmer who started teaching a
programming course last year using Python at Lane Community College in
Eugene, Oregon. The prospect of teaching the course had led Chris to the
book, and he started helping out with it immediately. By the end of the
school year he had created a companion project on our Website at <a
href="http://openbookproject.net"
class="uri">http://openbookproject.net</a> (<em>Python for
Fun</em>)[http://openbookproject.net/py4fun&gt;] and was working with
some of my most advanced students as a master teacher, guiding them
beyond where I could take them.</p>
</section>
<section id="introducing-programming-with-python" class="level2">
<h2>Introducing programming with Python</h2>
<p>The process of translating and using <em>How to Think Like a Computer
Scientist</em> for the past two years has confirmed Python’s suitability
for teaching beginning students. Python greatly simplifies programming
examples and makes important programming ideas easier to teach.</p>
<p>The first example from the text illustrates this point. It is the
traditional hello, world program, which in the Java version of the book
looks like this:</p>
<div class="sourceCode" id="cb244"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Hello</span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span> <span class="op">(</span><span class="bu">String</span><span class="op">[]</span> args<span class="op">)</span></span>
<span id="cb244-4"><a href="#cb244-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb244-5"><a href="#cb244-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span> <span class="op">(</span><span class="st">&quot;Hello, world.&quot;</span><span class="op">);</span></span>
<span id="cb244-6"><a href="#cb244-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb244-7"><a href="#cb244-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>in the Python version it becomes:</p>
<div class="sourceCode" id="cb245"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Hello, World!&quot;</span>)</span></code></pre></div>
<p>Even though this is a trivial example, the advantages of Python stand
out. Yorktown’s Computer Science I course has no prerequisites, so many
of the students seeing this example are looking at their first program.
Some of them are undoubtedly a little nervous, having heard that
computer programming is difficult to learn. The Java version has always
forced me to choose between two unsatisfying options: either to explain
the <code>class Hello</code>, <code>public static void main</code>,
<code>String[] args</code>, <code>{</code>, and <code>}</code>,
statements and risk confusing or intimidating some of the students right
at the start, or to tell them, Just don’t worry about all of that stuff
now; we will talk about it later, and risk the same thing. The
educational objectives at this point in the course are to introduce
students to the idea of a programming statement and to get them to write
their first program, thereby introducing them to the programming
environment. The Python program has exactly what is needed to do these
things, and nothing more.</p>
<p>Comparing the explanatory text of the program in each version of the
book further illustrates what this means to the beginning student. There
are seven paragraphs of explanation of Hello, world! in the Java
version; in the Python version, there are only a few sentences. More
importantly, the missing six paragraphs do not deal with the big ideas
in computer programming but with the minutia of Java syntax. I found
this same thing happening throughout the book. Whole paragraphs simply
disappear from the Python version of the text because Python’s much
clearer syntax renders them unnecessary.</p>
<p>Using a very high-level language like Python allows a teacher to
postpone talking about low-level details of the machine until students
have the background that they need to better make sense of the details.
It thus creates the ability to put first things first pedagogically. One
of the best examples of this is the way in which Python handles
variables. In Java a variable is a name for a place that holds a value
if it is a built-in type, and a reference to an object if it is not.
Explaining this distinction requires a discussion of how the computer
stores data. Thus, the idea of a variable is bound up with the hardware
of the machine. The powerful and fundamental concept of a variable is
already difficult enough for beginning students (in both computer
science and algebra). Bytes and addresses do not help the matter. In
Python a variable is a name that refers to a thing. This is a far more
intuitive concept for beginning students and is much closer to the
meaning of variable that they learned in their math courses. I had much
less difficulty teaching variables this year than I did in the past, and
I spent less time helping students with problems using them.</p>
<p>Another example of how Python aids in the teaching and learning of
programming is in its syntax for functions. My students have always had
a great deal of difficulty understanding functions. The main problem
centers around the difference between a function definition and a
function call, and the related distinction between a parameter and an
argument. Python comes to the rescue with syntax that is nothing short
of beautiful. Function definitions begin with the keyword
<code>def</code>, so I simply tell my students, When you define a
function, begin with <code>def</code>, followed by the name of the
function that you are defining; when you call a function, simply call
(type) out its name. Parameters go with definitions; arguments go with
calls. There are no return types, parameter types, or reference and
value parameters to get in the way, so I am now able to teach functions
in less than half the time that it previously took me, with better
comprehension.</p>
<p>Using Python improved the effectiveness of our computer science
program for all students. I saw a higher general level of success and a
lower level of frustration than I experienced teaching with either C++
or Java. I moved faster with better results. More students left the
course with the ability to create meaningful programs and with the
positive attitude toward the experience of programming that this
engenders.</p>
</section>
<section id="building-a-community" class="level2">
<h2>Building a community</h2>
<p>I have received email from all over the globe from people using this
book to learn or to teach programming. A user community has begun to
emerge, and many people have been contributing to the project by sending
in materials for the companion Website at <a
href="http://openbookproject.net/pybiblio"
class="uri">http://openbookproject.net/pybiblio</a>.</p>
<p><strong>With the continued growth of Python, I expect the growth in
the user community to continue and accelerate. The emergence of this
user community and the possibility it suggests for similar collaboration
among educators have been the most exciting parts of working on this
project for me. By working together, we can increase the quality of
materials available for our use and save valuable time. I invite you to
join our community and look forward to hearing from you. Please write to
me at <a
href="mailto:jeff@elkner.net%3E">jeff@elkner.net</a></strong>.</p>
<p>Jeffrey Elkner<br />
Governor’s Career and Technical Academy in Arlington<br />
Arlington, Virginia<br />
</p>
</section>
<section id="the-rhodes-local-edition-rle-version-of-august-2012"
class="level2">
<h2>The Rhodes Local Edition (RLE) (Version of August, 2012)</h2>
<p>By Peter Wentworth</p>
<aside>
<p><strong>A word of thanks …</strong></p>
<p>We switched from Java to Python in our introductory courses in 2010.
So far we think the results look positive. More time will tell.</p>
<p>This predecessor to this book was a great starting point for us,
especially because of the liberal permission to change things. Having
our own in-house course notes or handouts allows us to adapt and stay
fresh, rearrange, see what works, and it gives us agility. We can also
ensure that every student in the course gets a copy of the handouts —
something that doesn’t always happen if we prescribe costly
textbooks.</p>
Many thanks to all the contributors and the authors for making their
hard work available to the Python community and to our students.
</aside>
<p>A colleague and friend, Peter Warren, once made the remark that
learning introductory programming is as much about the environment as it
is about the programming language.</p>
<p>I’m a big fan of IDEs (Integrated Development Environments).<br />
I want help to be integrated into my editor, as a first-class citizen,
available at the press of a button. I want syntax highlighting. I want
immediate syntax checking, and sensible autocompletion. I’d like an
editor that can fold function bodies or regions of code away, because it
promotes and encourages how we build mental abstractions.</p>
<p>I’m especially keen on having a single-stepping debugger and
breakpoints with code inspection built in. We’re trying to build a
conceptual model of program execution in the student’s mind, so I find
most helpful for teaching to have the call stack and variables
explicitly visible, and to be able to immediately inspect the result of
executing a statement.</p>
<p>My philosophy, then, is not to look for a language to teach, but to
look for a combination of IDE and language that are packaged together,
and evaluated as a whole.</p>
<p>I’ve made some quite deep changes to the original book to reflect
this (and various other opinionated views that I hold), and I have no
doubt that more changes will follow as we mature our course.</p>
<p>Here are some of the key things I’ve approached differently:</p>
<ul>
<li>Our local situation demands that we have a large number of service
course students in an introductory course of just 3 weeks, and then we
get another semester of teaching with those going into our mainstream
program. So the book is in two parts: we’ll do the first five chapters
in the big “get your toes wet” course, and the rest of the material in a
separate semester.</li>
<li>We’re using Python 3. It is cleaner, more object oriented, and has
fewer ad-hoc irregularities than earlier versions of Python.</li>
<li>We’re using PyScripter as our IDE, on Windows. And it is hardwired
into parts of these notes, with screenshots, etc.</li>
<li>I’ve dropped GASP.</li>
<li>For graphics we start with the Turtle module.<br />
As things move along, we use PyGame for more advanced graphics.</li>
<li>I’ve introduced some event-driven programming using the
turtle.<br />
</li>
<li>I have tried to push more object-oriented notions earlier, without
asking students to synthesize objects or write their own classes. So,
for example, in the chapter about the turtle, we create multiple
instances of turtles, talk about their attributes and state (color,
position, etc), and we favour method-call style to move them around,
i.e. <code>tess.forward(100)</code>. Similarly, when we use random
numbers, we avoid the “hidden singleton generator” in the random module
— we prefer to create an instance of a generator, and invoke methods on
the instance.</li>
<li>The ease of constructing lists and the <code>for</code> loop seem to
be winners in Python, so rather than use the traditional command-line
<code>input</code> for data, I’ve favoured using loops and lists right
up front, like this:</li>
</ul>
<div class="sourceCode" id="cb246"><pre
class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb246-1"><a href="#cb246-1"></a>friends <span class="op">=</span> [<span class="st">&quot;Zoe&quot;</span>, <span class="st">&quot;Joe&quot;</span>, <span class="st">&quot;Bill&quot;</span>]</span>
<span id="cb246-2"><a href="#cb246-2"></a><span class="cf">for</span> f <span class="kw">in</span> friends:</span>
<span id="cb246-3"><a href="#cb246-3"></a>    invitation <span class="op">=</span> <span class="st">&quot;Hi &quot;</span> <span class="op">+</span> f <span class="op">+</span> <span class="st">&quot;.  Please come to my party on Saturday!&quot;</span></span>
<span id="cb246-4"><a href="#cb246-4"></a>    <span class="bu">print</span>(invitation)</span></code></pre></div>
<p>This also means that I bumped <code>range</code> up for early
exposure.<br />
I envisage that over time we’ll see more opportunities to exploit “early
lists, early iteration” in its most simple form.</p>
<ul>
<li>I dumped <code>doctest</code>: it is too quirky for my liking. For
example, it fails a test if the spacing between list elements is not
precisely the same as the output string, or if Python prints a string
with single quotes, but you wrote up the test case with double quotes.
Cases like this also confused students (and instructors) quite
badly:</li>
</ul>
<div class="sourceCode" id="cb247"><pre
class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb247-1"><a href="#cb247-1"></a></span>
<span id="cb247-2"><a href="#cb247-2"></a><span class="kw">def</span> addlist(xs):</span>
<span id="cb247-3"><a href="#cb247-3"></a>    <span class="co">&quot;&quot;&quot;</span></span>
<span id="cb247-4"><a href="#cb247-4"></a><span class="co">    &gt;&gt;&gt; xs = [2,3,4]</span></span>
<span id="cb247-5"><a href="#cb247-5"></a><span class="co">    &gt;&gt;&gt; addlist(xs)</span></span>
<span id="cb247-6"><a href="#cb247-6"></a><span class="co">    9</span></span>
<span id="cb247-7"><a href="#cb247-7"></a><span class="co">    &quot;&quot;&quot;</span></span>
<span id="cb247-8"><a href="#cb247-8"></a>    <span class="cf">return</span></span></code></pre></div>
<p>If you can explain the difference in scope rules and lifetimes
between the parameter <code>xs</code> and the doctest variable
<code>xs</code> elegantly, please let me know. Yes, I know doctest
creates its own scope behind our back, but it is exactly this black
magic that we’re trying to avoid.<br />
From the usual indentation rules, also looks like the doctests are
nested inside the function scope, but they are not. Students thought
that the parameter had been given its value by the assignment to
<code>xs</code> in the doctest!</p>
<p>I also think that keeping the test suite separate from the functions
under test leads to a cleaner relationship between caller and callee,
and gives a better chance of getting argument passing / parameter
concepts taught accurately.</p>
<p>There is a good unit testing module in Python, (and PyScripter offers
integrated support for it, and automated generation of skeleton test
modules), but it looked too advanced for beginners, because it requires
multi-module concepts.</p>
<p>So I’ve favoured my own test scaffolding in Chapter 6 (about 10 lines
of code) that the students must insert into whatever file they’re
working on.</p>
<ul>
<li><p>I’ve played down command-line input / process / output where
possible. Many of our students have never seen a command-line shell, and
it is arguably quite intimidating.</p></li>
<li><p>We’ve gone back to a more “classic / static” approach to writing
our own classes and objects. Python (in company with languages like
Javascript, Ruby, Perl, PHP, etc.) don’t really emphasize notions of
“sealed” classes or “private” members, or even “sealed instances”.</p>
<p>So one teaching approach is to allocate each instance as an empty
container, and subsequently allow the external clients of the class to
poke new members (methods or attributes) into different instances as
they wish to.<br />
It is a very dynamic approach, but perhaps not one that encourages
thinking in abstractions, layers, contracts, decoupling, etc. It might
even be the kind of thing that one could write one of those <em>“x,y,z …
considered harmful”</em> papers about.</p>
<p>In our more conservative approach, we put an initializer into every
class, we determine at object instantiation time what members we want,
and we initialize the instances from within the class. So we’ve moved
closer in philosophy to C# / Java on this one.</p></li>
<li><p>We’re moving towards introducing more algorithms earlier into the
course. Python is an efficient teaching language — we can make fast
progress. But the gains we make there we’d like to invest into deeper
problem solving, and more complex algorithms with the basics, rather
than cover “more Python features”. Some of these changes have started to
find their way in this version, and I’m sure we’ll see more in
future.</p></li>
<li><p>We’re interested in issues around teaching and learning. Some
research indicates that “intellectual playfulness” is important. The
study referenced in the Odds-and-ends workbook at the end just didn’t
seem to have anywhere sensible to go in the book, yet I wanted it
included. It is quite likely that we’ll allow more issues like this to
creep into the book, to try to make it more than just about programming
in Python.</p></li>
</ul>
</section>
<section id="gnu-free-documentation-license" class="level2">
<h2>GNU Free Documentation License</h2>
<p>Version 1.3, 3 November 2008</p>
<p>Copyright (C) 2000, 2001, 2002, 2007, 2008 Free Software Foundation,
Inc. <a href="https://fsf.org/" class="uri">https://fsf.org/</a></p>
<p>Everyone is permitted to copy and distribute verbatim copies of this
license document, but changing it is not allowed.</p>
<section id="preamble" class="level4">
<h4>0. PREAMBLE</h4>
<p>The purpose of this License is to make a manual, textbook, or other
functional and useful document “free” in the sense of freedom: to assure
everyone the effective freedom to copy and redistribute it, with or
without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible for
modifications made by others.</p>
<p>This License is a kind of “copyleft”, which means that derivative
works of the document must themselves be free in the same sense. It
complements the GNU General Public License, which is a copyleft license
designed for free software.</p>
<p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free program
should come with manuals providing the same freedoms that the software
does. But this License is not limited to software manuals; it can be
used for any textual work, regardless of subject matter or whether it is
published as a printed book. We recommend this License principally for
works whose purpose is instruction or reference.</p>
</section>
<section id="applicability-and-definitions" class="level4">
<h4>1. APPLICABILITY AND DEFINITIONS</h4>
<p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License. Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein. The “Document”, below, refers
to any such manual or work. Any member of the public is a licensee, and
is addressed as “you”. You accept the license if you copy, modify or
distribute the work in a way requiring permission under copyright
law.</p>
<p>A “Modified Version” of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.</p>
<p>A “Secondary Section” is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document’s overall subject
(or to related matters) and contains nothing that could fall directly
within that overall subject. (Thus, if the Document is in part a
textbook of mathematics, a Secondary Section may not explain any
mathematics.) The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.</p>
<p>The “Invariant Sections” are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice that
says that the Document is released under this License. If a section does
not fit the above definition of Secondary then it is not allowed to be
designated as Invariant. The Document may contain zero Invariant
Sections. If the Document does not identify any Invariant Sections then
there are none.</p>
<p>The “Cover Texts” are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License. A Front-Cover Text may be
at most 5 words, and a Back-Cover Text may be at most 25 words.</p>
<p>A “Transparent” copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the general
public, that is suitable for revising the document straightforwardly
with generic text editors or (for images composed of pixels) generic
paint programs or (for drawings) some widely available drawing editor,
and that is suitable for input to text formatters or for automatic
translation to a variety of formats suitable for input to text
formatters. A copy made in an otherwise Transparent file format whose
markup, or absence of markup, has been arranged to thwart or discourage
subsequent modification by readers is not Transparent. An image format
is not Transparent if used for any substantial amount of text. A copy
that is not “Transparent” is called “Opaque”.</p>
<p>Examples of suitable formats for Transparent copies include plain
ASCII without markup, Texinfo input format, LaTeX input format, SGML or
XML using a publicly available DTD, and standard-conforming simple HTML,
PostScript or PDF designed for human modification. Examples of
transparent image formats include PNG, XCF and JPG. Opaque formats
include proprietary formats that can be read and edited only by
proprietary word processors, SGML or XML for which the DTD and/or
processing tools are not generally available, and the machine-generated
HTML, PostScript or PDF produced by some word processors for output
purposes only.</p>
<p>The “Title Page” means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page. For works in formats
which do not have any title page as such, “Title Page” means the text
near the most prominent appearance of the work’s title, preceding the
beginning of the body of the text.</p>
<p>The “publisher” means any person or entity that distributes copies of
the Document to the public.</p>
<p>A section “Entitled XYZ” means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language. (Here XYZ stands for a
specific section name mentioned below, such as “Acknowledgements”,
“Dedications”, “Endorsements”, or “History”.) To “Preserve the Title” of
such a section when you modify the Document means that it remains a
section “Entitled XYZ” according to this definition.</p>
<p>The Document may include Warranty Disclaimers next to the notice
which states that this License applies to the Document. These Warranty
Disclaimers are considered to be included by reference in this License,
but only as regards disclaiming warranties: any other implication that
these Warranty Disclaimers may have is void and has no effect on the
meaning of this License.</p>
</section>
<section id="verbatim-copying" class="level4">
<h4>2. VERBATIM COPYING</h4>
<p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies to
the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License. You may not use
technical measures to obstruct or control the reading or further copying
of the copies you make or distribute. However, you may accept
compensation in exchange for copies. If you distribute a large enough
number of copies you must also follow the conditions in section 3.</p>
<p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.</p>
</section>
<section id="copying-in-quantity" class="level4">
<h4>3. COPYING IN QUANTITY</h4>
<p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document’s license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover Texts:
Front-Cover Texts on the front cover, and Back-Cover Texts on the back
cover. Both covers must also clearly and legibly identify you as the
publisher of these copies. The front cover must present the full title
with all words of the title equally prominent and visible. You may add
other material on the covers in addition. Copying with changes limited
to the covers, as long as they preserve the title of the Document and
satisfy these conditions, can be treated as verbatim copying in other
respects.</p>
<p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.</p>
<p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy a
computer-network location from which the general network-using public
has access to download using public-standard network protocols a
complete Transparent copy of the Document, free of added material. If
you use the latter option, you must take reasonably prudent steps, when
you begin distribution of Opaque copies in quantity, to ensure that this
Transparent copy will remain thus accessible at the stated location
until at least one year after the last time you distribute an Opaque
copy (directly or through your agents or retailers) of that edition to
the public.</p>
<p>It is requested, but not required, that you contact the authors of
the Document well before redistributing any large number of copies, to
give them a chance to provide you with an updated version of the
Document.</p>
</section>
<section id="modifications" class="level4">
<h4>4. MODIFICATIONS</h4>
<p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release the
Modified Version under precisely this License, with the Modified Version
filling the role of the Document, thus licensing distribution and
modification of the Modified Version to whoever possesses a copy of it.
In addition, you must do these things in the Modified Version:</p>
<ul>
<li>A. Use in the Title Page (and on the covers, if any) a title
distinct from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section of
the Document). You may use the same title as a previous version if the
original publisher of that version gives permission.</li>
<li>B. List on the Title Page, as authors, one or more persons or
entities responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.</li>
<li>C. State on the Title page the name of the publisher of the Modified
Version, as the publisher.</li>
<li>D. Preserve all the copyright notices of the Document.</li>
<li>E. Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.</li>
<li>F. Include, immediately after the copyright notices, a license
notice giving the public permission to use the Modified Version under
the terms of this License, in the form shown in the Addendum below.</li>
<li>G. Preserve in that license notice the full lists of Invariant
Sections and required Cover Texts given in the Document’s license
notice.</li>
<li>H. Include an unaltered copy of this License.</li>
<li>I. Preserve the section Entitled “History”, Preserve its Title, and
add to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page. If there
is no section Entitled “History” in the Document, create one stating the
title, year, authors, and publisher of the Document as given on its
Title Page, then add an item describing the Modified Version as stated
in the previous sentence.</li>
<li>J. Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise the
network locations given in the Document for previous versions it was
based on. These may be placed in the “History” section. You may omit a
network location for a work that was published at least four years
before the Document itself, or if the original publisher of the version
it refers to gives permission.</li>
<li>K. For any section Entitled “Acknowledgements” or “Dedications”,
Preserve the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.</li>
<li>L. Preserve all the Invariant Sections of the Document, unaltered in
their text and in their titles. Section numbers or the equivalent are
not considered part of the section titles.</li>
<li>M. Delete any section Entitled “Endorsements”. Such a section may
not be included in the Modified Version.</li>
<li>N. Do not retitle any existing section to be Entitled “Endorsements”
or to conflict in title with any Invariant Section.</li>
<li>O. Preserve any Warranty Disclaimers.</li>
</ul>
<p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant. To do this, add their titles to the list
of Invariant Sections in the Modified Version’s license notice. These
titles must be distinct from any other section titles.</p>
<p>You may add a section Entitled “Endorsements”, provided it contains
nothing but endorsements of your Modified Version by various parties—for
example, statements of peer review or that the text has been approved by
an organization as the authoritative definition of a standard.</p>
<p>You may add a passage of up to five words as a Front-Cover Text, and
a passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version. Only one passage of Front-Cover
Text and one of Back-Cover Text may be added by (or through arrangements
made by) any one entity. If the Document already includes a cover text
for the same cover, previously added by you or by arrangement made by
the same entity you are acting on behalf of, you may not add another;
but you may replace the old one, on explicit permission from the
previous publisher that added the old one.</p>
<p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.</p>
</section>
<section id="combining-documents" class="level4">
<h4>5. COMBINING DOCUMENTS</h4>
<p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its license
notice, and that you preserve all their Warranty Disclaimers.</p>
<p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy. If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by adding
at the end of it, in parentheses, the name of the original author or
publisher of that section if known, or else a unique number. Make the
same adjustment to the section titles in the list of Invariant Sections
in the license notice of the combined work.</p>
<p>In the combination, you must combine any sections Entitled “History”
in the various original documents, forming one section Entitled
“History”; likewise combine any sections Entitled “Acknowledgements”,
and any sections Entitled “Dedications”. You must delete all sections
Entitled “Endorsements”.</p>
</section>
<section id="collections-of-documents" class="level4">
<h4>6. COLLECTIONS OF DOCUMENTS</h4>
<p>You may make a collection consisting of the Document and other
documents released under this License, and replace the individual copies
of this License in the various documents with a single copy that is
included in the collection, provided that you follow the rules of this
License for verbatim copying of each of the documents in all other
respects.</p>
<p>You may extract a single document from such a collection, and
distribute it individually under this License, provided you insert a
copy of this License into the extracted document, and follow this
License in all other respects regarding verbatim copying of that
document.</p>
</section>
<section id="aggregation-with-independent-works" class="level4">
<h4>7. AGGREGATION WITH INDEPENDENT WORKS</h4>
<p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an “aggregate” if the copyright resulting
from the compilation is not used to limit the legal rights of the
compilation’s users beyond what the individual works permit. When the
Document is included in an aggregate, this License does not apply to the
other works in the aggregate which are not themselves derivative works
of the Document.</p>
<p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document’s Cover Texts may be placed on covers
that bracket the Document within the aggregate, or the electronic
equivalent of covers if the Document is in electronic form. Otherwise
they must appear on printed covers that bracket the whole aggregate.</p>
</section>
<section id="translation" class="level4">
<h4>8. TRANSLATION</h4>
<p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections. You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers. In case of a disagreement between the
translation and the original version of this License or a notice or
disclaimer, the original version will prevail.</p>
<p>If a section in the Document is Entitled “Acknowledgements”,
“Dedications”, or “History”, the requirement (section 4) to Preserve its
Title (section 1) will typically require changing the actual title.</p>
</section>
<section id="termination" class="level4">
<h4>9. TERMINATION</h4>
<p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License. Any attempt otherwise
to copy, modify, sublicense, or distribute it is void, and will
automatically terminate your rights under this License.</p>
<p>However, if you cease all violation of this License, then your
license from a particular copyright holder is reinstated (a)
provisionally, unless and until the copyright holder explicitly and
finally terminates your license, and (b) permanently, if the copyright
holder fails to notify you of the violation by some reasonable means
prior to 60 days after the cessation.</p>
<p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after your
receipt of the notice.</p>
<p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License. If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.</p>
</section>
<section id="future-revisions-of-this-license" class="level4">
<h4>10. FUTURE REVISIONS OF THIS LICENSE</h4>
<p>The Free Software Foundation may publish new, revised versions of the
GNU Free Documentation License from time to time. Such new versions will
be similar in spirit to the present version, but may differ in detail to
address new problems or concerns. See <a
href="https://www.gnu.org/licenses/"
class="uri">https://www.gnu.org/licenses/</a>.</p>
<p>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License “or any later version” applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation. If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation. If the Document specifies
that a proxy can decide which future versions of this License can be
used, that proxy’s public statement of acceptance of a version
permanently authorizes you to choose that version for the Document.</p>
</section>
<section id="relicensing" class="level4">
<h4>11. RELICENSING</h4>
<p>“Massive Multiauthor Collaboration Site” (or “MMC Site”) means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works. A public
wiki that anybody can edit is an example of such a server. A “Massive
Multiauthor Collaboration” (or “MMC”) contained in the site means any
set of copyrightable works thus published on the MMC site.</p>
<p>“CC-BY-SA” means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.</p>
<p>“Incorporate” means to publish or republish a Document, in whole or
in part, as part of another Document.</p>
<p>An MMC is “eligible for relicensing” if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole or
in part into the MMC, (1) had no cover texts or invariant sections, and
(2) were thus incorporated prior to November 1, 2008.</p>
<p>The operator of an MMC Site may republish an MMC contained in the
site under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.</p>
</section>
<section id="addendum-how-to-use-this-license-for-your-documents"
class="level3">
<h3>ADDENDUM: How to use this License for your documents</h3>
<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and license
notices just after the title page:</p>
<pre><code>    Copyright (C)  YEAR  YOUR NAME.
    Permission is granted to copy, distribute and/or modify this document
    under the terms of the GNU Free Documentation License, Version 1.3
    or any later version published by the Free Software Foundation;
    with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
    A copy of the license is included in the section entitled &quot;GNU
    Free Documentation License&quot;.</code></pre>
<p>If you have Invariant Sections, Front-Cover Texts and Back-Cover
Texts, replace the “with … Texts.” line with this:</p>
<pre><code>    with the Invariant Sections being LIST THEIR TITLES, with the
    Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</code></pre>
<p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.</p>
<p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of free
software license, such as the GNU General Public License, to permit
their use in free software.</p>
</section>
</section>
</section>

<script src="js/listings.js"></script>

</body>
</html>
